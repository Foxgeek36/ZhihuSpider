<!DOCTYPE html>
<html lang="zh-CN" dropEffect="none" class="no-js ">
<head>
<meta charset="utf-8" />

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="renderer" content="webkit" />
<meta http-equiv="X-ZA-Response-Id" content="f16548924ec4457eb18a003070c4eb59">

<meta http-equiv="X-ZA-Experiment" content="default:None,ge3:ge3_10,ge2:ge2_1,SE_I:c,nwebQAGrowth:experiment,recom_answer_rec:answer_base,is_office:false,recommend_live_guess_like:live_guess_gbdt,nweb_growth_people:default,recom_live_ac:question_base,app_store_rate_dialog:close,live_store:ls_a1_b2_c2_f2,nweb_search:nweb_search_heifetz,new_live_feed_mediacard:new,hybrid_zhmore_video:yes,ad_r:a,growth_search:s2,qaweb_related_readings_content_control:close,search_hybrid_tabs:pin-3#album-7,nweb_feed_ui:excerpt,recommend_question:rec_question_new4,recommend_live_detail:live_detail_no_rerank,recommend_ebook_ac:query_base,nweb_search_suggest:experiment,enable_vote_down_reason_menu:d,android_search_tab_style:search_tab_style_b,android_db_recommend_action:open,android_db_feed_hash_tag_style:button">
<title>算法 - 收藏夹 - 知乎</title>

<meta name="apple-itunes-app" content="app-id=432274380, app-argument=zhihu://collections/273369749">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta http-equiv="mobile-agent" content="format=html5;url=https://www.zhihu.com/collection/273369749">
<meta id="znonce" name="znonce" content="8b4d218eacf94be88126e7ba35cc2e78">



<link rel="apple-touch-icon" href="https://static.zhihu.com/static/revved/img/ios/touch-icon-152.87c020b9.png" sizes="152x152">
<link rel="apple-touch-icon" href="https://static.zhihu.com/static/revved/img/ios/touch-icon-120.496c913b.png" sizes="120x120">
<link rel="apple-touch-icon" href="https://static.zhihu.com/static/revved/img/ios/touch-icon-76.dcf79352.png" sizes="76x76">
<link rel="apple-touch-icon" href="https://static.zhihu.com/static/revved/img/ios/touch-icon-60.9911cffb.png" sizes="60x60">


<link rel="shortcut icon" href="https://static.zhihu.com/static/favicon.ico" type="image/x-icon">

<link rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/static/search.xml" title="知乎" />
<link rel="stylesheet" href="https://static.zhihu.com/static/revved/-/css/z.3e5da9dd.css">





<!--[if lt IE 9]>
<script src="https://static.zhihu.com/static/components/respond/dest/respond.min.js"></script>
<link href="https://static.zhihu.com/static/components/respond/cross-domain/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/static/components/respond/cross-domain/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/static/components/respond/cross-domain/respond.proxy.js"></script>
<![endif]-->
<script src="https://static.zhihu.com/static/revved/-/js/instant.35b468b8.js"></script>

<style type="text/css">
.zm-item-fav + .zm-item-fav .zm-item-answer {
padding-top: 7px;
border-top: 1px solid #eee;
}
.zm-item-answer-author-info a.collapse {
margin-right: -25px;
margin-top: 0;
}
</style>

</head>

<body class="zhi ">




<div role="navigation" class="zu-top" data-za-module="TopNavBar">
<div class="zg-wrap modal-shifting clearfix" id="zh-top-inner">
<a href="/" class="zu-top-link-logo" id="zh-top-link-logo" data-za-c="view_home" data-za-a="visit_home" data-za-l="top_navigation_zhihu_logo">知乎</a>

<div class="top-nav-profile">
<a href="/people/xiao-gui-55-68" class="zu-top-nav-userinfo ">
<span class="name">小鬼</span>
<img class="Avatar" src="https://pic2.zhimg.com/v2-8526bf36fd355e67836415fdd6458bfc_s.jpg" srcset="https://pic2.zhimg.com/v2-8526bf36fd355e67836415fdd6458bfc_xs.jpg 2x" alt="小鬼" />
<span id="zh-top-nav-new-pm" class="zg-noti-number zu-top-nav-pm-count"
style="visibility:hidden" data-count="0">

</span>
</a>
<ul class="top-nav-dropdown" id="top-nav-profile-dropdown">
<li>
<a href="/people/xiao-gui-55-68">
<i class="zg-icon zg-icon-dd-home"></i>我的主页
</a>
</li>

<li>
<a href="/inbox">
<i class="zg-icon zg-icon-dd-pm"></i>私信
<span id="zh-top-nav-pm-count" class="zu-top-nav-pm-count zg-noti-number"
style="visibility:hidden" data-count="0">

</span>
</a>
</li>
<li>
<a href="/settings">
<i class="zg-icon zg-icon-dd-settings"></i>设置
</a>
</li>
<li>
<a href="/logout">
<i class="zg-icon zg-icon-dd-logout"></i>退出
</a>
</li>
</ul>

</div>



<button class="zu-top-add-question" id="zu-top-add-question">提问</button>


<div role="search" id="zh-top-search" class="zu-top-search">
<form method="GET" action="/search" id="zh-top-search-form" class="zu-top-search-form">



<input type="hidden" name="type" value="content">
<label for="q" class="hide-text">知乎搜索</label><input type="text" class="zu-top-search-input" id="q" name="q" autocomplete="off" value="" maxlength="100" placeholder="搜索你感兴趣的内容…">
<button type="submit" class="zu-top-search-button"><span class="hide-text">搜索</span><span class="sprite-global-icon-magnifier-dark"></span></button>
</form>
</div>



<div id="zg-top-nav" class="zu-top-nav">
<ul class="zu-top-nav-ul zg-clear">

<li class="zu-top-nav-li " id="zh-top-nav-home">
<a class="zu-top-nav-link" href="/" id="zh-top-link-home" data-za-c="view_home" data-za-a="visit_home" data-za-l="top_navigation_home">首页</a>
</li>



<li class="zu-top-nav-li " id="zh-top-nav-explore">
<a class="zu-top-nav-link" href="/explore">发现</a>
</li>

<li class="top-nav-noti zu-top-nav-li ">
<a class="zu-top-nav-link" href="/notifications" id="zh-top-nav-count-wrap" role="button"><span class="mobi-arrow"></span>消息</a>
</li>



</ul>
<div class="zu-top-nav-live zu-noti7-popup zg-r5px no-hovercard" id="zh-top-nav-live-new" role="popup" tabindex="0">
<div class="zu-top-nav-live-inner zg-r5px">
<div class="zu-top-live-icon">&nbsp;</div>
<div class="zu-home-noti-inner" id="zh-top-nav-live-new-inner">
<div class="zm-noti7-popup-tab-container clearfix" tabindex="0">
<button class="zm-noti7-popup-tab-item message">
<span class="icon">消息</span>
</button>
<button class="zm-noti7-popup-tab-item user">
<span class="icon">用户</span>
</button>
<button class="zm-noti7-popup-tab-item thanks">
<span class="icon">赞同和感谢</span>
</button>
</div>
</div>
<div class="zm-noti7-frame-border top"></div>
<div class="zm-noti7-frame">
<div class="zm-noti7-content message">
<div class="zm-noti7-content-inner">
<div class="zm-noti7-content-body">
<div class="zm-noti7-popup-loading">
<span class="noti-spinner-loading"></span>
</div>
</div>
</div>
</div>
<div class="zm-noti7-content user" style="display:none;">
<div class="zm-noti7-content-inner">
<div class="zm-noti7-content-body">
<div class="zm-noti7-popup-loading">
<span class="noti-spinner-loading"></span>
</div>
</div>
</div>
</div>
<div class="zm-noti7-content thanks" style="display:none;">
<div class="zm-noti7-content-inner">
<div class="zm-noti7-content-body">
<div class="zm-noti7-popup-loading">
<span class="noti-spinner-loading"></span>
</div>
</div>
</div>
</div>
</div>
<div class="zm-noti7-frame-border bottom"></div>
<div class="zm-noti7-popup-footer">
<a href="/notifications" class="zm-noti7-popup-footer-all zg-right">查看全部 &raquo;</a>
<a href="/settings/notification" class="zm-noti7-popup-footer-set" title="通知设置" ><i class="zg-icon zg-icon-settings"></i></a>
</div>
</div>
</div>

</div>

</div>
</div>


<div class="zu-global-notify" id="zh-global-message" style="display:none">
<div class="zg-wrap">
<div class="zu-global-nitify-inner">
<a class="zu-global-notify-close" href="javascript:;" title="关闭" name="close">x</a>
<span class="zu-global-notify-icon"></span>
<span class="zu-global-notify-msg"></span>
</div>
</div>
</div>




<div class="zg-wrap zu-main clearfix "  role="main">
<div class="zu-main-content">
<div class="zu-main-content-inner">


<div class="zg-section-title">
<div style="margin-bottom: 5px;">

<a href="/collections" data-za-c="collection" data-za-l="collection_collections" data-za-a="visit_collections">«&nbsp;去我的收藏</a>

</div>
<div style="margin:0 0 8px 0" id="zh-list-title" >
<h2 class="zm-item-title zm-editable-content" id="zh-fav-head-title">

算法
</h2>
</div>
<div class="zg-section" style="margin-bottom: 5px;" id="zh-list-desc" >
<div class="zm-editable-content" id="zh-fav-head-description"></div>
<div class="zm-editable-content" id="zh-fav-head-description-source" style="display:none;"></div>
</div>
<div class="zm-item-meta" id="zh-list-meta-wrap">
<div class="zm-item-meta-actions">
<a href="#" name="addcomment" class="toggle-comment">
<i class="z-icon-comment"></i>添加评论</a>

<span class="zg-bull">&bull;</span>
<a href="javascript:;" name="edit">编辑</a>
<span class="zg-bull">&bull;</span>
<a href="javascript:;" name="remove">删除</a>

</div>

</div>
</div>

<div id="zh-list-collection-wrap" style="margin-bottom: 10px;">



<div class="zm-item" data-type="Post">
<h2 class="zm-item-title"><a target='_blank' class="post-link" href="https://zhuanlan.zhihu.com/p/34840762" data-za-element-name="Title">一篇搞懂AVL平衡二叉树</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-feed zm-item-post" data-type="p">
<link itemprop="url" href="https://zhuanlan.zhihu.com/p/34840762">
<meta itemprop="post-id" content="6126319">
<meta itemprop="post-url-token" content="34840762">
<a class="zg-anchor-hidden" name="post-34840762"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="#" data-bind-votecount>7</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">7</span>
<span class="label sr-only">赞</span>
</button>
</div>


<div class="post-head">
<div class="author-info summary-wrapper">


<span class="author-link-line">
<a href="/people/EspressoOcean" data-hovercard="p$t$EspressoOcean"
class="author-link">Uno Whoiam</a></span><span title="AI&amp;amp;CV/科技人文求知者/好读书，欲求甚解/努力成为顶尖Coder/" class="bio">
AI&amp;amp;CV/科技人文求知者/好读书，欲求…
</span>

</div>
<div class="zm-item-vote-info" data-votecount="7">



<span class="voters text"><a href="#" class="more text"><span class="js-voteCount">7</span>&nbsp;人赞</a></span>


</div>
</div>
<div class="entry-body">
<div class="zm-item-rich-text js-collapse-body" data-resourceid="6126319">
<div class="post-content" data-author-name="Uno Whoiam" data-entry-url="https://zhuanlan.zhihu.com/p/34840762">
<textarea hidden class="content">&lt;h2&gt;一、什么是平衡二叉树？&lt;/h2&gt;&lt;p&gt;二叉树是一个非常适合于查找的的数据结构，但这个数据结构存在一个最大的问题就在于：在最坏的情况下，二叉树有可能退化成一个链表。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;为了解决这个问题，便诞生了AVL树、B-树、红黑树等平衡二叉树结构。本文着重介绍AVL树。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;除了满足二叉查找树的性之外，AVL树的特性如下：&lt;/p&gt;&lt;p&gt;1、AVL树的左右子树的高度差别小于等于1。&lt;/p&gt;&lt;p&gt;2、AVL树的左右子树也是AVL树。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;二、热手：如何判断一个二叉树是否为AVL树？&lt;/h2&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//leetcode.com/problems/balanced-binary-tree/description/&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic1.zhimg.com/v2-0c435ab948b151fd834be55f80a09794_180x120.jpg&quot; data-image-width=&quot;500&quot; data-image-height=&quot;260&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Balanced Binary Tree - LeetCode&lt;/a&gt;&lt;p&gt;Given a binary tree, determine if it is height-balanced.&lt;/p&gt;&lt;p&gt;For this problem, a height-balanced binary tree is defined as:&lt;/p&gt;&lt;p&gt;a binary tree in which the depth of the two subtrees of &lt;i&gt;every&lt;/i&gt; node never differ by more than 1.&lt;/p&gt;&lt;blockquote&gt;&lt;b&gt;Example 1:&lt;/b&gt;&lt;/blockquote&gt;&lt;p&gt;Given the following tree [3,9,20,null,null,15,7]:&lt;/p&gt;&lt;p&gt;3&lt;br&gt;   / \&lt;br&gt;  9  20&lt;br&gt;    /  \&lt;br&gt;   15   7&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;Return true.

Example 2:&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Given the following tree [1,2,2,3,3,null,null,4,4]:&lt;/p&gt;&lt;p&gt; 1&lt;br&gt;      / \&lt;br&gt;     2   2&lt;br&gt;    / \&lt;br&gt;   3   3&lt;br&gt;  / \&lt;br&gt; 4   4&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;Return false.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;方法很简单，递归地检查根节点以及左右子树的高度满足AVL树的要求即可。&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Solution&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gethight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gethight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gethight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isBalanced&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gethight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gethight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isBalanced&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isBalanced&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;三、AVL树的代码实现&lt;/h2&gt;&lt;p&gt;AVL树首先是一课二叉查找树，其次才是AVL树，所以，AVL的基础构造方法和二叉查找树相似，唯一特别的地方在于，为了保持树的AVL平衡，需要进行平衡处理。&lt;/p&gt;&lt;p&gt;AVL在构造的时候失衡以及平衡处理的方式包括以下四种：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-338d54c253997e0fe783e9c9db9db8ca_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;357&quot; data-rawheight=&quot;116&quot; class=&quot;content_image&quot; width=&quot;357&quot;&gt;&lt;figcaption&gt;LL失衡-右旋（Zig）&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-21724cf3cfe89ea321773110442b5c7e_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;354&quot; data-rawheight=&quot;126&quot; class=&quot;content_image&quot; width=&quot;354&quot;&gt;&lt;figcaption&gt;RR失衡-左旋（Zag）&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-87a56e51198a22d6d81390b301a462a6_b.jpg&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;531&quot; data-rawheight=&quot;126&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;531&quot; data-original=&quot;https://pic3.zhimg.com/v2-87a56e51198a22d6d81390b301a462a6_r.jpg&quot;&gt;&lt;figcaption&gt;LR失衡-先左旋后右旋（Zig-zag）&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;第四种情况与第三种情况类似，为RL失衡，处理方式是先右旋后左旋（Zag-zig）。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;一张动图看懂以上四个过程：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-21a9a2e0f2b5d9e5eb2fa2a36e77e0de_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;320&quot; data-rawheight=&quot;180&quot; data-thumbnail=&quot;https://pic3.zhimg.com/v2-21a9a2e0f2b5d9e5eb2fa2a36e77e0de_b.jpg&quot; class=&quot;content_image&quot; width=&quot;320&quot;&gt;&lt;/figure&gt;&lt;p&gt;接下来用一道题来完整实现可以保持AVL平衡的插入算法，完成这道题AVL树也就基本掌握了：&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.patest.cn/contests/pat-a-practise/1123&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic1.zhimg.com/v2-78ab9811ba6c73014530ea1a0b9d6848_180x120.jpg&quot; data-image-width=&quot;282&quot; data-image-height=&quot;141&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;1123. Is It a Complete AVL Tree (30)&lt;/a&gt;&lt;p&gt;An AVL tree is a self-balancing binary search tree. In an AVL tree, the heights of the two child subtrees of any node differ by at most one; if at any time they differ by more than one, rebalancing is done to restore this property. Figures 1-4 illustrate the rotation rules.&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-78ab9811ba6c73014530ea1a0b9d6848_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;282&quot; data-rawheight=&quot;141&quot; class=&quot;content_image&quot; width=&quot;282&quot;&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d753ae92a3b2f3d165444b84b330c0fb_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;331&quot; data-rawheight=&quot;183&quot; class=&quot;content_image&quot; width=&quot;331&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-bb5106d84730389c52c80c67415f2384_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;342&quot; data-rawheight=&quot;165&quot; class=&quot;content_image&quot; width=&quot;342&quot;&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-c9ec0f457adcf8b0e2c791e9489be3a9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;418&quot; data-rawheight=&quot;161&quot; class=&quot;content_image&quot; width=&quot;418&quot;&gt;&lt;/figure&gt;&lt;p&gt;Now given a sequence of insertions, you are supposed to output the level-order traversal sequence of the resulting AVL tree, and to tell if it is a complete binary tree.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Input Specification:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Each input file contains one test case. For each case, the first line contains a positive integer N (&amp;lt;= 20). Then N distinct integer keys are given in the next line. All the numbers in a line are separated by a space.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Output Specification:&lt;/b&gt;&lt;/p&gt;&lt;p&gt;For each test case, insert the keys one by one into an initially empty AVL tree. Then first print in a line the level-order traversal sequence of the resulting AVL tree. All the numbers in a line must be separated by a space, and there must be no extra space at the end of the line. Then in the next line, print &quot;YES&quot; if the tree is complete, or &quot;NO&quot; if not.&lt;/p&gt;&lt;p&gt;&lt;b&gt;Sample Input 1:&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;5
88 70 61 63 65

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;Sample Output 1:&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;70 63 88 61 65
YES

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;Sample Input 2:&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;8
88 70 61 96 120 90 65 68

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;b&gt;Sample Output 2:&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;88 65 96 61 70 90 120 68
NO&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;题意大概是需要你实现AVL的构造算法，并在一系列插入之后，检查AVL是否为一棵完全二叉树。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;AC代码以及详细注释&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt;&lt;span class=&quot;cpf&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;err&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//二叉树的节点定义
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;LeftRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//RR失衡-左旋算法（zig）
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RightRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//LL失衡-右旋算法（zag）
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;LeftRightRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//LR失衡-zag-zig算法
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LeftRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RightRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RightLeftRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//RL失衡-zig-zag
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RightRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LeftRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getHight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//获取root的节点高度
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getHight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getHight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;insert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//AVL二叉查找树平衡插入算法
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//为空则new一个节点出来
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//如果插入值大于节点值
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;insert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getHight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getHight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//发生失衡
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//RR失衡
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;                &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LeftRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//RL失衡
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;                &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RightLeftRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//如果插入值小于节点值
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;insert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getHight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getHight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//发生失衡
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//LL失衡
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;                &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RightRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//LR失衡
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;                &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LeftRightRotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt;&lt;span class=&quot;cpf&quot;&gt;&amp;lt;queue&amp;gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;iscomplete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//检查二叉树是否为完全二叉树
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//采用层序遍历
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isbottom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//是否遍历到底层
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()){&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;front&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isbottom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//已经遍历到底层却还有节点有子树，说明肯定不是完全二叉树
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isbottom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isbottom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//如果有子树却没有左子树，必然不是完全二叉树
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;levelorder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//层序遍历输出AVL树
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()){&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;front&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//处理输入，构造AVL平衡二叉树
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;insert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;levelorder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iscomplete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;YES&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;NO&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;更多参考资料：&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//www.cnblogs.com/penghuwan/archive/2018/01/01/8166133.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;【算法】论平衡二叉树（AVL）的正确种植方法 - 外婆的彭湖湾 - 博客园&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;PS：&lt;/p&gt;&lt;p&gt;广告时间啦~&lt;/p&gt;&lt;p&gt;理工狗不想被人文素养拖后腿？不妨关注微信公众号：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/c5c764858514dcb402114e619d98f6dc_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;258&quot; data-rawheight=&quot;258&quot; class=&quot;content_image&quot; width=&quot;258&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;</textarea>
<div class="zh-summary summary clearfix">
一、什么是平衡二叉树？二叉树是一个非常适合于查找的的数据结构，但这个数据结构存在一个最大的问题就在于：在最坏的情况下，二叉树有可能退化成一个链表。 为了解决这个问题，便诞生了AVL树、B-树、红黑树等平衡二叉树结构。本文着重介绍AVL树。 除了满足…

<a href="https://zhuanlan.zhihu.com/p/34840762" class="toggle-expand">显示全部</a>

</div>
<div class="Tipjar-entry hidden js-tipjar">
<div class="Tipjar-tagLine">「真诚赞赏，手留余香」</div>
<a href="http://zhuanlan.zhihu.com/p/34840762#tipjar" target="_blank" class="Tipjar-entryButton">赞赏</a>
</div>
</div>
</div>
</div>
<div class="zm-item-meta clearfix js-contentActions">
<div class="zm-meta-panel">


<a data-follow="c:link" class="zg-follow meta-item js-followButton" href="#" id="cl-73901"><i class="z-icon-follow"></i>关注专栏</a>

<a href="#" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>添加评论</a>
<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>
<span class="zg-bull zu-autohide">•</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>
<span class="zg-bull">•</span>
<a href=https://zhuanlan.zhihu.com/p/34840762 class="meta-item" target="_blank">去往文章页</a>
<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>
</div>
</div>



<div class="zm-item" data-type="Post">
<h2 class="zm-item-title"><a target='_blank' class="post-link" href="https://zhuanlan.zhihu.com/p/38157591" data-za-element-name="Title">使用Python+Matplotlib库制作经典排序算法可视化动画</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-feed zm-item-post" data-type="p">
<link itemprop="url" href="https://zhuanlan.zhihu.com/p/38157591">
<meta itemprop="post-id" content="7454594">
<meta itemprop="post-url-token" content="38157591">
<a class="zg-anchor-hidden" name="post-38157591"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="#" data-bind-votecount>541</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">541</span>
<span class="label sr-only">赞</span>
</button>
</div>


<div class="post-head">
<div class="author-info summary-wrapper">


<span class="author-link-line">
<a href="/people/zamhown" data-hovercard="p$t$zamhown"
class="author-link">Random Forest</a></span><span title="故事匠程序猿，科学迷设计狮（原id：HowardZ）" class="bio">
故事匠程序猿，科学迷设计狮（原id：Howa…
</span>

</div>
<div class="zm-item-vote-info" data-votecount="541">



<span class="voters text"><a href="#" class="more text"><span class="js-voteCount">541</span>&nbsp;人赞</a></span>


</div>
</div>
<div class="entry-body">
<div class="zm-item-rich-text js-collapse-body" data-resourceid="7454594">
<div class="post-content" data-author-name="Random Forest" data-entry-url="https://zhuanlan.zhihu.com/p/38157591">
<textarea hidden class="content">&lt;p&gt;近期在知乎上看到了几个排序算法可视化视频，顿时兴致盎然，也想自己实现一次。最后在Matplotlib库的帮助下达成了这个目的，做出了一条还算满意的视频，最后也开源了这个小玩具。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;下面就是这个视频成品，用Matplotlib库自动生成原始素材，并用Premiere进行了后期处理。视频中把九种排序算法放在一起作为对比，分别是：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;插入排序   希尔排序   选择排序
归并排序   快速排序   堆排序
冒泡排序   梳排序     猴子排序&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;先来一睹为快吧：&lt;/p&gt;&lt;a class=&quot;video-box&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/991814541629505536&quot; target=&quot;_blank&quot; data-video-id=&quot;&quot; data-video-playable=&quot;true&quot; data-name=&quot;&quot; data-poster=&quot;https://pic2.zhimg.com/80/v2-3f05806e2bd8b8cbade3df1722f852a9_b.jpg&quot; data-lens-id=&quot;991814541629505536&quot;&gt;&lt;img class=&quot;thumbnail&quot; src=&quot;https://pic2.zhimg.com/80/v2-3f05806e2bd8b8cbade3df1722f852a9_b.jpg&quot;&gt;&lt;span class=&quot;content&quot;&gt;&lt;span class=&quot;title&quot;&gt;&lt;span class=&quot;z-ico-extern-gray&quot;&gt;&lt;/span&gt;&lt;span class=&quot;z-ico-extern-blue&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;url&quot;&gt;&lt;span class=&quot;z-ico-video&quot;&gt;&lt;/span&gt;https://www.zhihu.com/video/991814541629505536&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;（加入猴子排序完全是想皮一下，毕竟一次成功的概率只有 &lt;img src=&quot;https://www.zhihu.com/equation?tex=%5Cfrac%7B1%7D%7B64%21%7D&quot; alt=&quot;\frac{1}{64!}&quot; eeimg=&quot;1&quot;&gt; ）&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;在构思方案的时候，我不可避免的走了一条由弯到直的路。当时的初始方案是，用python模拟各种排序算法，然后逐帧生成步骤图片，将图片序列导入AE转成视频。后来觉得python直接写图片太麻烦，有没有更方便的轮子？于是想到了Matplotlib库可以绘制&lt;b&gt;柱状图&lt;/b&gt;，刚好与我想要的图片形式重合。后来改成了用Python+Matplotlib逐帧生成图片，再将图片序列导入AE转成视频。最后，又觉得图片序列导入AE太麻烦，能不能直接输出视频？所幸Matplotlib既支持逐帧动画，又可以和FFMpeg结合，直接以mp4格式将动画输出。excited！&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;至于如何得到排序算法每个时刻的切片，我想过将帧编号和排序算法的进度联系起来，边播放边获取下一帧的数据。后来发现操作起来很有难度，完全可以先走一遍排序算法，得到所有帧的数据，再逐帧播放。这样虽然多耗了点内存，实现起来还是很简单的。下面以基本的选择排序为例介绍一下：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python3&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selection_sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deepcopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;选择排序的代码非常简单，我们要做的就是在算法比较有代表性的地方截取数据切片作为帧数据，然后同时处理帧数据，为某些重要的数值染色。最后的代码是这样的：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python3&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selection_sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# FRAME OPERATION BEGIN&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;frames&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# FRAME OPERATION END&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deepcopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;# FRAME OPERATION BEGIN&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ds_r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deepcopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;frames&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ds_r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ds_r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ds_r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'k'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;# FRAME OPERATION END&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# FRAME OPERATION BEGIN&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;frames&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frames&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# FRAME OPERATION END&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;可以看到新代码在原先的代码上加了三块处理帧数据的操作，并用注释标了出来。第一块：初始化帧列表，原始数据作为第一帧；第二块：在第二层循环内部截取帧，并把第i个数据涂为红色（r），第j个数据涂为黑色（k）；第三块：在帧列表中加入已排序的数据作为最后一帧，并返回帧列表。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;这样，我们就可以用最直观的方式看到选择排序的过程以及i和j的意义：第i个元素一直在取j扫过部分的最小值。&lt;/p&gt;&lt;a class=&quot;video-box&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/991489563390488576&quot; target=&quot;_blank&quot; data-video-id=&quot;&quot; data-video-playable=&quot;true&quot; data-name=&quot;&quot; data-poster=&quot;https://pic2.zhimg.com/80/v2-20d2b9ac292d33363cdb26b159d12e89_b.jpg&quot; data-lens-id=&quot;991489563390488576&quot;&gt;&lt;img class=&quot;thumbnail&quot; src=&quot;https://pic2.zhimg.com/80/v2-20d2b9ac292d33363cdb26b159d12e89_b.jpg&quot;&gt;&lt;span class=&quot;content&quot;&gt;&lt;span class=&quot;title&quot;&gt;&lt;span class=&quot;z-ico-extern-gray&quot;&gt;&lt;/span&gt;&lt;span class=&quot;z-ico-extern-blue&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;url&quot;&gt;&lt;span class=&quot;z-ico-video&quot;&gt;&lt;/span&gt;https://www.zhihu.com/video/991489563390488576&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;当然，这只是这些排序算法中较为简单的截取及染色方案。还有一些算法比较抽象，从排序过程中难以看出规律，比如堆排序。我给大根堆的每一层涂上了不同的颜色，并用红色表示正在下沉或上浮的结点，用黑色表示红色结点调整位置的过程中需要比较的孩子结点或父结点。这下排序过程总算直观了些：&lt;/p&gt;&lt;a class=&quot;video-box&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/991489923932835840&quot; target=&quot;_blank&quot; data-video-id=&quot;&quot; data-video-playable=&quot;true&quot; data-name=&quot;&quot; data-poster=&quot;https://pic3.zhimg.com/80/v2-0973f70bb8f1aacf8414e71d09f17716_b.jpg&quot; data-lens-id=&quot;991489923932835840&quot;&gt;&lt;img class=&quot;thumbnail&quot; src=&quot;https://pic3.zhimg.com/80/v2-0973f70bb8f1aacf8414e71d09f17716_b.jpg&quot;&gt;&lt;span class=&quot;content&quot;&gt;&lt;span class=&quot;title&quot;&gt;&lt;span class=&quot;z-ico-extern-gray&quot;&gt;&lt;/span&gt;&lt;span class=&quot;z-ico-extern-blue&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;url&quot;&gt;&lt;span class=&quot;z-ico-video&quot;&gt;&lt;/span&gt;https://www.zhihu.com/video/991489923932835840&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;至于Matplotlib的绘图和动画部分，可以查阅&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//matplotlib.org/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;官网&lt;/a&gt;文档，这里就不再赘述了。但是把动画导出成mp4文件需要FFMpeg库的帮助，具体做法这篇文章讲得很好：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//blog.csdn.net/sailist/article/details/79502007&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;matplotlib animation动画保存(save函数)详解&lt;/a&gt;。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;我已经把这些代码全部开源，并优化了一下用户接口，有窗口播放动画（9个算法并列播放或单个算法播放）、生成mp4和html的功能，可以参考README文档使用。GitHub仓库地址：&lt;/p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/zamhown/sorting-visualizer&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-45fb7d23a32cc6612a53924fac1bfe22_ipico.jpg&quot; data-image-width=&quot;333&quot; data-image-height=&quot;333&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;zamhown/sorting-visualizer&lt;/a&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;说来惭愧，这是我写README最认真的一次……欢迎star、fork或者提issue。如果想改进或者添加新的排序算法欢迎提交pr。祝端午玩得愉快~&lt;/p&gt;</textarea>
<div class="zh-summary summary clearfix">
近期在知乎上看到了几个排序算法可视化视频，顿时兴致盎然，也想自己实现一次。最后在Matplotlib库的帮助下达成了这个目的，做出了一条还算满意的视频，最后也开源了这个小玩具。 下面就是这个视频成品，用Matplotlib库自动生成原始素材，并用Premiere进行…

<a href="https://zhuanlan.zhihu.com/p/38157591" class="toggle-expand">显示全部</a>

</div>
<div class="Tipjar-entry hidden js-tipjar">
<div class="Tipjar-tagLine">「若感受到我的真诚，请表示一下」</div>
<a href="http://zhuanlan.zhihu.com/p/38157591#tipjar" target="_blank" class="Tipjar-entryButton">赞赏</a>
</div>
</div>
</div>
</div>
<div class="zm-item-meta clearfix js-contentActions">
<div class="zm-meta-panel">




<a href="#" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>33 条评论</a>
<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>
<span class="zg-bull zu-autohide">•</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>
<span class="zg-bull">•</span>
<a href=https://zhuanlan.zhihu.com/p/38157591 class="meta-item" target="_blank">去往文章页</a>
<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>
</div>
</div>



<div class="zm-item" data-type="Post">
<h2 class="zm-item-title"><a target='_blank' class="post-link" href="https://zhuanlan.zhihu.com/p/52884590" data-za-element-name="Title">视频 | 手撕九大经典排序算法，看我就够了！</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-feed zm-item-post" data-type="p">
<link itemprop="url" href="https://zhuanlan.zhihu.com/p/52884590">
<meta itemprop="post-id" content="10812524">
<meta itemprop="post-url-token" content="52884590">
<a class="zg-anchor-hidden" name="post-52884590"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="#" data-bind-votecount>5268</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">5268</span>
<span class="label sr-only">赞</span>
</button>
</div>


<div class="post-head">
<div class="author-info summary-wrapper">


<span class="author-link-line">
<a href="/org/ling-kou-leetcode" data-hovercard="p$t$ling-kou-leetcode"
class="author-link">力扣（LeetCode）</a><span class="OrgIcon sprite-global-icon-org-14" data-tooltip="s$b$已认证的官方帐号"></span></span><span class="badge-summary">已认证的官方帐号</span>


<span title="全球极客挚爱的技术成长平台" class="bio">
全球极客挚爱的技术成长平台
</span>

</div>
<div class="zm-item-vote-info" data-votecount="5268">



<span class="voters text"><a href="#" class="more text"><span class="js-voteCount">5268</span>&nbsp;人赞</a></span>


</div>
</div>
<div class="entry-body">
<div class="zm-item-rich-text js-collapse-body" data-resourceid="10812524">
<div class="post-content" data-author-name="力扣（LeetCode）" data-entry-url="https://zhuanlan.zhihu.com/p/52884590">
<textarea hidden class="content">&lt;p&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-43724d5acfdc87bf1871fbb69e3664bc_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;740&quot; data-rawheight=&quot;559&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;740&quot; data-original=&quot;https://pic1.zhimg.com/v2-43724d5acfdc87bf1871fbb69e3664bc_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;排序，一个历史话题，目前已经有很多非常成熟的排序算法，虽然可能在 ACM 比赛中并不会让你具体实现一个排序算法，但是在面试当中，或者在和别人吹牛的过程中，口述，或者手撕一个排序算法。本文列举了一些常用的算法。&lt;/p&gt;&lt;p&gt;首先，给大家分享一个视频，视频中演示了各个算法的实际元素操作思路，既是欣赏，也是学习。&lt;/p&gt;&lt;a class=&quot;video-box&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/1059155285880406016&quot; target=&quot;_blank&quot; data-video-id=&quot;&quot; data-video-playable=&quot;true&quot; data-name=&quot;&quot; data-poster=&quot;https://pic4.zhimg.com/v2-02b0b83c23a9e18795e0bedc699f4867.jpg&quot; data-lens-id=&quot;1059155285880406016&quot;&gt;&lt;img class=&quot;thumbnail&quot; src=&quot;https://pic4.zhimg.com/v2-02b0b83c23a9e18795e0bedc699f4867.jpg&quot;&gt;&lt;span class=&quot;content&quot;&gt;&lt;span class=&quot;title&quot;&gt;&lt;span class=&quot;z-ico-extern-gray&quot;&gt;&lt;/span&gt;&lt;span class=&quot;z-ico-extern-blue&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;url&quot;&gt;&lt;span class=&quot;z-ico-video&quot;&gt;&lt;/span&gt;https://www.zhihu.com/video/1059155285880406016&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;h2&gt;&lt;b&gt;01  插入排序&lt;/b&gt;&lt;/h2&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-6e67d1c722106442b422ee53e98575b3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;300&quot; data-rawheight=&quot;180&quot; data-thumbnail=&quot;https://pic4.zhimg.com/v2-6e67d1c722106442b422ee53e98575b3_b.jpg&quot; class=&quot;content_image&quot; width=&quot;300&quot;&gt;&lt;/figure&gt;&lt;p&gt;这个应该是 CLRS （算法导论）中介绍的第一个算法，其思想如下：&lt;/p&gt;&lt;p&gt;每次选择一个元素，并且将这个元素和整个数组中的所有元素进行比较，然后插入到合适的位置，图片演示如上，时间复杂度 O(n^2)，C++ 代码如下： &lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;insertion_sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;02  希尔排序（Shell Sort）&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;这个是插入排序的修改版，根据步长由长到短分组，进行排序，直到步长为1为止，属于插入排序的一种。&lt;/p&gt;&lt;p&gt;代码实现如下：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;shellSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
            &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
            &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;             
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
                &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
            &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;03  基数排序（Radix Sort）&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;基数排序是一种非比较型整数排序算法，其原理是将整数按位数切割成不同的数字，然后按每个位数分别比较。排序过程是将所有待比较数值统一为同样的数位长度，数位较短的数前面补零，然后从最低位开始，依次进行一次排序。这样从最低位排序一直到最高位排序完成以后, 数列就变成一个有序序列。&lt;/p&gt;&lt;p&gt;排序代码实现如下：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getMax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
            &lt;span class=&quot;n&quot;&gt;mx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;countSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; 
  
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
  
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
  
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;radixsort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getMax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;countSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;04  冒泡排序&lt;/b&gt;&lt;/h2&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-d4c88b8cc620af6af67c33910899fcf7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;300&quot; data-rawheight=&quot;180&quot; data-thumbnail=&quot;https://pic4.zhimg.com/v2-d4c88b8cc620af6af67c33910899fcf7_b.jpg&quot; class=&quot;content_image&quot; width=&quot;300&quot;&gt;&lt;/figure&gt;&lt;p&gt;大学中学习 C++ 的第二个排序算法，其思想如下：&lt;/p&gt;&lt;p&gt;每次选择两个元素，按照需求进行交换（比如需要升序排列的话，把较大的元素放在靠后一些的位置），循环 n 次（n 为总元素个数），这样小的元素会不断 “冒泡” 到前面来，时间复杂度O(n^2)，C++ 代码如下：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;bubbleSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swapp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;swapp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;swapp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;swapp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;以上是两个比较容易/简单的排序方式了，一般来说是最容易想到的，当然也是速度最慢的两个（因为时间复杂度很高），如果平时自己用用肯定没有问题，但是如果需要吹牛的话，可能这样就不很妥当了，下面介绍一些更加有意思的排序算法。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;05  归并排序（Merge Sort）&lt;/b&gt;&lt;/h2&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-a29c0dd0186d1f8cef3c5ebdedf3e5a3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;300&quot; data-rawheight=&quot;180&quot; data-thumbnail=&quot;https://pic4.zhimg.com/v2-a29c0dd0186d1f8cef3c5ebdedf3e5a3_b.jpg&quot; class=&quot;content_image&quot; width=&quot;300&quot;&gt;&lt;/figure&gt;&lt;p&gt;归并排序相比较之前的排序算法而言加入了分治法的思想，其算法思路如下：&lt;/p&gt;&lt;p&gt;1.如果给的数组只有一个元素的话，直接返回（也就是递归到最底层的一个情况）&lt;/p&gt;&lt;p&gt;2.把整个数组分为尽可能相等的两个部分（分）&lt;/p&gt;&lt;p&gt;3.对于两个被分开的两个部分进行整个归并排序（治）&lt;/p&gt;&lt;p&gt;4.把两个被分开且排好序的数组拼接在一起&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-6639ef7ed441b0e2b7a71ee202e3ad05_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;618&quot; data-rawheight=&quot;595&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;618&quot; data-original=&quot;https://pic2.zhimg.com/v2-6639ef7ed441b0e2b7a71ee202e3ad05_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;代码演示如下：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 

    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 

    &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
            &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
            &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
            &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
            &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;mergeSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
  
        &lt;span class=&quot;n&quot;&gt;mergeSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;mergeSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
  
        &lt;span class=&quot;n&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;06  堆排序（Heap Sort）&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;堆排序是一种基于二叉堆（Binary Heap）结构的排序算法，所谓二叉堆，我们通过完全二叉树来对比，只不过相比较完全二叉树而言，二叉堆的所有父节点的值都大于（或者小于）它的孩子节点，像这样：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-5d6119c9801eadb83402ef68f6d4b689_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;334&quot; data-rawheight=&quot;392&quot; class=&quot;content_image&quot; width=&quot;334&quot;&gt;&lt;/figure&gt;&lt;p&gt;首先需要引入最大堆的定义：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;最大堆中的最大元素值出现在根结点（堆顶）&lt;/li&gt;&lt;li&gt;堆中每个父节点的元素值都大于等于其孩子结点&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;建立堆函数：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;heapify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;largest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 将最大元素设置为堆顶元素
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// left = 2*i + 1 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// right = 2*i + 2 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;  
    &lt;span class=&quot;c1&quot;&gt;// 如果 left 比 root 大的话
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;largest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;largest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
  
    &lt;span class=&quot;c1&quot;&gt;// I如果 right 比 root 大的话
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;largest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;largest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
  
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;largest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;largest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; 
  
        &lt;span class=&quot;c1&quot;&gt;// 递归地定义子堆
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;heapify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;largest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;堆排序的方法如下，把最大堆堆顶的最大数取出，将剩余的堆继续调整为最大堆，再次将堆顶的最大数取出，这个过程持续到剩余数只有一个时结束。&lt;/p&gt;&lt;p&gt;堆排序函数：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;heapSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;// 建立堆
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;heapify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
  
    &lt;span class=&quot;c1&quot;&gt;// 一个个从堆顶取出元素
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;  
        &lt;span class=&quot;n&quot;&gt;heapify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;07  桶排序（Bucket Sort）&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;桶排序的原理是将数组分到有限数量的桶中，再对每个桶子再分别排序（有可能再使用别的排序算法或是以递归方式继续使用桶排序进行排序），最后将各个桶中的数据有序的合并起来。&lt;/p&gt;&lt;p&gt;排序过程：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;假设待排序的一组数统一的分布在一个范围中，并将这一范围划分成几个子范围，也就是桶&lt;/li&gt;&lt;li&gt;将待排序的一组数，分档规入这些子桶，并将桶中的数据进行排序&lt;/li&gt;&lt;li&gt;将各个桶中的数据有序的合并起来&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;代码实现：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;bucketSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;// 1) Create n empty buckets 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
     
    &lt;span class=&quot;c1&quot;&gt;// 2) Put array elements in different buckets 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
       &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Index in bucket 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;       &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push_back&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  
    &lt;span class=&quot;c1&quot;&gt;// 3) Sort individual buckets 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
       &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; 
  
    &lt;span class=&quot;c1&quot;&gt;// 4) Concatenate all buckets into arr[] 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
          &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;08  快速排序（Quick Sort）&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;简称快排，时间复杂度并不固定，如果在最坏情况下（元素刚好是反向的）速度比较慢，达到 O(n^2)（和选择排序一个效率），但是如果在比较理想的情况下时间复杂度 O(nlogn)。&lt;/p&gt;&lt;p&gt;快排也是一个分治的算法，快排算法每次选择一个元素并且将整个数组以那个元素分为两部分，根据实现算法的不同，元素的选择一般有如下几种：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;永远选择第一个元素&lt;/li&gt;&lt;li&gt;永远选择最后一个元素&lt;/li&gt;&lt;li&gt;随机选择元素&lt;/li&gt;&lt;li&gt;取中间值&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;整个快速排序的核心是分区（partition），分区的目的是传入一个数组和选定的一个元素，把所有小于那个元素的其他元素放在左边，大于的放在右边。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-2be156e0fc5be25068224b97d0d03046_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;703&quot; data-rawheight=&quot;312&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;703&quot; data-original=&quot;https://pic3.zhimg.com/v2-2be156e0fc5be25068224b97d0d03046_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;算法导论中给出的分区算法伪代码如下：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;n&quot;&gt;partition&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// pivot (Element to be placed at right position)
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;  
 
    &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;low&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Index of smaller element
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// If current element is smaller than or
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// equal to pivot
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// increment index of smaller element
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;其思路是每次从最左元素中选择一个元素并且将小于等于那个元素的元素的下标标记为 i ，在整个遍历过程中，如果我们找到一个更加小的元素，我们就把这&lt;/p&gt;&lt;p&gt;个元素和数组中第 i 个元素交换，一个例子如下（摘自 GeeksForGeeks）：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//Indexes:  0   1   2   3   4   5   6 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;low&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;high&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//Initialize index of smaller element, i = -1
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Traverse&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;elements&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;low&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Since&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// No change as i and j 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;                                     &lt;span class=&quot;c1&quot;&gt;// are same
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Since&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nothing&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// No change in i and arr[]
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Since&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// We swap 80 and 30 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Since&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nothing&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// No change in i and arr[]
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Since&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 80 and 40 Swapped
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Since&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 90 and 50 Swapped 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;We&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;come&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;because&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;equal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Finally&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;we&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;correct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;position&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swapping&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pivot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 80 and 70 Swapped 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Now&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;its&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;correct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;place&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;All&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;elements&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;smaller&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;than&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;are&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;before&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;elements&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;greater&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;than&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;70&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;are&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;after&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;09 Bogo 排序&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;这里补充一个非常不实用且原始的排序方法供娱乐，维基百科介绍如下：&lt;/p&gt;&lt;blockquote&gt;在计算机科学中，Bogo 排序（bogo-sort）是个既不实用又原始的排序演算法，其原理等同将一堆卡片抛起，落在桌上后检查卡片是否已整齐排列好，若非就再抛一次。其名字源自 Quantum bogodynamics，又称 bozo soart 、blort sort 或猴子排序（参见无限猴子定理）。&lt;/blockquote&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;C 代码实现：&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;cpf&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;cpf&quot;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;cpf&quot;&gt;&amp;lt;time.h&amp;gt; &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;        
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;         
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;        
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size_elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_elem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;             
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size_elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size_elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;                 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;srand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
     
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSort&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isSort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;isSort&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;isSort&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;后记&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;优秀的算法很多，虽然实际工程/比赛当中可能并不会被要求重复实现某一个具体算法，但是在学习的过程当中，我们依然有必要学习各个排序算法的实现思路，尝试通过对这些算法设计思路的分析来提升自己对于程序设计的思路。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;作者：Nova&lt;/p&gt;&lt;p&gt;声明：本文为“力扣”版权所有，如需转载请联系。&lt;/p&gt;&lt;p&gt;文中视频来源见右上角水印。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</textarea>
<div class="zh-summary summary clearfix">
排序，一个历史话题，目前已经有很多非常成熟的排序算法，虽然可能在 ACM 比赛中并不会让你具体实现一个排序算法，但是在面试当中，或者在和别人吹牛的过程中，口述，或者手撕一个排序算法。本文列举了一些常用的算法。首先，给大家分享一个视频，视频中演…

<a href="https://zhuanlan.zhihu.com/p/52884590" class="toggle-expand">显示全部</a>

</div>

</div>
</div>
</div>
<div class="zm-item-meta clearfix js-contentActions">
<div class="zm-meta-panel">




<a href="#" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>126 条评论</a>
<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>
<span class="zg-bull zu-autohide">•</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>
<span class="zg-bull">•</span>
<a href=https://zhuanlan.zhihu.com/p/52884590 class="meta-item" target="_blank">去往文章页</a>
<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>
</div>
</div>




<div class="zm-item" data-type="Answer">
<h2 class="zm-item-title"><a target="_blank" href="/question/19690210">如何用最少的次数测出鸡蛋会在哪一层摔碎？</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-answer "
itemscope itemtype="http://schema.org/Answer"
data-aid="123546802"
data-atoken="514119129"
data-collapsed="0"
data-created="1539946667"
data-deleted="0"
data-isowner="0"
data-helpful="True"
data-copyable="0"
data-zop
>
<link itemprop="url" href="/question/19690210/answer/514119129">
<meta itemprop="answer-id" content="123546802">
<meta itemprop="answer-url-token" content="514119129">
<a class="zg-anchor-hidden" name="answer-123546802"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="javascript:;" data-bind-votecount>1484</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">1484</span>
<span class="label sr-only">赞同</span>
</button>
<button class="down ">
<i class="icon vote-arrow"></i>
<span class="label sr-only">反对</span>
</button>
</div>


<div class="answer-head">

<div class="zm-item-answer-author-info">

<span class="summary-wrapper">
<span class="author-link-line">

<a class="author-link"
data-hovercard="p$t$CharelsLiu"
target="_blank" href="/people/CharelsLiu"
>刘遥行</a></span><span title="【遥行出品·力求精品】能讲清区块链的PRML求学者" class="bio">
【遥行出品·力求精品】能讲清区块链的PR…
</span>
</span>
</div>

<div class="zm-item-vote-info" data-votecount="1484" data-async-voters="1">



<span class="voters text"><a href="#" class="more text"><span class="js-voteCount">1484</span>&nbsp;人赞同</a></span>


</div>
</div>
<div class="zm-item-rich-text expandable js-collapse-body" data-resourceid="56062" data-action="/answer/content" data-author-name="刘遥行" data-entry-url="/question/19690210/answer/514119129">

<textarea hidden class="content">&lt;p&gt;分享者是最大的受益者，感谢您的阅读，如果希望观看排版更完美的版本，欢迎移步&lt;a href=&quot;//link.zhihu.com/?target=https%3A//charlesliuyx.github.io/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;我的个人博客&lt;/a&gt;：&lt;a href=&quot;//link.zhihu.com/?target=https%3A//charlesliuyx.github.io/2018/10/11/%25E3%2580%2590%25E7%259B%25B4%25E8%25A7%2582%25E7%25AE%2597%25E6%25B3%2595%25E3%2580%2591Egg%2520Puzzle%2520%25E9%25B8%25A1%25E8%259B%258B%25E9%259A%25BE%25E9%25A2%2598/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;【直观算法】Egg Puzzle 鸡蛋难题&lt;/a&gt;，&lt;a href=&quot;https://zhuanlan.zhihu.com/p/47184570&quot; class=&quot;internal&quot;&gt;系列文章&lt;/a&gt;最近可能会有进一步更新，欢迎关注&lt;/p&gt;&lt;a href=&quot;//link.zhihu.com/?target=https%3A//mubu.com/doc/3nIWmLzEPl&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic3.zhimg.com/v2-b04c2c25cb2465a1329ea2107cbd519a_ipico.jpg&quot; data-image-width=&quot;200&quot; data-image-height=&quot;200&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Chalresliuyx 博客目录&lt;/a&gt;&lt;blockquote&gt;【先给答案】200层楼的最后答案：&lt;b&gt;最坏情况下的尝试次数是20次&lt;/b&gt;&lt;br&gt;【策略】第一个鸡蛋在 20 39 57 74 90 105 119 132 144 155 165 174 182 189 195 200层尝试（楼层差等差数列递减），只要碎了就用第二个鸡蛋从碎了的前一个尝试楼层一层一层往上尝试（例如90层碎了，那么从75层开始一层一层尝试）直到找到&lt;b&gt;临界层&lt;/b&gt;&lt;br&gt;求出这个策略的方法下面容我慢慢道来&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;1 原题题目描述&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;假设有栋楼共&lt;code&gt;100层&lt;/code&gt;，&lt;/p&gt;&lt;p&gt;一个鸡蛋从第 &lt;img src=&quot;//www.zhihu.com/equation?tex=x+&quot; alt=&quot;x &quot; eeimg=&quot;1&quot;&gt; 层及以上楼层落下来会&lt;b&gt;摔碎&lt;/b&gt;， 在第 &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt; 层以下的楼层落下不会&lt;b&gt;摔碎&lt;/b&gt;。给你2个鸡蛋，设计方案找出 &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt; ，并且保证在最坏情况下， &lt;b&gt;最小化鸡蛋下落的次数&lt;/b&gt;&lt;/p&gt;&lt;p&gt;有些时候仍的东西会变，比如&lt;b&gt;瓶子&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这道题的解答过程涉及各种&lt;b&gt;逻辑思维，工程思维&lt;/b&gt;，海纳百川。也难怪Google一直用这道题作为试金石，屡试不爽&lt;/p&gt;&lt;h2&gt;&lt;b&gt;1.1 求什么？&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;利用&lt;code&gt;抽象思维&lt;/code&gt;，&lt;b&gt;符号化&lt;/b&gt;题目描述&lt;/p&gt;&lt;p&gt;⭐️〔题目要求〕找到 &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt; 层落下不会碎， &lt;img src=&quot;//www.zhihu.com/equation?tex=x%2B1&quot; alt=&quot;x+1&quot; eeimg=&quot;1&quot;&gt;  层落下会碎的&lt;b&gt;临界层&lt;/b&gt;所需要的最少尝试次数  &lt;img src=&quot;//www.zhihu.com/equation?tex=r&quot; alt=&quot;r&quot; eeimg=&quot;1&quot;&gt;  (r for result)&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2 解题思路&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;使用&lt;code&gt;等价思维&lt;/code&gt;，如何计算出最小的尝试次数？换言之，&lt;b&gt;如何计算出这个结果&lt;/b&gt;，找出公式  &lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D+f%28%29&quot; alt=&quot;r = f()&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;2.1 一个鸡蛋&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;假设最后结果设为  &lt;img src=&quot;//www.zhihu.com/equation?tex=r&quot; alt=&quot;r&quot; eeimg=&quot;1&quot;&gt;  次（r for result）。使用&lt;code&gt;归纳思维&lt;/code&gt;，先看只有1个鸡蛋的情况，思考什么是最坏情况。你可能先想到，直接使用二分法。请注意，你只有1个鸡蛋，必须找到&lt;b&gt;临界层&lt;/b&gt;。所以，1个鸡蛋的情况下，&lt;b&gt;最坏情况&lt;/b&gt;为 &lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D+100&quot; alt=&quot;r = 100&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;blockquote&gt; 大多数情况下，我们都低估了&lt;b&gt;理解题意&lt;/b&gt;的重要性&lt;/blockquote&gt;&lt;p&gt;但这么思考&lt;b&gt;还不够究竟&lt;/b&gt;，缺乏&lt;code&gt;抽象思维&lt;/code&gt;。通过逻辑思考，可以得出 &lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D100&quot; alt=&quot;r =100&quot; eeimg=&quot;1&quot;&gt; 的答案，但没有一个抽象的公式化结论？或者说，❓ 如何使用一个公式算出  &lt;img src=&quot;//www.zhihu.com/equation?tex=r&quot; alt=&quot;r&quot; eeimg=&quot;1&quot;&gt;  ？接下来就来解决这个问题&lt;/p&gt;&lt;p&gt;假设&lt;b&gt;临界层&lt;/b&gt;分别为 &lt;img src=&quot;//www.zhihu.com/equation?tex=x+%3D+1%2C2%2C3+%5Cdots+100&quot; alt=&quot;x = 1,2,3 \dots 100&quot; eeimg=&quot;1&quot;&gt; ，因为你只有1个鸡蛋，所以唯一&lt;b&gt;可选策略&lt;/b&gt;就是从1层开始&lt;b&gt;一层一层&lt;/b&gt;尝试，对应的每个策略选择最坏情况的&lt;b&gt;尝试步数&lt;/b&gt;（比如  &lt;img src=&quot;//www.zhihu.com/equation?tex=x+%3D+95&quot; alt=&quot;x = 95&quot; eeimg=&quot;1&quot;&gt;  ，从1层开始尝试为95次）那么可以得到对应的 &lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D+1%2C2%2C3+%5Cdots+99%2C100&quot; alt=&quot;r = 1,2,3 \dots 99,100&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;所以可抽象化得到我们&lt;b&gt;待求的符号表达式&lt;/b&gt; &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D+%5Cmax_%7B1+%5Cleqslant+x+%5Cleqslant+N%7D%28%5Cforall+S_i%28x%29%29+%5Ctag%7B1%7D&quot; alt=&quot;r = \max_{1 \leqslant x \leqslant N}(\forall S_i(x)) \tag{1}&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;公式的语言型描述是：对于每一个可能的&lt;b&gt;临界层&lt;/b&gt; &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt; ，可以得到使用可选择策略 &lt;img src=&quot;//www.zhihu.com/equation?tex=S_i%28%29&quot; alt=&quot;S_i()&quot; eeimg=&quot;1&quot;&gt; 需要的&lt;b&gt;尝试步数&lt;/b&gt;。在每一个可能，选出其中的最大值（即最坏情况），为最终答案。无论&lt;b&gt;临界层&lt;/b&gt; &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt; 在哪一层，&lt;b&gt;只有一个鸡蛋的情况下&lt;/b&gt;，总是需要考虑&lt;b&gt;最坏情况&lt;/b&gt;&lt;/p&gt;&lt;blockquote&gt;这道题目，对1个鸡蛋问题的深刻理解异常重要。只有深刻理解基石逻辑才能更好的解决问题&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;2.2 两个鸡蛋&lt;/b&gt;&lt;/h2&gt;&lt;h2&gt;&lt;b&gt;2.2.1 粗调和细调&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;依据&lt;code&gt;粗条细调思维&lt;/code&gt;，我们有一次试错的机会。那么可以思考，假设第一个鸡蛋在 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 层&lt;code&gt;碎了&lt;/code&gt;，意味着什么？意味着，待求的&lt;b&gt;临界层&lt;/b&gt; &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt;  一定满足  &lt;img src=&quot;//www.zhihu.com/equation?tex=1+%5Cleqslant+x+%5Clt+k&quot; alt=&quot;1 \leqslant x \lt k&quot; eeimg=&quot;1&quot;&gt;  ，或者记为  &lt;img src=&quot;//www.zhihu.com/equation?tex=%5B1%2Ck%29&quot; alt=&quot;[1,k)&quot; eeimg=&quot;1&quot;&gt;  ，就把待求量限制到了一个更小的范围内，可以提高找到目标值的效率&lt;/p&gt;&lt;p&gt;我们已经知道要用第一个鸡蛋做&lt;b&gt;粗调&lt;/b&gt;，&lt;code&gt;碎了&lt;/code&gt;之后，使用第二个鸡蛋，参照1个鸡蛋的原则进行&lt;b&gt;细调&lt;/b&gt;。下一步，问题就变成了一个策略问题，即&lt;b&gt;❓第一个鸡蛋应该在哪些层数仍&lt;/b&gt;的问题&lt;/p&gt;&lt;p&gt;在一层楼，丢了一个鸡蛋，除了&lt;code&gt;碎了&lt;/code&gt;这个结果，还有另一种可能性，即&lt;code&gt;没碎&lt;/code&gt;。这句话是一个&lt;b&gt;极为关键的信号&lt;/b&gt;，背后在告诉我们这是一个&lt;b&gt;树形结构&lt;/b&gt;问题，下面就把这条树形结构链分析出来但这么思考&lt;b&gt;还不够究竟&lt;/b&gt;，缺乏&lt;code&gt;抽象思维&lt;/code&gt;。通过逻辑思考，可以得出&lt;/p&gt;&lt;blockquote&gt;&lt;b&gt;将数据结构与问题描述的勾连能力&lt;/b&gt;是衡量算法能力的重要指标&lt;/blockquote&gt;&lt;ul&gt;&lt;li&gt;没有分叉，一路推理，为&lt;b&gt;〔线性结构〕&lt;/b&gt;&lt;/li&gt;&lt;li&gt;看到决策结果有分叉，用&lt;b&gt;〔树形结构〕&lt;/b&gt;&lt;/li&gt;&lt;li&gt;若在推理过程中，产生了交汇，则用&lt;b&gt;〔图结构〕&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;b&gt;2.2.2 树形结构&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;假设第一个鸡蛋的楼层策略是  &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1%2C+k_2%2C%5Ccdots%2Ck_p&quot; alt=&quot;k_1, k_2,\cdots,k_p&quot; eeimg=&quot;1&quot;&gt;  ，其中 &lt;img src=&quot;//www.zhihu.com/equation?tex=p&quot; alt=&quot;p&quot; eeimg=&quot;1&quot;&gt; 是&lt;code&gt;仍的总次数&lt;/code&gt;，楼高记为 &lt;img src=&quot;//www.zhihu.com/equation?tex=N&quot; alt=&quot;N&quot; eeimg=&quot;1&quot;&gt; 。比如如果你选择在  &lt;img src=&quot;//www.zhihu.com/equation?tex=20%2C40%2C60%2C80&quot; alt=&quot;20,40,60,80&quot; eeimg=&quot;1&quot;&gt;  层仍，那么 &lt;img src=&quot;//www.zhihu.com/equation?tex=p%3D4&quot; alt=&quot;p=4&quot; eeimg=&quot;1&quot;&gt; ，根据题意，有 &lt;img src=&quot;//www.zhihu.com/equation?tex=1+%5Clt+k_1+%5Clt+k_2+%5Clt+%5Ccdots+%5Clt+k_%7Bp-1%7D+%5Clt+k_p+%5Clt+100&quot; alt=&quot;1 \lt k_1 \lt k_2 \lt \cdots \lt k_{p-1} \lt k_p \lt 100&quot; eeimg=&quot;1&quot;&gt; 。画出树形示意图，如下图所示&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/v2-5cc93b9b1955124fac09af70c2477807_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2474&quot; data-rawheight=&quot;2156&quot; data-default-watermark-src=&quot;https://pic4.zhimg.com/50/v2-bad6c6b412b603504e18074eeccabbd0_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2474&quot; data-original=&quot;https://pic3.zhimg.com/50/v2-5cc93b9b1955124fac09af70c2477807_r.jpg&quot;&gt;&lt;/figure&gt;&lt;blockquote&gt;图最上方的数轴就是一个&lt;b&gt;横放的楼&lt;/b&gt;， &lt;img src=&quot;//www.zhihu.com/equation?tex=k_0+%3D+1&quot; alt=&quot;k_0 = 1&quot; eeimg=&quot;1&quot;&gt;  是第一层&lt;br&gt;解释一下这棵树。在每一层扔下一个鸡蛋时，都有两种可能，&lt;code&gt;碎了&lt;/code&gt;和&lt;code&gt;没碎&lt;/code&gt;，分别对应了两个分支。一旦&lt;code&gt;碎了&lt;/code&gt;，那么就使用&lt;code&gt;1&lt;/code&gt;个鸡蛋的问题思路来解题，直到找到&lt;b&gt;临界层&lt;/b&gt;。在 &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1&quot; alt=&quot;k_1&quot; eeimg=&quot;1&quot;&gt; 层没碎，那么需要在  &lt;img src=&quot;//www.zhihu.com/equation?tex=k_2&quot; alt=&quot;k_2&quot; eeimg=&quot;1&quot;&gt;  层继续尝试，直到最高层  &lt;img src=&quot;//www.zhihu.com/equation?tex=N&quot; alt=&quot;N&quot; eeimg=&quot;1&quot;&gt;  找到&lt;b&gt;临界层&lt;/b&gt;（上图的标注不是树高，&lt;b&gt;灰色图例标志出部分&lt;/b&gt;的&lt;b&gt;子树高&lt;/b&gt;）&lt;/blockquote&gt;&lt;p&gt;观察这个树状图，怎样从树中获得我们希望得到的答案呢？&lt;/p&gt;&lt;p&gt;〔输入自变量〕 &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1%2C+k_2%2C%5Ccdots%2Ck_p&quot; alt=&quot;k_1, k_2,\cdots,k_p&quot; eeimg=&quot;1&quot;&gt; 〔待求〕最小的尝试次数（即所有策略中&lt;b&gt;最大值的最小值&lt;/b&gt;）➜ 等价于，求一个策略组合 &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1%2C+k_2%2C%5Ccdots%2Ck_p&quot; alt=&quot;k_1, k_2,\cdots,k_p&quot; eeimg=&quot;1&quot;&gt; ，使得&lt;b&gt;树的高度最小&lt;/b&gt;&lt;/p&gt;&lt;p&gt;  如果还是有些无法理解，此时，最好的方法就是&lt;b&gt;看特例（举例子）&lt;/b&gt;&lt;/p&gt;&lt;p&gt; 比如  &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1+%3D+50&quot; alt=&quot;k_1 = 50&quot; eeimg=&quot;1&quot;&gt; ，意思是在&lt;code&gt;50层&lt;/code&gt;扔下第一个鸡蛋&lt;/p&gt;&lt;ul&gt;&lt;li&gt;如果&lt;code&gt;碎了&lt;/code&gt;，那么接下来的尝试方法就是从第&lt;code&gt;1&lt;/code&gt;层开始一个一个往上尝试，直到&lt;code&gt;49&lt;/code&gt;层，所以我们的答案 &lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D+50&quot; alt=&quot;r = 50&quot; eeimg=&quot;1&quot;&gt;（不记得如何计算这个值可以参考&lt;a href=&quot;https://zhuanlan.zhihu.com/p/47184570/edit#%E4%B8%80%E4%B8%AA%E9%B8%A1%E8%9B%8B&quot; class=&quot;internal&quot;&gt;一个鸡蛋&lt;/a&gt;） &lt;/li&gt;&lt;li&gt;如果&lt;code&gt;没碎&lt;/code&gt;，那么第一个鸡蛋继续在  &lt;img src=&quot;//www.zhihu.com/equation?tex=k_2+%3D+75&quot; alt=&quot;k_2 = 75&quot; eeimg=&quot;1&quot;&gt;  层的地方扔下，假设还是&lt;code&gt;没碎&lt;/code&gt;，继续从 &lt;img src=&quot;//www.zhihu.com/equation?tex=k_3+%3D+90&quot; alt=&quot;k_3 = 90&quot; eeimg=&quot;1&quot;&gt; 层的地方扔下，此时碎了，那么第二课鸡蛋就需要从&lt;code&gt;76&lt;/code&gt;层开始，一层一层往上尝试直到&lt;code&gt;89&lt;/code&gt;层，需要  &lt;img src=&quot;//www.zhihu.com/equation?tex=89-76%2B1%3D14&quot; alt=&quot;89-76+1=14&quot; eeimg=&quot;1&quot;&gt;  次，第一个鸡蛋已经扔了&lt;code&gt;3&lt;/code&gt;次，最后得：&lt;code&gt;没碎&lt;/code&gt;情况下，需尝试  &lt;img src=&quot;//www.zhihu.com/equation?tex=17&quot; alt=&quot;17&quot; eeimg=&quot;1&quot;&gt;  次&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;在上面的例子中， &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1%3D50%2Ck_2%3D75%2C+k_3%3D90&quot; alt=&quot;k_1=50,k_2=75, k_3=90&quot; eeimg=&quot;1&quot;&gt; 就是一种可选策略&lt;br&gt;体会&lt;b&gt;最坏情况下的最小值&lt;/b&gt;的意义非常重要，或者说，尝试的&lt;b&gt;最大步数的最小值&lt;/b&gt;。如何判断对一道题目有没有完全吃透，看能否清晰的走完每一个例子，就能一窥一二&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;2.2.3 最优解的情况证明&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;⭐️ 接下里就是确定树形状了，从&lt;b&gt;直觉&lt;/b&gt;来看，这棵树，如果树的形状倾向于类似&lt;b&gt;满二叉树&lt;/b&gt;，那么树的&lt;b&gt;高度最小&lt;/b&gt;。❓ 但如何证明&lt;b&gt;这个直觉&lt;/b&gt;的正确性呢？既然要计算树高，那么就把每一个&lt;b&gt;叶子节点的树高&lt;/b&gt;一个一个&lt;b&gt;列出来&lt;/b&gt; &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cleft.+%5Cbegin%7Barray%7D%7Bl%7D+k_1+%5C%5C+k_2+-k_1+%2B1+%5C%5C+k_3-k_2+%2B2+%5C%5C+%5Ccdots+%5C%5C+k_p+-+k_%7Bp-1%7D+%2B%7Bp-1%7D+%5C%5C+N-+k_p+%2B+p+%5C%5C+%5Cend%7Barray%7D+%5Cright%5C%7D+%5Csum+%3D+N+%2B+%5Cfrac%7B%281%2Bp%29p%7D%7B2%7D+%5Ctag%7B2%7D&quot; alt=&quot;\left. \begin{array}{l} k_1 \\ k_2 -k_1 +1 \\ k_3-k_2 +2 \\ \cdots \\ k_p - k_{p-1} +{p-1} \\ N- k_p + p \\ \end{array} \right\} \sum = N + \frac{(1+p)p}{2} \tag{2}&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;经计算发现，&lt;b&gt;所有树高的和&lt;/b&gt;是个&lt;b&gt;定值&lt;/b&gt;。那么使用&lt;b&gt;反证法&lt;/b&gt;，假设这棵树不是满树，因为高度和为定值，那么必定有一个&lt;b&gt;高于平均值得树&lt;/b&gt;存在，记为  &lt;img src=&quot;//www.zhihu.com/equation?tex=T&quot; alt=&quot;T&quot; eeimg=&quot;1&quot;&gt;  ，根据最高树的最小值的要求  &lt;img src=&quot;//www.zhihu.com/equation?tex=H_a+%EF%BC%9C+H_T&quot; alt=&quot;H_a ＜ H_T&quot; eeimg=&quot;1&quot;&gt;  （ &lt;img src=&quot;//www.zhihu.com/equation?tex=H_a&quot; alt=&quot;H_a&quot; eeimg=&quot;1&quot;&gt; 为满树的高度），答案是 &lt;img src=&quot;//www.zhihu.com/equation?tex=H_a&quot; alt=&quot;H_a&quot; eeimg=&quot;1&quot;&gt; 。所以，必定是满树的高满足最大值的最小值的题目条件。证毕&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/v2-5cc93b9b1955124fac09af70c2477807_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;small&quot; data-rawwidth=&quot;2474&quot; data-rawheight=&quot;2156&quot; data-default-watermark-src=&quot;https://pic4.zhimg.com/50/v2-bad6c6b412b603504e18074eeccabbd0_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2474&quot; data-original=&quot;https://pic3.zhimg.com/50/v2-5cc93b9b1955124fac09af70c2477807_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;则有（对照上面的树形结构图更加直观）&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cbegin%7Barray%7D+%5C%5C+k_1+%26%3D+k_2+-+k_1+%2B+1+%26%5Cimplies+%26k_2+%3D+2k_1+-+1+%3D+k_1+%2B+%28k_1+-+1%29+%5C%5C+k_2+-k_1+%2B1+%26%3D+k_3-k_2+%2B2+%26%5Cimplies+%26k_3+%3D+3k_1+-3+%3D+k_1+%2B+%28k_1+-1%29+%2B+%28k_1+-2%29+%5C%5C+%5Ccdots+%5C%5C+k_%7Bp-1%7D+-k_%7Bp-2%7D+%2Bp-2+%26%3D+k_%7Bp%7D-k_%7Bp-1%7D%2B+p-1+%26%5Cimplies+%26k_p+%3D+%5Cunderbrace%7B+k_1+%2B+%28k_1-1%29+%2B+%28k_1-2%29+%2B+%5Ccdots+%7D_%7Bp%E9%A1%B9%7D+%5Cend%7Barray%7D+&quot; alt=&quot;\begin{array} \\ k_1 &amp;amp;= k_2 - k_1 + 1 &amp;amp;\implies &amp;amp;k_2 = 2k_1 - 1 = k_1 + (k_1 - 1) \\ k_2 -k_1 +1 &amp;amp;= k_3-k_2 +2 &amp;amp;\implies &amp;amp;k_3 = 3k_1 -3 = k_1 + (k_1 -1) + (k_1 -2) \\ \cdots \\ k_{p-1} -k_{p-2} +p-2 &amp;amp;= k_{p}-k_{p-1}+ p-1 &amp;amp;\implies &amp;amp;k_p = \underbrace{ k_1 + (k_1-1) + (k_1-2) + \cdots }_{p项} \end{array} &quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;根据上述推倒发现规律：要满足条件&lt;b&gt;每颗子树的树高相等&lt;/b&gt;， &lt;img src=&quot;//www.zhihu.com/equation?tex=k_p&quot; alt=&quot;k_p&quot; eeimg=&quot;1&quot;&gt; 的表达式是一个&lt;b&gt;递减等差数列&lt;/b&gt;，最终必须在第 &lt;img src=&quot;//www.zhihu.com/equation?tex=N&quot; alt=&quot;N&quot; eeimg=&quot;1&quot;&gt; 层尝试（最后一次尝试走 &lt;img src=&quot;//www.zhihu.com/equation?tex=N+-+k_p&quot; alt=&quot;N - k_p&quot; eeimg=&quot;1&quot;&gt; 步，必须覆盖最后一层 &lt;img src=&quot;//www.zhihu.com/equation?tex=N&quot; alt=&quot;N&quot; eeimg=&quot;1&quot;&gt; ）。即&lt;b&gt;在最小可分割的整数等差递减数列中&lt;/b&gt;，令 &lt;img src=&quot;//www.zhihu.com/equation?tex=k_p+%5Csim+N&quot; alt=&quot;k_p \sim N&quot; eeimg=&quot;1&quot;&gt; （趋近于），前半句加粗的话翻译成公式为&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=k_1+%2B+%28k_1-1%29+%2B+%28k_1-2%29+%2B+%5Ccdots+%2B+1+%5Csim+N+%5Cimplies+%5Cfrac%7Bk_1%28k_1+%2B+1%29%7D%7B2%7D+%3D+N&quot; alt=&quot;k_1 + (k_1-1) + (k_1-2) + \cdots + 1 \sim N \implies \frac{k_1(k_1 + 1)}{2} = N&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;解得  &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1+%5Capprox+13.65&quot; alt=&quot;k_1 \approx 13.65&quot; eeimg=&quot;1&quot;&gt;  ，考虑到，所有&lt;b&gt;尝试楼层都是整数&lt;/b&gt;，第一颗鸡蛋最后一次&lt;code&gt;1&lt;/code&gt;颗鸡蛋的&lt;b&gt;尝试区间&lt;/b&gt;需包含第 &lt;img src=&quot;//www.zhihu.com/equation?tex=N&quot; alt=&quot;N&quot; eeimg=&quot;1&quot;&gt; 层，所以  &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1+%3D+%5Clceil+k_1%5Crceil+%3D+14&quot; alt=&quot;k_1 = \lceil k_1\rceil = 14&quot; eeimg=&quot;1&quot;&gt;  。如果不明白为什么取上整数不取下整数，试试  &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1+%3D+13&quot; alt=&quot;k_1 = 13&quot; eeimg=&quot;1&quot;&gt;  或  &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1+%3D+14&quot; alt=&quot;k_1 = 14&quot; eeimg=&quot;1&quot;&gt;  对比一下答案，看看谁的尝试次数少即可&lt;/p&gt;&lt;p&gt;有了 &lt;img src=&quot;//www.zhihu.com/equation?tex=k_1&quot; alt=&quot;k_1&quot; eeimg=&quot;1&quot;&gt; ，带回去（2）式，可以知道第一个鸡蛋的扔下楼层策略为  &lt;img src=&quot;//www.zhihu.com/equation?tex=14%2C27%2C39%2C50%2C60%2C69%2C77%2C84%2C+90%2C95%2C99&quot; alt=&quot;14,27,39,50,60,69,77,84, 90,95,99&quot; eeimg=&quot;1&quot;&gt;  。使用这个策略，带回（1）式，假设&lt;b&gt;临界层&lt;/b&gt;从1到N层，&lt;b&gt;分别计算&lt;/b&gt;所需要的&lt;b&gt;最多尝试次数&lt;/b&gt;，可以得到  &lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D+14&quot; alt=&quot;r = 14&quot; eeimg=&quot;1&quot;&gt;，当然，这道知乎题目，带入计算答案为20&lt;/p&gt;&lt;p&gt;到此为止，我们已经解决了2个鸡蛋的问题，找到了一个很明确的函数，利用&lt;code&gt;抽象思维&lt;/code&gt;，可以写出它的表达式  &lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D+f%282%2C+N%29&quot; alt=&quot;r = f(2, N)&quot; eeimg=&quot;1&quot;&gt; ，而这个  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28%29&quot; alt=&quot;f()&quot; eeimg=&quot;1&quot;&gt;  即求  &lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cfrac%7Bx%28x%2B1%29%7D%7B2%7D+%3D+N&quot; alt=&quot;\frac{x(x+1)}{2} = N&quot; eeimg=&quot;1&quot;&gt;  正数解  &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt;  的  &lt;img src=&quot;//www.zhihu.com/equation?tex=%5Clceil+x+%5Crceil&quot; alt=&quot;\lceil x \rceil&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3 问题拓展&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;2&lt;/code&gt;个鸡蛋&lt;code&gt;100&lt;/code&gt;层楼已经解决，深究下去，&lt;code&gt;N&lt;/code&gt;层楼&lt;code&gt;M&lt;/code&gt;个鸡蛋的问题呢？Leetcode有这道题：&lt;a href=&quot;//link.zhihu.com/?target=https%3A//leetcode.com/problems/super-egg-drop/description/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;887. Super Egg Drop&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;刷题多的读者会&lt;b&gt;快速反应出&lt;/b&gt;，这个问题是一道&lt;b&gt;动态规划&lt;/b&gt;题，但在这里我还是想用一种&lt;b&gt;推理的思维&lt;/b&gt;来尝试分析一遍，&lt;b&gt;逻辑链上的关键锚点才是知识的精华&lt;/b&gt;&lt;br&gt;如果说你通过观察题目，快速确定此题&lt;b&gt;可用动态规划求解&lt;/b&gt;，这种能力是&lt;b&gt;熟练能力&lt;/b&gt;，类似于弹钢琴的熟能生巧，背书的死记硬背。与之相对的，即&lt;b&gt;分析能力&lt;/b&gt;。很有趣的是，这两种能力的分野十分明显，即&lt;b&gt;高效和求知&lt;/b&gt;&lt;br&gt;如果你需要&lt;b&gt;快速通过面试&lt;/b&gt;，拿到工作或&lt;b&gt;通过考试&lt;/b&gt;，那大量做题才是最短路径，可学习的目的不止是谋生，还有一种&lt;b&gt;更高级的快乐&lt;/b&gt;来自于&lt;b&gt;钻研本身&lt;/b&gt;，心理学管这种快乐为&lt;b&gt;心流&lt;/b&gt;&lt;/blockquote&gt;&lt;p&gt;回到问题，总结一下，通过上面的解答我们有了一些&lt;b&gt;直观的结论&lt;/b&gt;&lt;/p&gt;&lt;p&gt;❗ ① &lt;code&gt;1&lt;/code&gt;个和&lt;code&gt;2&lt;/code&gt;个鸡蛋的问题已经解决&lt;/p&gt;&lt;p&gt;❗ ② 理解了&lt;b&gt;最大值的最小值&lt;/b&gt;在本题中的含义&lt;/p&gt;&lt;p&gt;❗ ③ 答案的值只和&lt;b&gt;楼层高度&lt;/b&gt;有关，和最低楼层与最高楼层无关&lt;/p&gt;&lt;p&gt;以这三个结论为基石，想一想这道更加一般化的问题如何解决&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3.1 符号化描述&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;首先，最明显的思考来自于一个设问：❓我们能不能尝试把&lt;b&gt;鸡蛋的数量减少&lt;/b&gt;？即不断的往2个鸡蛋的问题上靠拢？有一个很简单的办法，就是&lt;b&gt;扔&lt;/b&gt;，扔碎一个，鸡蛋数量就减少一个&lt;/p&gt;&lt;p&gt;按照这个思路，进行一个&lt;b&gt;抽象推演&lt;/b&gt;，假设在某一个时刻，我们拥有  &lt;img src=&quot;//www.zhihu.com/equation?tex=m&quot; alt=&quot;m&quot; eeimg=&quot;1&quot;&gt;  个鸡蛋，层高为 &lt;img src=&quot;//www.zhihu.com/equation?tex=h&quot; alt=&quot;h&quot; eeimg=&quot;1&quot;&gt; （h for height），此时，此刻在  &lt;img src=&quot;//www.zhihu.com/equation?tex=k+%5Cin+%5B1%2C+h%5D&quot; alt=&quot;k \in [1, h]&quot; eeimg=&quot;1&quot;&gt;  层楼扔下一个鸡蛋&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3.1.1〔Case - 情况 1〕 碎了&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;假设我们已经知道  &lt;img src=&quot;//www.zhihu.com/equation?tex=1&quot; alt=&quot;1&quot; eeimg=&quot;1&quot;&gt;  到  &lt;img src=&quot;//www.zhihu.com/equation?tex=k-1&quot; alt=&quot;k-1&quot; eeimg=&quot;1&quot;&gt;  层楼最优的解的值，那怎么用一个函数来表示这个值呢？首先看我们需要的自变量有哪些&lt;/p&gt;&lt;ul&gt;&lt;li&gt;① 此时&lt;b&gt;剩下的鸡蛋数&lt;/b&gt;，这个非常明显，符号化记为 &lt;img src=&quot;//www.zhihu.com/equation?tex=m&quot; alt=&quot;m&quot; eeimg=&quot;1&quot;&gt; 个鸡蛋&lt;/li&gt;&lt;li&gt;② 根据&lt;code&gt;2个鸡蛋&lt;/code&gt;难题时的结论可知，第二个自变量是此时&lt;b&gt;未知情况楼层的层高&lt;/b&gt;（未知情况只楼层范围内还从来没有用鸡蛋尝试过，无法缩小范围），符号化记为 &lt;img src=&quot;//www.zhihu.com/equation?tex=h&quot; alt=&quot;h&quot; eeimg=&quot;1&quot;&gt; （h for height）&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;⭐️ 用一个表达式  &lt;img src=&quot;//www.zhihu.com/equation?tex=r+%3D+f%28h%2C+m%29&quot; alt=&quot;r = f(h, m)&quot; eeimg=&quot;1&quot;&gt;  表示&lt;b&gt;楼高&lt;/b&gt;为  &lt;img src=&quot;//www.zhihu.com/equation?tex=h&quot; alt=&quot;h&quot; eeimg=&quot;1&quot;&gt;  时，还&lt;b&gt;剩下 &lt;/b&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=m&quot; alt=&quot;m&quot; eeimg=&quot;1&quot;&gt;&lt;b&gt; 个鸡蛋&lt;/b&gt;时的&lt;b&gt;最少尝试步数&lt;/b&gt;&lt;/p&gt;&lt;p&gt;因为在 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 层碎了，所以不用考虑&lt;code&gt;[k+1, N]&lt;/code&gt;层的情况（肯定都碎），并且因为此刻这一个鸡蛋碎了，剩下 &lt;img src=&quot;//www.zhihu.com/equation?tex=m-1&quot; alt=&quot;m-1&quot; eeimg=&quot;1&quot;&gt; 个鸡蛋，用公式 &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28k-1%2C+m-1%29&quot; alt=&quot;f(k-1, m-1)&quot; eeimg=&quot;1&quot;&gt; 来表示已经知道的  &lt;img src=&quot;//www.zhihu.com/equation?tex=1&quot; alt=&quot;1&quot; eeimg=&quot;1&quot;&gt;  到 &lt;img src=&quot;//www.zhihu.com/equation?tex=k-1&quot; alt=&quot;k-1&quot; eeimg=&quot;1&quot;&gt; 层楼&lt;b&gt;最少尝试步数&lt;/b&gt;的值，总最小尝试次数为 &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28k-1%2C+m-1%29%2B1&quot; alt=&quot;f(k-1, m-1)+1&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3.1.2〔Case - 情况 2〕没碎&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 层没碎，直接不用考虑[1, k]情况了（肯定都不碎），同理，计算出&lt;b&gt;此时楼高&lt;/b&gt; &lt;img src=&quot;//www.zhihu.com/equation?tex=h_%7Bnow%7D+%3D+h+-+%28k%2B1%29+%2B+1+%3D+h+-+k&quot; alt=&quot;h_{now} = h - (k+1) + 1 = h - k&quot; eeimg=&quot;1&quot;&gt; ，且因为此刻这个鸡蛋&lt;code&gt;没碎&lt;/code&gt;，剩下 &lt;img src=&quot;//www.zhihu.com/equation?tex=m&quot; alt=&quot;m&quot; eeimg=&quot;1&quot;&gt; 个鸡蛋，即  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h-k%2C+m%29&quot; alt=&quot;f(h-k, m)&quot; eeimg=&quot;1&quot;&gt;  ，总最小尝试次数为  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h-k%2C+m%29%2B1&quot; alt=&quot;f(h-k, m)+1&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3.2 构造逻辑链&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;此时，我们已经有了三个表达式&lt;/p&gt;&lt;p&gt;① 楼高为 &lt;img src=&quot;//www.zhihu.com/equation?tex=h&quot; alt=&quot;h&quot; eeimg=&quot;1&quot;&gt; ，剩下 &lt;img src=&quot;//www.zhihu.com/equation?tex=m&quot; alt=&quot;m&quot; eeimg=&quot;1&quot;&gt; 个鸡蛋时的&lt;b&gt;最少尝试步数&lt;/b&gt;： &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h%2C+m%29&quot; alt=&quot;f(h, m)&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;② 在第 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 层扔下&lt;code&gt;1&lt;/code&gt;个鸡蛋&lt;code&gt;碎了&lt;/code&gt;后的&lt;b&gt;最少尝试步数&lt;/b&gt;： &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28k-1%2C+m-1%29&quot; alt=&quot;f(k-1, m-1)&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;③ 在第 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 层扔下&lt;code&gt;1&lt;/code&gt;个鸡蛋&lt;code&gt;没碎&lt;/code&gt;后的&lt;b&gt;最少尝试步数&lt;/b&gt;： &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h-k%2C+m%29&quot; alt=&quot;f(h-k, m)&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;观察三个表达式，发现可以抽象化出一个决策（在第  &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt;  层楼扔鸡蛋），让答案变成另一种形式，并且&lt;b&gt;因果关系只和&lt;/b&gt;这3个表达式有关！&lt;/p&gt;&lt;p&gt;那么，假设2️⃣3️⃣的表达式的&lt;b&gt;答案已知&lt;/b&gt;，是否能用这二者&lt;b&gt;推出&lt;/b&gt;1️⃣？如果上述逻辑链成立，就可以用&lt;code&gt;归纳思维&lt;/code&gt;（数学归纳法）算出任意  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h%2C+m%29&quot; alt=&quot;f(h, m)&quot; eeimg=&quot;1&quot;&gt;  。。因为1️⃣只能从2️⃣3️⃣推出&lt;/p&gt;&lt;p&gt;〔推倒 &lt;img src=&quot;//www.zhihu.com/equation?tex=a&quot; alt=&quot;a&quot; eeimg=&quot;1&quot;&gt; 〕考虑到2️⃣3️⃣是一种&lt;b&gt;策略选择后的可能性&lt;/b&gt;，根据&lt;a href=&quot;https://www.zhihu.com/question/19690210/answer/514119129#2-1-%E4%B8%80%E4%B8%AA%E9%B8%A1%E8%9B%8B&quot; class=&quot;internal&quot;&gt;上面的分析&lt;/a&gt;（最大值的最小值原理）两种策略中临界层 &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt; ​ 可能在任何一层。遍历所有 &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt; ​ 的情况时，最终尝试步数的结果是&lt;b&gt;其中的最大值&lt;/b&gt;，所以选择2️⃣3️⃣中&lt;b&gt;值更大的那个&lt;/b&gt;&lt;/p&gt;&lt;p&gt;〔推倒 &lt;img src=&quot;//www.zhihu.com/equation?tex=b&quot; alt=&quot;b&quot; eeimg=&quot;1&quot;&gt; 〕1️⃣需要仍一次鸡蛋，尝试步数 +1&lt;/p&gt;&lt;p&gt;〔推倒 &lt;img src=&quot;//www.zhihu.com/equation?tex=c&quot; alt=&quot;c&quot; eeimg=&quot;1&quot;&gt; 〕 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 是一个自变量，在这个情况下，可取到 ​ &lt;img src=&quot;//www.zhihu.com/equation?tex=%5B1%2C+h%29&quot; alt=&quot;[1, h)&quot; eeimg=&quot;1&quot;&gt; 中的任意值，⭐️假设2️⃣3️⃣已知，只要在定义域内&lt;b&gt;穷举&lt;/b&gt;出所有 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; ​ 的可能值，并找出&lt;b&gt;最大尝试步数中的最小值&lt;/b&gt;即可&lt;/p&gt;&lt;p&gt;接下来就可以把这个逻辑链的用&lt;b&gt;抽象化的公式&lt;/b&gt;表达出来 &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h%2C+m%29+%3D+%5Cunderbrace%7B%5Cmin_%7B1+%5Cleqslant+k+%5Cleqslant+h%7D+%5C%7B%5Coverbrace%7B%5Coverbrace%7B%5Cmax+%5Bf%28k-1%2C+m-1%29%2C+f%28h-k%2Cm%29%5D%7D%5E%7Ba%7D%2B1%7D%5E%7Bb%7D%5C%7D%7D_%7Bc%7D&quot; alt=&quot;f(h, m) = \underbrace{\min_{1 \leqslant k \leqslant h} \{\overbrace{\overbrace{\max [f(k-1, m-1), f(h-k,m)]}^{a}+1}^{b}\}}_{c}&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;有了具体的公式，为了锻炼工程思维，要时刻&lt;b&gt;保持严谨&lt;/b&gt;，思考全集和完备性，再来看看&lt;b&gt;边界条件&lt;/b&gt;和&lt;b&gt;自变量定义域&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;3.2.1 自变量的定义域&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;依据题意楼高  &lt;img src=&quot;//www.zhihu.com/equation?tex=h+%5Cgeqslant+1&quot; alt=&quot;h \geqslant 1&quot; eeimg=&quot;1&quot;&gt;  且为整数，剩余鸡蛋数  &lt;img src=&quot;//www.zhihu.com/equation?tex=m+%5Cgeqslant+1&quot; alt=&quot;m \geqslant 1&quot; eeimg=&quot;1&quot;&gt;  且为整数 &lt;/p&gt;&lt;h2&gt;&lt;b&gt;3.2.2 边界条件&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h%2C+1%29+%3D+h&quot; alt=&quot;f(h, 1) = h&quot; eeimg=&quot;1&quot;&gt;  ，当剩余鸡蛋数为1的时候，答案为现在的楼高&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=f%280%2C+m%29+%3D+0&quot; alt=&quot;f(0, m) = 0&quot; eeimg=&quot;1&quot;&gt;  ，当楼高为0时，无法尝试，答案&lt;b&gt;记为&lt;/b&gt;0 ，或者 &lt;img src=&quot;//www.zhihu.com/equation?tex=f%281%2Cm%29+%3D+1&quot; alt=&quot;f(1,m) = 1&quot; eeimg=&quot;1&quot;&gt; ，表示楼高为1时，最小尝试次数为1 &lt;/p&gt;&lt;h2&gt;&lt;b&gt;3.3 动态规划&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;现在反过头来再看，计算机学科中，有一部分专门研究这类问题的工具，即&lt;b&gt;动态规划&lt;/b&gt;&lt;/p&gt;&lt;p&gt;上面的&lt;code&gt;符号化描述&lt;/code&gt;被称为&lt;a href=&quot;https://www.zhihu.com/question/19690210/answer/514119129#define_status&quot; class=&quot;internal&quot;&gt;定义状态&lt;/a&gt;，&lt;code&gt;构造逻辑链&lt;/code&gt;被称为&lt;a href=&quot;https://www.zhihu.com/question/19690210/answer/514119129#3-2-%E6%9E%84%E9%80%A0%E9%80%BB%E8%BE%91%E9%93%BE&quot; class=&quot;internal&quot;&gt;构造状态转移方程&lt;/a&gt;，而背后的工程思维是&lt;code&gt;拆分思维&lt;/code&gt;、&lt;code&gt;抽象思维&lt;/code&gt;和&lt;code&gt;归纳思维&lt;/code&gt;。再究竟一些，动态规划是一类特殊的&lt;code&gt;图算法&lt;/code&gt;。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;〔拆分思维〕拆分问题的能力。大问题化小问题，无后效性，当前状态与未来状态无关。&lt;/li&gt;&lt;li&gt;〔抽象思维〕使用状态来描述问题的能力，或说用抽象符号或状态机来描述问题的能力&lt;/li&gt;&lt;li&gt;〔归纳思维〕数学归纳法，逻辑推导能力。由  &lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cleqslant+i&quot; alt=&quot;\leqslant i&quot; eeimg=&quot;1&quot;&gt;  的所有状态推倒出 &lt;img src=&quot;//www.zhihu.com/equation?tex=i%2B1&quot; alt=&quot;i+1&quot; eeimg=&quot;1&quot;&gt; 时刻状态的能力&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;之所以要研究这类问题和&lt;b&gt;计算机本身是一个巨大的状态机&lt;/b&gt;有关。动态规划提供了一套&lt;b&gt;工具&lt;/b&gt;和&lt;b&gt;思维框架&lt;/b&gt;去优化问题，找到最优解，这个可能才是最厉害的，后面优化部分的详解你就能直观的体会到这一点。&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4 实现优化和分析&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;这部分，通过一步一步&lt;b&gt;剖析优化思路&lt;/b&gt;，和对应的代码实现（使用&lt;code&gt;python&lt;/code&gt;，所有代码可在Leetcode题目中AC），希望能直观的说明一个问题，&lt;code&gt;❓ 到底高级程序员和一般的码农程序员区分在哪里？&lt;/code&gt;&lt;/p&gt;&lt;p&gt;每个人都有自己擅长的领域，管理大师&lt;b&gt;吉姆·柯林斯&lt;/b&gt;的第一本畅销书《基业长青》，书内研究了18家企业成功的秘密。&lt;/p&gt;&lt;p&gt;后来，他又出了一本书《从平庸到伟大》，对这个变化的界定是非常严格的。&lt;code&gt;平庸&lt;/code&gt;意味着这家公司的业绩低于市场的平均水准，&lt;code&gt;变得伟大&lt;/code&gt;意味着业绩保持在平均水准的3倍以上，并持续至少15年。他研究了1435家公司，只找到了11家&lt;/p&gt;&lt;p&gt;通过研究，他总结了这些企业的6个秘诀。其中一个就是著名的&lt;b&gt;三环理论&lt;/b&gt;，如果把企业的三环理论推广到个人，就是问自己下面&lt;b&gt;三个问题&lt;/b&gt;：&lt;code&gt;我的擅长是什么？我的热爱是什么？我的机会是什么？&lt;/code&gt;&lt;/p&gt;&lt;p&gt;而选择三者&lt;b&gt;交集&lt;/b&gt;作为一辈子的&lt;b&gt;努力方向&lt;/b&gt;大概率就算是走对了路&lt;/p&gt;&lt;p&gt;作为程序员，可能只是你开始职业生涯的第一步，后面如何发展，&lt;b&gt;需要对自己的追求和个人能力做一个更深入的挖掘&lt;/b&gt;，才能有个定论&lt;/p&gt;&lt;p&gt;下面即将&lt;b&gt;剖析的优化过程&lt;/b&gt;完美的阐述了作为一个&lt;code&gt;伟大&lt;/code&gt;的程序员需要什么样的&lt;b&gt;基础能力&lt;/b&gt;（至少在算法优化这个小领域），这需要&lt;b&gt;长时间的训练和极强的天赋&lt;/b&gt;。如果你感觉想出这些解答很吃力，相对应的，你又想&lt;b&gt;这辈子有所作为&lt;/b&gt;，&lt;b&gt;追逐伟大&lt;/b&gt;。那么应该尝试去找一条&lt;b&gt;非程序员的路努力一生&lt;/b&gt;。毕竟，&lt;b&gt;计算机思维，数据分析和机器学习未来会成为像数学一样的基础能力&lt;/b&gt;，无论在哪一行都&lt;b&gt;对解决问题有极大的助益&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.1 基础版&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;根据思路直接写出的最直观的代码，如果对递归理解的深，比较易懂直观。用我能想到最直白的语言来描述就是：&lt;b&gt;假设子状态的结果已知，现在需要做些什么操作，就能得到此状态的答案，并且把这个答案返回给函数即可&lt;/b&gt;（借鉴知乎回答的答案，加上了lru_cache）&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;functools&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# python3的functools的一个自带函数, 可以对函数返回结果进行LRU cache, 下次以相同参数调用就不重复计算了&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# maxsize=None 不限制大小, 其实就变成是全部都cache下来, 不考虑LRU了&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@functools.lru_cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxsize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 装饰器 &lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;〔优化〕Recursive（递归）的写法虽然清晰明了漂亮，但在工程上有调用函数的开销，系统栈深度限制等弊端，所以需要写成&lt;b&gt;循环版本&lt;/b&gt;，否则在工程上是一定会返工，过不了Code review&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.2 循环版本&lt;/b&gt;&lt;/h2&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;solve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;〔优化〕分析一下时间复杂度和空间复杂度，时间复杂度为  &lt;img src=&quot;//www.zhihu.com/equation?tex=O%28mh%5E2%29&quot; alt=&quot;O(mh^2)&quot; eeimg=&quot;1&quot;&gt;  ，空间复杂度为  &lt;img src=&quot;//www.zhihu.com/equation?tex=O%28hn%29&quot; alt=&quot;O(hn)&quot; eeimg=&quot;1&quot;&gt;  ，很明显，空间上可以优化到  &lt;img src=&quot;//www.zhihu.com/equation?tex=O%28h%29&quot; alt=&quot;O(h)&quot; eeimg=&quot;1&quot;&gt; ，原因是状态转移方程只和  &lt;img src=&quot;//www.zhihu.com/equation?tex=m&quot; alt=&quot;m&quot; eeimg=&quot;1&quot;&gt;  与 &lt;img src=&quot;//www.zhihu.com/equation?tex=m-1&quot; alt=&quot;m-1&quot; eeimg=&quot;1&quot;&gt; 有关，使用两个数组滚动即可&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.3 空间优化版本&lt;/b&gt;&lt;/h2&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;solve_space&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;基本到这，对美国&lt;code&gt;FAANG&lt;/code&gt;的入门级SDE，就十分优秀了。后面的所有的内容，属于&lt;code&gt;高手&lt;/code&gt;的领域（博主完全不是高手，只是好奇，所以阅读了&lt;b&gt;其他人的牛逼的解题报告&lt;/b&gt;，重新做了理解和整理）&lt;/p&gt;&lt;p&gt;对于这一套状态描述和状态转移方程，优化方向在&lt;b&gt;时间复杂度&lt;/b&gt;上。思考，❓是否有一些数学定理可以提供答案&lt;b&gt;取值的下界&lt;/b&gt;呢？&lt;b&gt;（找边界是剪枝的有效方法）&lt;/b&gt;&lt;/p&gt;&lt;p&gt; 〔优化〕这里需要使用数据结构中&lt;a href=&quot;//link.zhihu.com/?target=https%3A//blog.csdn.net/qq_28409193/article/details/50484638&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;折半查找判定树&lt;/a&gt;理论。假设我们对鸡蛋的数量不做限制，那么这棵树&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/v2-a85d3723c103bdab625be82cc17c1171_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;2682&quot; data-rawheight=&quot;1056&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;2682&quot; data-original=&quot;https://pic3.zhimg.com/50/v2-a85d3723c103bdab625be82cc17c1171_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;就会变为一个&lt;b&gt;满二叉树&lt;/b&gt;，而叶子节点数量有 &lt;img src=&quot;//www.zhihu.com/equation?tex=h%2B1&quot; alt=&quot;h+1&quot; eeimg=&quot;1&quot;&gt; 个（因为最大尝试步数能取到的总数就是  &lt;img src=&quot;//www.zhihu.com/equation?tex=h%2B1&quot; alt=&quot;h+1&quot; eeimg=&quot;1&quot;&gt;  种，需包含0次）树的高度至少为  &lt;img src=&quot;//www.zhihu.com/equation?tex=%5Clceil+%5Clog_2%28h%2B1%29%5Crceil&quot; alt=&quot;\lceil \log_2(h+1)\rceil&quot; eeimg=&quot;1&quot;&gt; 。假设鸡蛋 &lt;img src=&quot;//www.zhihu.com/equation?tex=m&quot; alt=&quot;m&quot; eeimg=&quot;1&quot;&gt; 的数量大于  &lt;img src=&quot;//www.zhihu.com/equation?tex=%5Clceil+%5Clog_2%28h%2B1%29%5Crceil&quot; alt=&quot;\lceil \log_2(h+1)\rceil&quot; eeimg=&quot;1&quot;&gt;  ，那么上面的树&lt;b&gt;变成满树&lt;/b&gt;，无论怎么尝试，答案（树高）都有一个下界（不可能大于这个值）&lt;/p&gt;&lt;p&gt;如果还不太明白，即在 &lt;img src=&quot;//www.zhihu.com/equation?tex=m+%5Cgeqslant+%5Clceil+%5Clog_2%28h%2B1%29%5Crceil&quot; alt=&quot;m \geqslant \lceil \log_2(h+1)\rceil&quot; eeimg=&quot;1&quot;&gt; 时，这道题完全变成了&lt;b&gt;二分查找&lt;/b&gt;（鸡蛋太多，随便扔，就当楼层是排序好的即可）最终答案直接取  &lt;img src=&quot;//www.zhihu.com/equation?tex=%5Clceil+%5Clog_2%28h%2B1%29%5Crceil&quot; alt=&quot;\lceil \log_2(h+1)\rceil&quot; eeimg=&quot;1&quot;&gt;  即可&lt;/p&gt;&lt;p&gt;  如果还是不太明白，上终极杀招，举例子，假设&lt;code&gt;16&lt;/code&gt;层楼，但有&lt;code&gt;4&lt;/code&gt;个鸡蛋，根本不用设计，二分查找即可，效率肯定最高。比如&lt;code&gt;16&lt;/code&gt;层楼，只要鸡蛋数大于&lt;code&gt;4&lt;/code&gt;，最大尝试次数就是&lt;code&gt;4&lt;/code&gt;，可以直接算出答案&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.4 下界优化&lt;/b&gt;&lt;/h2&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;solve_boundary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;min&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这时候时间复杂度优化为  &lt;img src=&quot;//www.zhihu.com/equation?tex=O%28mhlog_2%28h%29%29&quot; alt=&quot;O(mhlog_2(h))&quot; eeimg=&quot;1&quot;&gt; 。此时，如果列出所有状态转移的过程（行为鸡蛋数 &lt;img src=&quot;//www.zhihu.com/equation?tex=m&quot; alt=&quot;m&quot; eeimg=&quot;1&quot;&gt; ，从2开始；列为楼高 &lt;img src=&quot;//www.zhihu.com/equation?tex=h&quot; alt=&quot;h&quot; eeimg=&quot;1&quot;&gt; ，从1开始），如下图（红色框表示 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 的移动，蓝色双向箭头表示  &lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cmax&quot; alt=&quot;\max&quot; eeimg=&quot;1&quot;&gt;  操作，然后还需要加1后和之前的 &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28m%2Ch%29&quot; alt=&quot;f(m,h)&quot; eeimg=&quot;1&quot;&gt; 进行 &lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cmin&quot; alt=&quot;\min&quot; eeimg=&quot;1&quot;&gt; 操作。下图展示的是  &lt;img src=&quot;//www.zhihu.com/equation?tex=m_i%3D2%2Ch_j%3D11%2Ck%3D5&quot; alt=&quot;m_i=2,h_j=11,k=5&quot; eeimg=&quot;1&quot;&gt;  时的情况）（这幅图也能帮助理解下界优化，注意  &lt;img src=&quot;//www.zhihu.com/equation?tex=m_i%3D5&quot; alt=&quot;m_i=5&quot; eeimg=&quot;1&quot;&gt;  和 &lt;img src=&quot;//www.zhihu.com/equation?tex=m_i%3D4&quot; alt=&quot;m_i=4&quot; eeimg=&quot;1&quot;&gt; 在  &lt;img src=&quot;//www.zhihu.com/equation?tex=h+%3C+20&quot; alt=&quot;h &amp;lt; 20&quot; eeimg=&quot;1&quot;&gt;  的情况即可）&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/v2-d2e2956edadd879268be1a388e6708e8_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1735&quot; data-rawheight=&quot;371&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1735&quot; data-original=&quot;https://pic4.zhimg.com/50/v2-d2e2956edadd879268be1a388e6708e8_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;有个很重要规律，即单调性，写成公式为  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28m%2C+h%29+%5Cgeqslant+f%28m%2C+h-1%29&quot; alt=&quot;f(m, h) \geqslant f(m, h-1)&quot; eeimg=&quot;1&quot;&gt;  当  &lt;img src=&quot;//www.zhihu.com/equation?tex=h+%5Cgeqslant+1&quot; alt=&quot;h \geqslant 1&quot; eeimg=&quot;1&quot;&gt;  ，如果满足&lt;b&gt;单调性&lt;/b&gt;，那么又可以在搜索时使用&lt;b&gt;二分查找&lt;/b&gt;。先姑且不考虑如何证明单调性，工程上，在资源允许的情况下，先尝试一下，看看能不能得到相似的结果，然后用一个正确算法和这个尝试算法进行验证，直到很大的时候如果都没问题，姑且可以觉得这个猜测是对的（不严谨，但是效率较高）&lt;/p&gt;&lt;p&gt;通过这一层优化，&lt;b&gt;体现出了理论和工程的分野&lt;/b&gt;，即你猜想出了一个优化方法，当然可以先直接尝试，&lt;b&gt;不管这个猜测的条件是不是正确&lt;/b&gt;，总是心里不踏实的，可能出现&lt;b&gt;特殊情况&lt;/b&gt;就让整个算法崩溃。此时，理论出山，用严谨的数学逻辑去证明这些结论，让算法具有完备性（本体的这个猜想是对的，证明过程参见参考文献）&lt;/p&gt;&lt;blockquote&gt;另外，&lt;b&gt;观察和总结答案的分布规律&lt;/b&gt;也是非常重要的思考手段，你会发现，这简单的一句话说开去，是一个新的学科，名字叫做&lt;b&gt;统计学&lt;/b&gt;&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;4.5 单调性优化&lt;/b&gt;&lt;/h2&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;solve_binary_search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000000&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;
                &lt;span class=&quot;c&quot;&gt;# 二分查找&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
                            &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
                            &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h_j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;结果的简单特性部分挖掘完了，继续观察上面的&lt;b&gt;状态转移图&lt;/b&gt;，发现&lt;b&gt;很多项其实是相等的&lt;/b&gt;，那么可不可以找到，在某种条件满足时，状态可以直接推出，而不用进行 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 的搜索？这个时候就需要从状态转移方程本身入手是挖掘其中的数学特性&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cbegin%7Barray%7D%26+f%28h%2C+m%29+%3D+%5Cmin%5Climits_%7B1+%5Cleqslant+k+%5Cleqslant+h%7D+%5C%7B%5Cmax+%5Bf%28k-1%2C+m-1%29%2C+f%28h-k%2Cm%29%5D%2B1%5C%7D+%5C%5C+f%28h%2C+m%29+%5Cleqslant+%5Cmax+%5Bf%28k-1%2C+m-1%29%2C+f%28h-k%2Cm%29%5D%2B1+%5Cquad%281+%5Cleqslant+k+%5Cleqslant+h%29+%5C%5C+%E4%BB%A4%5C%3B+k+%3D+1+%5Cimplies+f%28h%2C+m%29+%5Cleqslant+f%28h+-+1%2C+m%29+%2B+1+%5Cend%7Barray%7D&quot; alt=&quot;\begin{array}&amp;amp; f(h, m) = \min\limits_{1 \leqslant k \leqslant h} \{\max [f(k-1, m-1), f(h-k,m)]+1\} \\ f(h, m) \leqslant \max [f(k-1, m-1), f(h-k,m)]+1 \quad(1 \leqslant k \leqslant h) \\ 令\; k = 1 \implies f(h, m) \leqslant f(h - 1, m) + 1 \end{array}&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;又因为 &lt;img src=&quot;//www.zhihu.com/equation?tex=f&quot; alt=&quot;f&quot; eeimg=&quot;1&quot;&gt; 具有单调性，可得 &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h+-+1%2C+m%29+%5Cleqslant+f%28h%2C+m%29+%5Cleqslant+f%28h+-+1%2C+m%29+%2B1&quot; alt=&quot;f(h - 1, m) \leqslant f(h, m) \leqslant f(h - 1, m) +1&quot; eeimg=&quot;1&quot;&gt; 其中 &lt;img src=&quot;//www.zhihu.com/equation?tex=h%5Cgeqslant+1&quot; alt=&quot;h\geqslant 1&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;上面的式子非常有意思，使用标准的逻辑推理来看（看晕了可以跳过）&lt;/p&gt;&lt;ul&gt;&lt;li&gt;若某个决策  &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt;  可使得  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h+-+1%2C+m%29+%3D+f%28h%2C+m%29&quot; alt=&quot;f(h - 1, m) = f(h, m)&quot; eeimg=&quot;1&quot;&gt;  则一定 &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h%2C+m%29+%3D+f%28h-1%2C+m%29&quot; alt=&quot;f(h, m) = f(h-1, m)&quot; eeimg=&quot;1&quot;&gt;&lt;/li&gt;&lt;li&gt;若所有决策 &lt;img src=&quot;//www.zhihu.com/equation?tex=k&quot; alt=&quot;k&quot; eeimg=&quot;1&quot;&gt; 都&lt;b&gt;不能&lt;/b&gt;使  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h+-+1%2C+m%29+%3D+f%28h%2C+m%29&quot; alt=&quot;f(h - 1, m) = f(h, m)&quot; eeimg=&quot;1&quot;&gt; 则一定&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28h%2C+m%29+%3D+f%28h+-+1%2C+m%29+%2B+1&quot; alt=&quot;f(h, m) = f(h - 1, m) + 1&quot; eeimg=&quot;1&quot;&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;那么，是否可以构造这样一个决策，使得状态转移直接计算呢？&lt;b&gt;具体过程略过&lt;/b&gt;，有兴趣的读者详见参考文献&lt;/p&gt;&lt;p&gt;假设这个决策的楼高  &lt;img src=&quot;//www.zhihu.com/equation?tex=h+%3D+p&quot; alt=&quot;h = p&quot; eeimg=&quot;1&quot;&gt;  ，推倒出当  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28m%2C+p%29%3Cf%EF%BC%88m-1%EF%BC%8C+h-p-1%29&quot; alt=&quot;f(m, p)&amp;lt;f（m-1， h-p-1)&quot; eeimg=&quot;1&quot;&gt;  时，无论任何决策都不能使  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28m%2C+h%29+%3D+f%28m%2C+h-1%29&quot; alt=&quot;f(m, h) = f(m, h-1)&quot; eeimg=&quot;1&quot;&gt; ，所以，此时 &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28m%2C+h%29+%3D+f%28m%2C+h-1%29+%2B+1&quot; alt=&quot;f(m, h) = f(m, h-1) + 1&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;也就是说，只需根据  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28m%2C+h%29+%3D+f%28m%2C+h-1%29+%2B+1&quot; alt=&quot;f(m, h) = f(m, h-1) + 1&quot; eeimg=&quot;1&quot;&gt;  和  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28m-1%2Ch-p-1%29&quot; alt=&quot;f(m-1,h-p-1)&quot; eeimg=&quot;1&quot;&gt;  的大小关系就可以直接确定  &lt;img src=&quot;//www.zhihu.com/equation?tex=f%28m%2C+h%29&quot; alt=&quot;f(m, h)&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.6 状态转移方程优化&lt;/b&gt;&lt;/h2&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;solve_transfer_function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m_i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此时，状态转移过程时间复杂度变成  &lt;img src=&quot;//www.zhihu.com/equation?tex=O%281%29&quot; alt=&quot;O(1)&quot; eeimg=&quot;1&quot;&gt; ，整体时间复杂度随之变成  &lt;img src=&quot;//www.zhihu.com/equation?tex=O%28m%5Clog_2%7Bh%7D%29&quot; alt=&quot;O(m\log_2{h})&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;在这种依照题意直接定义状态并找到状态转移方程的方法已经优化到极致了。那么，❓ 如果从不同的角度定义问题呢？&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.7 不同角度看问题&lt;/b&gt;&lt;/h2&gt;&lt;h2&gt;&lt;b&gt;4.7.1 状态定义&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;改变对问题的状态描述方法，用  &lt;img src=&quot;//www.zhihu.com/equation?tex=h%28i%2Cj%29&quot; alt=&quot;h(i,j)&quot; eeimg=&quot;1&quot;&gt;  [h for height]表示用 &lt;img src=&quot;//www.zhihu.com/equation?tex=j&quot; alt=&quot;j&quot; eeimg=&quot;1&quot;&gt; 个鸡蛋尝试  &lt;img src=&quot;//www.zhihu.com/equation?tex=i&quot; alt=&quot;i&quot; eeimg=&quot;1&quot;&gt;  次在最坏情况下能找到的最小尝试次数的&lt;b&gt;楼高&lt;/b&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.7.2 边界条件&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;当尝试次数  &lt;img src=&quot;//www.zhihu.com/equation?tex=i%3D1&quot; alt=&quot;i=1&quot; eeimg=&quot;1&quot;&gt;  时， &lt;img src=&quot;//www.zhihu.com/equation?tex=h%281%2Cj%29%3D1%5Cquad%28j+%5Cgeqslant+1%29&quot; alt=&quot;h(1,j)=1\quad(j \geqslant 1)&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;当使用  &lt;img src=&quot;//www.zhihu.com/equation?tex=j+%3D+1&quot; alt=&quot;j = 1&quot; eeimg=&quot;1&quot;&gt;  个鸡蛋时，尝试  &lt;img src=&quot;//www.zhihu.com/equation?tex=i&quot; alt=&quot;i&quot; eeimg=&quot;1&quot;&gt;  次可以在 &lt;img src=&quot;//www.zhihu.com/equation?tex=i&quot; alt=&quot;i&quot; eeimg=&quot;1&quot;&gt; 层楼的高度内找到最小尝试次数，即  &lt;img src=&quot;//www.zhihu.com/equation?tex=h%28i%2C1%29%3Di&quot; alt=&quot;h(i,1)=i&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.7.3 状态转移方程&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;在某层扔下一个鸡蛋&lt;/p&gt;&lt;ul&gt;&lt;li&gt;〔碎了〕那么在后面的  &lt;img src=&quot;//www.zhihu.com/equation?tex=i-1&quot; alt=&quot;i-1&quot; eeimg=&quot;1&quot;&gt;  次里，需用  &lt;img src=&quot;//www.zhihu.com/equation?tex=j-1&quot; alt=&quot;j-1&quot; eeimg=&quot;1&quot;&gt;  个鸡蛋在下面的楼层中确定&lt;b&gt;楼高&lt;/b&gt;。为了使  &lt;img src=&quot;//www.zhihu.com/equation?tex=h%28i%2Cj%29&quot; alt=&quot;h(i,j)&quot; eeimg=&quot;1&quot;&gt;  达到最大，希望下面的楼层数（楼高）最大，根据状态定义，可以写为 &lt;img src=&quot;//www.zhihu.com/equation?tex=h%28i-1%2C+j-1%29&quot; alt=&quot;h(i-1, j-1)&quot; eeimg=&quot;1&quot;&gt;&lt;/li&gt;&lt;li&gt;〔没碎〕那么在后面的  &lt;img src=&quot;//www.zhihu.com/equation?tex=i-1&quot; alt=&quot;i-1&quot; eeimg=&quot;1&quot;&gt;  次里，需用  &lt;img src=&quot;//www.zhihu.com/equation?tex=j&quot; alt=&quot;j&quot; eeimg=&quot;1&quot;&gt;  个鸡蛋在上面的楼层中确定&lt;b&gt;楼高&lt;/b&gt;。同理，需要楼层数达到最大，记为  &lt;img src=&quot;//www.zhihu.com/equation?tex=h%28i-1%2Cj%29&quot; alt=&quot;h(i-1,j)&quot; eeimg=&quot;1&quot;&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;综上，状态转移方程写为 &lt;img src=&quot;//www.zhihu.com/equation?tex=h%28i%2Cj%29+%3D+h%28i-1%2C+j-1%29%2Bh%28i-1%2Cj%29+%2B+1&quot; alt=&quot;h(i,j) = h(i-1, j-1)+h(i-1,j) + 1&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;而最终结果可以写为，找到一个 &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt; ，使得  &lt;img src=&quot;//www.zhihu.com/equation?tex=x&quot; alt=&quot;x&quot; eeimg=&quot;1&quot;&gt;  满足  &lt;img src=&quot;//www.zhihu.com/equation?tex=h%28x-1%2C+M%29+%3C+H&quot; alt=&quot;h(x-1, M) &amp;lt; H&quot; eeimg=&quot;1&quot;&gt;  且 $ &lt;img src=&quot;//www.zhihu.com/equation?tex=h%28x%2C+M%29+%5Cgeqslant+H&quot; alt=&quot;h(x, M) \geqslant H&quot; eeimg=&quot;1&quot;&gt; （ &lt;img src=&quot;//www.zhihu.com/equation?tex=M&quot; alt=&quot;M&quot; eeimg=&quot;1&quot;&gt; 为鸡蛋总数， &lt;img src=&quot;//www.zhihu.com/equation?tex=H&quot; alt=&quot;H&quot; eeimg=&quot;1&quot;&gt;  为楼层总高度），其实也就是用公式描述的临界层的具体含义&lt;/p&gt;&lt;h2&gt;&lt;b&gt;4.7.4 代码实现&lt;/b&gt;&lt;/h2&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_pre&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;g_pre&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;&lt;b&gt;4.7.5 继续优化&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;这又是一个全新的状态定义和状态转移方程，同理，可尝试&lt;b&gt;输出整个转移矩阵的具体值&lt;/b&gt;，先观察一下总没有错，如下图所示 &lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/v2-c878ca021dfe616f67c71ac22f155974_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;856&quot; data-rawheight=&quot;487&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;856&quot; data-original=&quot;https://pic1.zhimg.com/50/v2-c878ca021dfe616f67c71ac22f155974_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;从形式上来说，不需要滚动数组，在转移过程中，使用一个 &lt;img src=&quot;//www.zhihu.com/equation?tex=g&quot; alt=&quot;g&quot; eeimg=&quot;1&quot;&gt; 函数即可。在最后输出的时候，只需要判断g[m]的情况输出 &lt;img src=&quot;//www.zhihu.com/equation?tex=i&quot; alt=&quot;i&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;g_optimization&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;要分析时间复杂度，这个问题非常难，通过证明可以有一个结论（具体证明详见参考文献） &lt;img src=&quot;//www.zhihu.com/equation?tex=xM+%5Cleqslant+H&quot; alt=&quot;xM \leqslant H&quot; eeimg=&quot;1&quot;&gt;  ，再通过一系列骚操作，可以证明时间复杂度为  &lt;img src=&quot;//www.zhihu.com/equation?tex=O%28%5Csqrt%7Bh%7D%29&quot; alt=&quot;O(\sqrt{h})&quot; eeimg=&quot;1&quot;&gt; ，空间复杂度  &lt;img src=&quot;//www.zhihu.com/equation?tex=O%28m%29&quot; alt=&quot;O(m)&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;p&gt;至此，Leetcode上这道题目的执行时间打败了85.7%的答案，做这道题的人不多，前面只有一个答案，思路类似，代码写的更漂亮&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5 工程思维总结和感悟&lt;/b&gt;&lt;/h2&gt;&lt;h2&gt;&lt;b&gt;5.1 工程思维&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;⭐️ 这一部分是【直观算法】系列的最终目的。&lt;b&gt;求同遵异&lt;/b&gt;，&lt;b&gt;寻找每一道算法题背后的工程思维，提升自己真正解决工程问题的能力&lt;/b&gt;。博主对自己的定位是【机器学习+区块链产品经理】，但同时对技术也有好奇心，喜欢钻研，才开坑写【直观算法】系列&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5.1.1 抽象思维&lt;/b&gt;&lt;/h2&gt;&lt;h2&gt;&lt;b&gt;5.1.1 抽象思维&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;把语言描述转化为符号描述的能力，符号是信息和逻辑的纽带&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5.1.2 等价思维&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;&lt;b&gt;沟通的效率和信息的冗余度成正比&lt;/b&gt;，所以一个人能否把同一个概念，&lt;b&gt;从不同的角度，用不同的案例类比，抑或各类精彩直观的比喻&lt;/b&gt;表达出来，这个能力很重要，它可以让人们更加&lt;b&gt;准确快速的&lt;/b&gt;理解你想表达的意思&lt;/p&gt;&lt;p&gt;⭐️ &lt;b&gt;学习的真正本质&lt;/b&gt;：&lt;b&gt;是在一个领域内不断的去建立这种沟通共识的框架&lt;/b&gt;。举个例子，学过线性代数的人，只要&lt;b&gt;提到矩阵，就能想到变换&lt;/b&gt;。这就是都学过线性代数的人交流密码，如矩阵的逆 = 一个具体的反向变换。没学过这门课的人是无法和&lt;b&gt;学过的人&lt;/b&gt;进行沟通的。这也从很大程度加强了人们沟通的效率，所以，&lt;b&gt;学习带来的终极成效&lt;/b&gt;其实是降低了&lt;b&gt;人类社会的沟通时间，提高了效率&lt;/b&gt;&lt;/p&gt;&lt;p&gt;再举个例子：机器学习中，提到&lt;b&gt;正则化&lt;/b&gt;，必须建立一套与之相关的知识架构，包括，&lt;b&gt;过拟合，最优化函数曲面空间理解，范数&lt;/b&gt;等，成&lt;b&gt;树状结构&lt;/b&gt;继续推而广之，这每一个名词，背后也对应了一个&lt;b&gt;更加直观，更加易懂的描述方式&lt;/b&gt;。但是我们需要知道，如果我为了表达正则化，为了让你明白我的意思，我需要用一大堆描述性语言，那我们两人的&lt;b&gt;沟通效率就十分低下了&lt;/b&gt;&lt;/p&gt;&lt;p&gt;这也就是知识体系，一门学科，一门专业的最终含义，学习是为了&lt;b&gt;构建这门学科的通识沟通框架&lt;/b&gt;，降低同行之间的沟通成本。当然，这有一个&lt;b&gt;必要前提&lt;/b&gt;，把&lt;b&gt;学习的目的&lt;/b&gt;理解&lt;b&gt;降低沟通成本&lt;/b&gt;必须是你做的工作&lt;b&gt;是规模化的&lt;/b&gt;，涉及&lt;b&gt;协作&lt;/b&gt;&lt;/p&gt;&lt;p&gt;如果你是爱因斯坦，是能&lt;b&gt;开拓学科新领域&lt;/b&gt;的&lt;code&gt;0&lt;/code&gt;级工程师（来自于吴军老师谷歌方法论），独自想象钻研。那么，学习的本质可能在于给你更多的角度（认知能力），更多的工具（锤子锯子）去更好的&lt;b&gt;探索这个世界的本质和规则&lt;/b&gt;，在这样的条件下，关于&lt;b&gt;学习本质的描述&lt;/b&gt;就需要调整了&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5.1.3 反推思维&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;从结论出发反推逻辑链&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5.1.4 归纳思维&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;数学归纳法，使用已有的条件信息，归纳推出待求的内容&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5.1.5 粗条细调思维&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;对于这道题，首先考察的是程序员的粗条细调思维。工程中经常会有对&lt;b&gt;测量精度&lt;/b&gt;的要求，那么是如何做的？比如常见的&lt;b&gt;千分尺&lt;/b&gt;，首先是一个横向的卡尺来接近目标值，然后用一个滚轮形的第二级继续细调。同样，显微镜也有对应的调整方法。都可以总结为&lt;code&gt;粗条细调思维&lt;/code&gt;&lt;/p&gt;&lt;p&gt;首先大步接近最优解，再调整迭代速度，更加细微的接近最优解。机器学习中的，Adam优化器也是用类似的思维来设计的&lt;/p&gt;&lt;h2&gt;&lt;b&gt;5.1.6 拆分思维&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;问题是否能拆分几个黑盒，只给输入输出，里面的逻辑链做到精简，或者&lt;b&gt;有已经可用的轮子&lt;/b&gt;和&lt;b&gt;算法&lt;/b&gt;直接应用的能力。&lt;/p&gt;&lt;blockquote&gt;能看到这的读者我衷心感谢您的求知欲和耐心（我写的比较啰嗦，为了权衡不同背景的读者），下面的一部分个人认为&lt;b&gt;才是最重要的&lt;/b&gt;&lt;/blockquote&gt;&lt;h2&gt;&lt;b&gt;5.2 工程应用&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;到了这一步，基本压榨了本题所有的潜力。但是，下一个值得思考的问题就是，这道题目对应的算法在&lt;b&gt;实际工程和解决问题的具体情况&lt;/b&gt;中有没有什么应用呢？答案是肯定的&lt;/p&gt;&lt;p&gt;⭐️ 如果要找学科分类，鸡蛋难题属于&lt;b&gt;运筹学问题&lt;/b&gt;，&lt;b&gt;典型应用是破坏性试验，如测试汽车、飞机、火箭等的若干极限性能。举个例子，汽车保全乘客安全的最高碰撞末速，那么为了保证能找这个值，一定会用类似的思路来解决问题。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;你可能也已经发现，&lt;b&gt;具体问题一定还是具体分析&lt;/b&gt;，但这道题目对应的工程思维更像是工具箱里面的一种&lt;b&gt;更强大的工具。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;记得罗辑思维中提过一个问题：为什么物理学领域老一辈的物理学家现在拿奖的人越来越少，其中一个重要的原因是他们&lt;b&gt;熟悉的物理学工具&lt;/b&gt;没有新生一辈的能力强大的。不同于数学这类逻辑学科，物理学是可验证学科，实验，测量工具和理论工具等都必不可少&lt;/p&gt;&lt;p&gt;博主笃定，算法&lt;b&gt;80%是要为解决问题服务的&lt;/b&gt;，勾起人们学习的最佳动力就是&lt;b&gt;举实际生活中遇到的难题是如何用这个算法解决&lt;/b&gt;。从这个侧面，有关&lt;b&gt;字符串的算法&lt;/b&gt;就非常能勾起学习的兴趣，正是因为涉及到字符串处理的情景太多。&lt;/p&gt;&lt;p&gt;关于鸡蛋难题，总的看下来，完美的诠释了直观 ➜ 抽象的思维链条。所有高效的，精简的算法，就是要&lt;b&gt;找到事物或者逻辑发生的本质规律&lt;/b&gt;，如果不谈完备性的证明，用&lt;b&gt;图表和直观的性质来描述&lt;/b&gt;，这道题目的优化思路并不难（相对的，完备性时间复杂度的证明才是难点）&lt;/p&gt;&lt;p&gt;关于剩下的20%，此时又想起&lt;a href=&quot;//link.zhihu.com/?target=https%3A//charlesliuyx.github.io/2018/09/20/%25E3%2580%2590%25E7%259B%25B4%25E8%25A7%2582%25E8%25AF%25A6%25E8%25A7%25A3%25E3%2580%2591%25E9%2580%259A%25E4%25BF%2597%25E6%2598%2593%25E6%2587%2582%25E4%25BA%2586%25E8%25A7%25A3%25E4%25BB%2580%25E4%25B9%2588%25E6%2598%25AF%25E9%25BB%258E%25E6%259B%25BC%25E7%258C%259C%25E6%2583%25B3/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;黎曼猜想&lt;/a&gt;，&lt;b&gt;所有&lt;/b&gt;非平凡零点的有关性质。&lt;code&gt;趋向于无穷&lt;/code&gt;、&lt;code&gt;所有&lt;/code&gt;、&lt;code&gt;任意&lt;/code&gt;这些定义方式是人类为了&lt;b&gt;寻找边界&lt;/b&gt;而设计的工具。趋向于无穷大，趋向于无穷小都还有很多问题没有解决。罗胖说，创业者是在&lt;b&gt;开垦商业的边疆&lt;/b&gt;，那么理论科学家就是拿着这些强大的工具开拓&lt;b&gt;逻辑和思维的边疆&lt;/b&gt;，在一片&lt;b&gt;荒芜上安营扎寨，仰望星空&lt;/b&gt;。这可能就是人类群体中&lt;b&gt;最有魅力的事业&lt;/b&gt;吧？&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;【参考文献】&lt;/p&gt;&lt;p&gt;非常感谢计算机信息学奥赛国家队朱前辈的论文，对这道题目做了完美的剖析，也勾起了我的好奇心，一探究竟，才有了这篇万字长文&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://www.zhihu.com/question/19690210/answer/18079633&quot; class=&quot;internal&quot;&gt;吴育昕的回答 - 知乎&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;//link.zhihu.com/?target=https%3A//github.com/ericliu859/AcmPaper/tree/master/%25E5%258A%25A8%25E6%2580%2581%25E8%25A7%2584%25E5%2588%2592/%25E4%25BC%2598%25E5%258C%2596/2004%2520-%2520%25E6%259C%25B1%25E6%2599%25A8%25E5%2585%2589%25EF%25BC%259A%25E3%2580%258A%25E4%25BC%2598%25E5%258C%2596%25EF%25BC%258C%25E5%2586%258D%25E4%25BC%2598%25E5%258C%2596%25EF%25BC%2581%25E2%2580%2594%25E2%2580%2594%25E4%25BB%258E%25E3%2580%258A%25E9%25B9%25B0%25E8%259B%258B%25E3%2580%258B%25E4%25B8%2580%25E9%25A2%2598%25E6%25B5%2585%25E6%259E%2590%25E5%25AF%25B9%25E5%258A%25A8%25E6%2580%2581%25E8%25A7%2584%25E5%2588%2592%25E7%25AE%2597%25E6%25B3%2595%25E7%259A%2584%25E4%25BC%2598%25E5%258C%2596%25E3%2580%258B&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;参考文献：朱晨光：《优化，再优化！——从《鹰蛋》一题浅析对动态规划算法的优化》&lt;/a&gt;&lt;/p&gt;</textarea>


<div class="zh-summary summary clearfix">
<img src="https://pic2.zhimg.com/50/v2-0d1c95011a11a5df7830f7e83dd9d3a0_200x112.jpg" data-caption="" data-size="normal" data-rawwidth="2474" data-rawheight="2156" data-watermark="watermark" data-original-src="v2-0d1c95011a11a5df7830f7e83dd9d3a0" data-watermark-src="v2-5cc93b9b1955124fac09af70c2477807" data-private-watermark-src="v2-bad6c6b412b603504e18074eeccabbd0" data-tags="flat_color" class="origin_image inline-img zh-lightbox-thumb" data-original="https://pic2.zhimg.com/50/v2-0d1c95011a11a5df7830f7e83dd9d3a0_r.jpg">
分享者是最大的受益者，感谢您的阅读，如果希望观看排版更完美的版本，欢迎移步<a href="//link.zhihu.com/?target=https%3A//charlesliuyx.github.io/" class=" wrap external" target="_blank" rel="nofollow noreferrer">我的个人博客</a>：<a href="//link.zhihu.com/?target=https%3A//charlesliuyx.github.io/2018/10/11/%25E3%2580%2590%25E7%259B%25B4%25E8%25A7%2582%25E7%25AE%2597%25E6%25B3%2595%25E3%2580%2591Egg%2520Puzzle%2520%25E9%25B8%25A1%25E8%259B%258B%25E9%259A%25BE%25E9%25A2%2598/" class=" wrap external" target="_blank" rel="nofollow noreferrer">【直观算法】Egg Puzzle 鸡蛋难题</a>，<a href="https://zhuanlan.zhihu.com/p/47184570" class="internal">系列文章</a>最近可能会有进一步更新，欢迎关注<a href="//link.zhihu.com/?target=https%3A//mubu.com/doc/3nIWmLzEPl" data-draft-node="block" data-draft-type="link-card" data-image="https://pic3.zhimg.com/v2-b04c2c25cb2465a1329ea2107cbd519a_ipico.jpg" data-image-width="200" data-image-height="200" class=" wrap external" target="_blank" rel="nofollow noreferrer">Chalresliuyx 博客目录</a>【先给答案】200层楼的最后答案：<b>最坏情况下的尝试次数是20次</b>…

<a href="/question/19690210/answer/514119129" class="toggle-expand">显示全部</a>

</div>



<p class="visible-expanded"><a itemprop="url" class="answer-date-link meta-item" data-tooltip="s$t$发布于 2018-10-19" target="_blank" href="/question/19690210/answer/514119129">编辑于 2018-11-28</a></p>

</div>
<div class="zm-item-meta answer-actions clearfix js-contentActions">
<div class="zm-meta-panel">

<a data-follow="q:link" class="follow-link zg-follow meta-item" href="javascript:;" id="sfb-56062"><i class="z-icon-follow"></i>关注问题</a>

<a href="#" name="addcomment" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>86 条评论</a>


<a href="#" class="meta-item zu-autohide js-thank" data-thanked="false"><i class="z-icon-thank"></i>感谢</a>



<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>

<a href="#" class="meta-item zu-autohide js-collect"><i class="z-icon-collect"></i>收藏</a>





<span class="zg-bull zu-autohide">&bull;</span>

<a href="#" class="meta-item zu-autohide js-noHelp">没有帮助</a>


<span class="zg-bull zu-autohide">&bull;</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>





<meta name="copyrightStatus" content="0">
<meta name="disableCopyAvatar" content="https://pic1.zhimg.com/v2-975a16ae0e101071b8f96297b738fa98_s.jpg">

<span class="zg-bull">&bull;</span>

<a href="/terms#sec-licence-6" target="_blank" class="meta-item copyright">禁止转载</a>


<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>

<div class="zm-item-meta-extra">
<a href="javascript:;" class="zg-unfollow" data-type="a" id="f-123546802-102128200" name="unfavo">取消收藏</a>
</div>

</div>
</div>





<div class="zm-item" data-type="Answer">
<h2 class="zm-item-title"><a target="_blank" href="/question/28062458">斐波那契数列为什么那么重要，所有关于数学的书几乎都会提到？</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-answer "
itemscope itemtype="http://schema.org/Answer"
data-aid="11297239"
data-atoken="39763094"
data-collapsed="0"
data-created="1423918273"
data-deleted="0"
data-isowner="0"
data-helpful="True"
data-copyable="0"
data-zop
>
<link itemprop="url" href="/question/28062458/answer/39763094">
<meta itemprop="answer-id" content="11297239">
<meta itemprop="answer-url-token" content="39763094">
<a class="zg-anchor-hidden" name="answer-11297239"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="javascript:;" data-bind-votecount>1446</a>
</div>

<div class="zm-votebar">
<button class="up pressed">
<i class="icon vote-arrow"></i>
<span class="count">1446</span>
<span class="label sr-only">赞同</span>
</button>
<button class="down ">
<i class="icon vote-arrow"></i>
<span class="label sr-only">反对</span>
</button>
</div>


<div class="answer-head">

<div class="zm-item-answer-author-info">

<span class="summary-wrapper">
<span class="author-link-line">

<a class="author-link"
data-hovercard="p$t$wang-xi-65-12"
target="_blank" href="/people/wang-xi-65-12"
>王希</a><span class="icon icon-badge-best_answerer icon-badge" data-tooltip="s$b$优秀回答者"></span></span><span class="badge-summary"><a href="/people/wang-xi-65-12#hilightbadge" target="_blank">数学话题优秀回答者</a></span>



<span title="学工科的数学爱好者，专业人士轻虐" class="bio">
学工科的数学爱好者，专业人士…
</span>
</span>
</div>

<div class="zm-item-vote-info" data-votecount="1446" data-async-voters="1">



<span class="voters text"><a href="#" class="more text"><span class="js-voteCount">1446</span>&nbsp;人赞同</a></span>


</div>
</div>
<div class="zm-item-rich-text expandable js-collapse-body" data-resourceid="3407605" data-action="/answer/content" data-author-name="王希" data-entry-url="/question/28062458/answer/39763094">

<textarea hidden class="content">一句话先回答问题：&lt;b&gt;因为斐波那契数列在数学和生活以及自然界中都非常有用。&lt;/b&gt;&lt;br&gt;&lt;br&gt;下面我就尽我所能，讲述一下斐波那契数列。&lt;br&gt;&lt;br&gt;&lt;b&gt;一、起源和定义&lt;/b&gt;&lt;br&gt;&lt;br&gt;斐波那契数列最早被提出是印度数学家Gopala，他在研究箱子包装物件长度恰好为1和2时的方法数时首先描述了这个数列。也就是这个问题：&lt;br&gt;&lt;br&gt;&lt;blockquote&gt;有n个台阶，你每次只能跨一阶或两阶，上楼有几种方法？&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;而最早研究这个数列的当然就是&lt;a href=&quot;//link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E6%2596%2590%25E6%25B3%25A2%25E9%2582%25A3%25E5%25A5%2591&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;斐波那契&lt;/a&gt;（Leonardo Fibonacci）了，他当时是为了描述如下情况的兔子生长数目：&lt;br&gt;&lt;br&gt;&lt;blockquote&gt;&lt;ul&gt;&lt;li&gt;第一个月初有一对刚诞生的兔子&lt;/li&gt;&lt;li&gt;第二个月之后（第三个月初）它们可以生育&lt;/li&gt;&lt;li&gt;每月每对可生育的兔子会诞生下一对新兔子&lt;/li&gt;&lt;li&gt;兔子永不死去&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/22769e1d6d4816eea15e0423271ba059_b.jpg&quot; data-rawwidth=&quot;531&quot; data-rawheight=&quot;298&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;531&quot; data-original=&quot;https://pic3.zhimg.com/50/22769e1d6d4816eea15e0423271ba059_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;这个数列出自他赫赫有名的大作《计算之书》（没有维基词条，坑），后来就被广泛的应用于各种场合了。这个数列是这么定义的：&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/46c741e0cab6469d7e1c54bc054947c9_b.jpg&quot; data-rawwidth=&quot;469&quot; data-rawheight=&quot;122&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;469&quot; data-original=&quot;https://pic1.zhimg.com/50/46c741e0cab6469d7e1c54bc054947c9_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;a href=&quot;//link.zhihu.com/?target=http%3A//oeis.org/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;The On-Line Encyclopedia of Integer Sequences® (OEIS®)&lt;/a&gt;序号为&lt;a href=&quot;//link.zhihu.com/?target=http%3A//oeis.org/A000045&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;A000045 - OEIS&lt;/a&gt;&lt;br&gt;&lt;br&gt;（注意，并非满足第三条的都是斐波那契数列，&lt;a href=&quot;//link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E5%258D%25A2%25E5%258D%25A1%25E6%2596%25AF%25E6%2595%25B0%25E5%2588%2597&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;卢卡斯数列&lt;/a&gt;（&lt;a href=&quot;//link.zhihu.com/?target=http%3A//oeis.org/A000032&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;A000032 - OEIS&lt;/a&gt;）也满足这一特点，但初始项定义不同）&lt;br&gt;&lt;br&gt;&lt;b&gt;二、求解方法&lt;/b&gt;&lt;br&gt;&lt;br&gt;讲完了定义，再来说一说如何求对应的项。斐波那契数列是编程书中讲递归必提的，因为它是按照递归定义的。所以我们就从递归开始讲起。&lt;br&gt;&lt;br&gt;1.递归求解&lt;br&gt;&lt;br&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br&gt;这是编程最方便的解法，当然，也是效率最低的解法，原因是会出现大量的重复计算。为了避免这种情况，可以采用递推的方式。&lt;br&gt;&lt;br&gt;2.递推求解&lt;br&gt;&lt;br&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br&gt;递推的方法可以在O(n)的时间内求出Fib(n)的值。但是这实际还是不够好，因为当n很大时这个算法还是无能为力的。接下来就要来讲一个有意思的东西：矩阵。&lt;br&gt;&lt;br&gt;3.矩阵递推关系&lt;br&gt;&lt;br&gt;学过代数的人可以看出，下面这个式子是成立的：&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D%0AFib%28n%2B1%29+%5C%5C%0AFib%28n%29%0A%5Cend+%7Bbmatrix%7D%0A%3D%5Cbegin%7Bbmatrix%7D%0A1%261+%5C%5C%0A1%260%0A%5Cend%7Bbmatrix%7D%0A%5Cbegin%7Bbmatrix%7D%0AFib%28n%29+%5C%5C%0AFib%28n-1%29%0A%5Cend%7Bbmatrix%7D&quot; alt=&quot;\begin{bmatrix}
Fib(n+1) \\
Fib(n)
\end {bmatrix}
=\begin{bmatrix}
1&amp;amp;1 \\
1&amp;amp;0
\end{bmatrix}
\begin{bmatrix}
Fib(n) \\
Fib(n-1)
\end{bmatrix}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;不停地利用这个式子迭代右边的列向量，会得到下面的式子：&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D%0AFib%28n%2B1%29+%5C%5C%0AFib%28n%29%0A%5Cend+%7Bbmatrix%7D%0A%3D%5Cbegin%7Bbmatrix%7D%0A1%261+%5C%5C%0A1%260%0A%5Cend%7Bbmatrix%7D%5E%7Bn%7D%0A%5Cbegin%7Bbmatrix%7D%0AFib%281%29+%5C%5C%0AFib%280%29%0A%5Cend%7Bbmatrix%7D&quot; alt=&quot;\begin{bmatrix}
Fib(n+1) \\
Fib(n)
\end {bmatrix}
=\begin{bmatrix}
1&amp;amp;1 \\
1&amp;amp;0
\end{bmatrix}^{n}
\begin{bmatrix}
Fib(1) \\
Fib(0)
\end{bmatrix}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;这样，问题就转化为如何计算这个矩阵的n次方了，可以采用快速幂的方法。&lt;a href=&quot;//link.zhihu.com/?target=http%3A//baike.baidu.com/link%3Furl%3Ddbyx1Lo9P_Ca2cRdKuttAobLhFrmlyfGuCYn1MnzHvOVu-QwilkS3guqyxSZNXIWxlW8s9IIPAgf2_swv093Hq&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;快速幂_百度百科&lt;/a&gt;是利用结合律快速计算幂次的方法。比如我要计算&lt;img src=&quot;//www.zhihu.com/equation?tex=2%5E%7B20%7D+&quot; alt=&quot;2^{20} &quot; eeimg=&quot;1&quot;&gt;，我们知道&lt;img src=&quot;//www.zhihu.com/equation?tex=2%5E%7B20%7D+%3D++2%5E%7B16%7D+%2A+2%5E%7B4%7D++&quot; alt=&quot;2^{20} =  2^{16} * 2^{4}  &quot; eeimg=&quot;1&quot;&gt;，而&lt;img src=&quot;//www.zhihu.com/equation?tex=2%5E%7B2%7D+&quot; alt=&quot;2^{2} &quot; eeimg=&quot;1&quot;&gt;可以通过&lt;img src=&quot;//www.zhihu.com/equation?tex=2%5E%7B1%7D+%5Ctimes+2%5E%7B1%7D+&quot; alt=&quot;2^{1} \times 2^{1} &quot; eeimg=&quot;1&quot;&gt;来计算，&lt;img src=&quot;//www.zhihu.com/equation?tex=2%5E%7B4%7D+&quot; alt=&quot;2^{4} &quot; eeimg=&quot;1&quot;&gt;而可以通过&lt;img src=&quot;//www.zhihu.com/equation?tex=2%5E%7B2%7D%5Ctimes+2%5E%7B2%7D++&quot; alt=&quot;2^{2}\times 2^{2}  &quot; eeimg=&quot;1&quot;&gt;计算，以此类推。通过这种方法，可以在O（lbn）的时间里计算出一个数的n次幂。快速幂的代码如下：&lt;br&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Qpow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;将上述代码中的整型变量a变成矩阵，数的乘法变成矩阵乘法，就是矩阵快速幂了。比如用矩阵快速幂计算斐波那契数列：&lt;br&gt;&lt;br&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;cstdio&amp;gt;&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;iostream&amp;gt;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MOD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//定义矩阵结构体&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//定义矩阵乘法&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MOD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fast_mod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// 求矩阵 base 的  n 次幂 &lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// ans 初始化为单位矩阵 &lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//实现 ans *= t; 其中要先把 ans赋值给 tmp，然后用 ans = tmp * t &lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ans&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;   
        &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fast_mod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br&gt;4.通项公式&lt;br&gt;&lt;br&gt;无论如何，对于一个数列，我们都是希望可以建立&lt;img src=&quot;//www.zhihu.com/equation?tex=F%28n%29&quot; alt=&quot;F(n)&quot; eeimg=&quot;1&quot;&gt;与n的关系，也就是通项公式，而用不同方法去求解通项公式也是很有意思的。&lt;br&gt;&lt;br&gt;（1）构造等比数列&lt;br&gt;&lt;br&gt;设&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28n%29+%2B+%5Calpha+f%28n-1%29+%3D+%5Cbeta+%5Bf%28n-1%29+%2B+%5Calpha+f%28n-2%29%5D&quot; alt=&quot;f(n) + \alpha f(n-1) = \beta [f(n-1) + \alpha f(n-2)]&quot; eeimg=&quot;1&quot;&gt;,&lt;br&gt;化简得&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28n%29%3D%28%5Cbeta+-%5Calpha+%29f%28n-1%29%2B%5Calpha+%5Cbeta+f%28n-2%29&quot; alt=&quot;f(n)=(\beta -\alpha )f(n-1)+\alpha \beta f(n-2)&quot; eeimg=&quot;1&quot;&gt;,&lt;br&gt;比较系数得&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cbeta+-%5Calpha+%3D1%2C%5Calpha+%5Cbeta+%3D1&quot; alt=&quot;\beta -\alpha =1,\alpha \beta =1&quot; eeimg=&quot;1&quot;&gt;，&lt;br&gt;解得&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Calpha+%3D%5Cfrac%7B%5Csqrt%7B5%7D-1+%7D%7B2%7D+&quot; alt=&quot;\alpha =\frac{\sqrt{5}-1 }{2} &quot; eeimg=&quot;1&quot;&gt;，&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cbeta++%3D%5Cfrac%7B%5Csqrt%7B5%7D%2B1+%7D%7B2%7D+&quot; alt=&quot;\beta  =\frac{\sqrt{5}+1 }{2} &quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;由于&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28n%2B1%29%2B%5Calpha+f%28n%29%3D%5Bf%282%29%2B%5Calpha+f%281%29%5D%5Cbeta+%5E%7Bn-1%7D+%3D%5Cbeta+%5E%7Bn%7D+&quot; alt=&quot;f(n+1)+\alpha f(n)=[f(2)+\alpha f(1)]\beta ^{n-1} =\beta ^{n} &quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;故有&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cfrac%7Bf%28n%2B1%29%7D%7B%5Cbeta+%5E%7Bn%2B1%7D%7D+%2B%5Cfrac%7B%5Calpha%7D%7B%5Cbeta+%7D+%5Cfrac%7Bf%28n%29%7D%7B%5Cbeta+%5E%7Bn%7D+%7D+%3D%5Cfrac%7B1%7D%7B%5Cbeta+%7D+&quot; alt=&quot;\frac{f(n+1)}{\beta ^{n+1}} +\frac{\alpha}{\beta } \frac{f(n)}{\beta ^{n} } =\frac{1}{\beta } &quot; eeimg=&quot;1&quot;&gt;，设&lt;img src=&quot;//www.zhihu.com/equation?tex=g%28n%29%3D%5Cfrac%7Bf%28n%29%7D%7B%5Cbeta+%5E%7Bn%7D%7D+&quot; alt=&quot;g(n)=\frac{f(n)}{\beta ^{n}} &quot; eeimg=&quot;1&quot;&gt;.则有&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=g%28n%2B1%29%2B%5Cfrac%7B%5Calpha+%7D%7B%5Cbeta+%7D+g%28n%29%3D%5Cfrac%7B1%7D%7B%5Cbeta+%7D+&quot; alt=&quot;g(n+1)+\frac{\alpha }{\beta } g(n)=\frac{1}{\beta } &quot; eeimg=&quot;1&quot;&gt;,设&lt;img src=&quot;//www.zhihu.com/equation?tex=g%28n%2B1%29%2B%5Clambda+%3D-%5Cfrac%7B%5Calpha+%7D%7B%5Cbeta+%7D+%28g%28n%29%2B%5Clambda+%29&quot; alt=&quot;g(n+1)+\lambda =-\frac{\alpha }{\beta } (g(n)+\lambda )&quot; eeimg=&quot;1&quot;&gt;,&lt;br&gt;解得&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Clambda+%3D-%5Cfrac%7B1%7D%7B%5Calpha+%2B%5Cbeta+%7D+&quot; alt=&quot;\lambda =-\frac{1}{\alpha +\beta } &quot; eeimg=&quot;1&quot;&gt;，即{&lt;img src=&quot;//www.zhihu.com/equation?tex=g%28n%29%2B%5Clambda+&quot; alt=&quot;g(n)+\lambda &quot; eeimg=&quot;1&quot;&gt;}是等比数列。这样就有&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=g%28n%29%2B%5Clambda%3D%28-%5Cfrac%7B%5Calpha+%7D%7B%5Cbeta+%7D+%29%5E%7Bn-1%7D++%28%5Cfrac%7B1%7D%7B%5Cbeta+%7D+%2B%5Clambda+%29&quot; alt=&quot;g(n)+\lambda=(-\frac{\alpha }{\beta } )^{n-1}  (\frac{1}{\beta } +\lambda )&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;到了现在，把上述解出的结果全部带入上式，稍作变形，我们就可以写出斐波那契数列的通项公式了&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28n%29%3D%5Cfrac%7B1%7D%7B%5Csqrt%7B5%7D+%7D+%5B%28%5Cfrac%7B1%2B%5Csqrt%7B5%7D+%7D%7B2%7D+%29%5E%7Bn%7D-%28%5Cfrac%7B1-%5Csqrt%7B5%7D+%7D%7B2%7D+%29%5E%7Bn%7D%5D&quot; alt=&quot;f(n)=\frac{1}{\sqrt{5} } [(\frac{1+\sqrt{5} }{2} )^{n}-(\frac{1-\sqrt{5} }{2} )^{n}]&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;这个方法还是比较麻烦的，但是非常基础。事实上还有其他更简单的方法。&lt;br&gt;&lt;br&gt;（2）线性代数解法&lt;br&gt;这个解法首先用到&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D%0AFib%28n%2B1%29+%5C%5C%0AFib%28n%29%0A%5Cend+%7Bbmatrix%7D%0A%3D%5Cbegin%7Bbmatrix%7D%0A1%261+%5C%5C%0A1%260%0A%5Cend%7Bbmatrix%7D%5E%7Bn%7D%0A%5Cbegin%7Bbmatrix%7D%0AFib%281%29+%5C%5C%0AFib%280%29%0A%5Cend%7Bbmatrix%7D&quot; alt=&quot;\begin{bmatrix}
Fib(n+1) \\
Fib(n)
\end {bmatrix}
=\begin{bmatrix}
1&amp;amp;1 \\
1&amp;amp;0
\end{bmatrix}^{n}
\begin{bmatrix}
Fib(1) \\
Fib(0)
\end{bmatrix}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;br&gt;公式，如果可以找到矩阵&lt;img src=&quot;//www.zhihu.com/equation?tex=P&quot; alt=&quot;P&quot; eeimg=&quot;1&quot;&gt;使得&lt;img src=&quot;//www.zhihu.com/equation?tex=PAP%5E%7B-1%7D&quot; alt=&quot;PAP^{-1}&quot; eeimg=&quot;1&quot;&gt;为对角阵，我们就可以求出通项。下面需要一些高等代数知识，没学过的可直接跳过。&lt;br&gt;首先令&lt;img src=&quot;//www.zhihu.com/equation?tex=%7C%5Clambda+E-A%7C%3D0&quot; alt=&quot;|\lambda E-A|=0&quot; eeimg=&quot;1&quot;&gt;,解得两个特征根&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Clambda_%7B1%7D%3D%5Cfrac%7B1-%5Csqrt%7B5%7D+%7D%7B2%7D+%2C%0A%5Clambda_%7B2%7D%3D%5Cfrac%7B1%2B%5Csqrt%7B5%7D+%7D%7B2%7D++&quot; alt=&quot;\lambda_{1}=\frac{1-\sqrt{5} }{2} ,
\lambda_{2}=\frac{1+\sqrt{5} }{2}  &quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;两个特征向量为&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Calpha+_%7B1%7D%3D%5B1%2C%5Cfrac%7B1%2B%5Csqrt%7B5%7D+%7D%7B2%7D+%5D+%5E%7BT%7D%2C%5Calpha+_%7B2%7D%3D%5B1%2C%5Cfrac%7B-1%2B%5Csqrt%7B5%7D+%7D%7B2%7D+%5D+%5E%7BT%7D%2C&quot; alt=&quot;\alpha _{1}=[1,\frac{1+\sqrt{5} }{2} ] ^{T},\alpha _{2}=[1,\frac{-1+\sqrt{5} }{2} ] ^{T},&quot; eeimg=&quot;1&quot;&gt;则&lt;br&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=P%3D%5Cbegin%7Bbmatrix%7D%0A1%261+%5C%5C%0A%5Cfrac%7B1%2B%5Csqrt%7B5%7D%7D%7B2%7D+%26+%5Cfrac%7B%5Csqrt%7B5%7D-1%7D%7B2%7D%0A%5Cend%7Bbmatrix%7D%2C%0AP%5E%7B-1%7D%3D%5Cbegin%7Bbmatrix%7D%0A%5Cfrac%7B1-%5Csqrt%7B5%7D%7D%7B2%7D%261+%5C%5C%0A%5Cfrac%7B1%2B%5Csqrt%7B5%7D%7D%7B2%7D%26-1%0A%5Cend%7Bbmatrix%7D&quot; alt=&quot;P=\begin{bmatrix}
1&amp;amp;1 \\
\frac{1+\sqrt{5}}{2} &amp;amp; \frac{\sqrt{5}-1}{2}
\end{bmatrix},
P^{-1}=\begin{bmatrix}
\frac{1-\sqrt{5}}{2}&amp;amp;1 \\
\frac{1+\sqrt{5}}{2}&amp;amp;-1
\end{bmatrix}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;而&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%28PAP%5E%7B-1%7D%29%5E%7Bn%7D%3DPAP%5E%7B-1%7DPAP%5E%7B-1%7D...PAP%5E%7B-1%7D%3DPA%28P%5E%7B-1%7DP%29A%28P%5E%7B-1%7DP%29A...AP%5E%7B-1%7D%3DPA%5E%7Bn%7DP%5E%7B-1%7D&quot; alt=&quot;(PAP^{-1})^{n}=PAP^{-1}PAP^{-1}...PAP^{-1}=PA(P^{-1}P)A(P^{-1}P)A...AP^{-1}=PA^{n}P^{-1}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;解出&lt;img src=&quot;//www.zhihu.com/equation?tex=A%5E%7Bn%7D%3DP%5E%7B-1%7D%28PAP%5E%7B-1%7D%29%5E%7Bn%7DP&quot; alt=&quot;A^{n}=P^{-1}(PAP^{-1})^{n}P&quot; eeimg=&quot;1&quot;&gt;,中间矩阵的n次方可以直接求出来：&lt;br&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D%0A%5Cfrac+%7B1-%5Csqrt%7B5%7D%7D%7B2%7D%260+%5C%5C%0A0%26%5Cfrac+%7B1%2B%5Csqrt%7B5%7D%7D%7B2%7D%0A%5Cend%7Bbmatrix%7D%5E%7Bn%7D%3D%0A%5Cbegin%7Bbmatrix%7D%0A%28%5Cfrac+%7B1-%5Csqrt%7B5%7D%7D%7B2%7D%29%5E%7Bn%7D%260%5C%5C%0A0%26%28%5Cfrac+%7B1%2B%5Csqrt%7B5%7D%7D%7B2%7D%29%5En%0A%5Cend%7Bbmatrix%7D&quot; alt=&quot;\begin{bmatrix}
\frac {1-\sqrt{5}}{2}&amp;amp;0 \\
0&amp;amp;\frac {1+\sqrt{5}}{2}
\end{bmatrix}^{n}=
\begin{bmatrix}
(\frac {1-\sqrt{5}}{2})^{n}&amp;amp;0\\
0&amp;amp;(\frac {1+\sqrt{5}}{2})^n
\end{bmatrix}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;br&gt;然后可以轻易得到通项公式，上边已经给出，这里不再赘述。&lt;br&gt;&lt;br&gt;（3）特征方程解法&lt;br&gt;&lt;br&gt;通过方法（2），我们可以推导出一般的线性递推数列的通项求解方法，也就是特征方程法。我们可以发现，对于这种数列，通项总是可以表示为&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28n%29%3DC_%7B1%7D+%5Clambda+_%7B1%7D%5E%7Bn%7D+%2BC_%7B2%7D+%5Clambda+_%7B2%7D%5E%7Bn%7D&quot; alt=&quot;f(n)=C_{1} \lambda _{1}^{n} +C_{2} \lambda _{2}^{n}&quot; eeimg=&quot;1&quot;&gt;的形式，因此可以直接利用已知项求解&lt;img src=&quot;//www.zhihu.com/equation?tex=C_%7B1%7D&quot; alt=&quot;C_{1}&quot; eeimg=&quot;1&quot;&gt;，&lt;img src=&quot;//www.zhihu.com/equation?tex=C_%7B2%7D+&quot; alt=&quot;C_{2} &quot; eeimg=&quot;1&quot;&gt;。具体做法如下：&lt;br&gt;&lt;br&gt;a.由递推数列构造特征方程&lt;img src=&quot;//www.zhihu.com/equation?tex=x%5E%7B2%7D%3Dx%2B1&quot; alt=&quot;x^{2}=x+1&quot; eeimg=&quot;1&quot;&gt;，解出两个特征值&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Clambda_%7B1%7D%3D%5Cfrac%7B1-%5Csqrt%7B5%7D+%7D%7B2%7D+%2C%0A%5Clambda_%7B2%7D%3D%5Cfrac%7B1%2B%5Csqrt%7B5%7D+%7D%7B2%7D++&quot; alt=&quot;\lambda_{1}=\frac{1-\sqrt{5} }{2} ,
\lambda_{2}=\frac{1+\sqrt{5} }{2}  &quot; eeimg=&quot;1&quot;&gt;。&lt;br&gt;&lt;br&gt;b.带入&lt;img src=&quot;//www.zhihu.com/equation?tex=f%280%29%2Cf%281%29&quot; alt=&quot;f(0),f(1)&quot; eeimg=&quot;1&quot;&gt;,列出如下方程：&lt;br&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=C_%7B1%7D+%2BC_%7B1%7D+%3D0&quot; alt=&quot;C_{1} +C_{1} =0&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cfrac%7B1-%5Csqrt%7B5%7D+%7D%7B2%7D+C_%7B1%7D+%2B%5Cfrac%7B1%2B%5Csqrt%7B5%7D+%7D%7B2%7D+C_%7B2%7D+%3D1&quot; alt=&quot;\frac{1-\sqrt{5} }{2} C_{1} +\frac{1+\sqrt{5} }{2} C_{2} =1&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;br&gt;解得&lt;img src=&quot;//www.zhihu.com/equation?tex=C_%7B1%7D+%3D-%5Cfrac%7B1%7D%7B%5Csqrt%7B5%7D+%7D+%2CC_%7B2%7D+%3D%5Cfrac%7B1%7D%7B%5Csqrt%7B5%7D+%7D+.&quot; alt=&quot;C_{1} =-\frac{1}{\sqrt{5} } ,C_{2} =\frac{1}{\sqrt{5} } .&quot; eeimg=&quot;1&quot;&gt;这样直接写出通项公式，是比较简单的做法。&lt;br&gt;&lt;br&gt;（4）母函数法（此方法涉及组合数学知识）&lt;br&gt;&lt;br&gt;设斐波那契数列的母函数为&lt;img src=&quot;//www.zhihu.com/equation?tex=G%28x%29&quot; alt=&quot;G(x)&quot; eeimg=&quot;1&quot;&gt;,即&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=G%28x%29%3DF_%7B0%7D+%2BF_%7B1%7Dx%2BF_%7B2%7Dx%5E%7B2%7D%2BL%2BF_%7Bn%7Dx%5E%7Bn%7D&quot; alt=&quot;G(x)=F_{0} +F_{1}x+F_{2}x^{2}+L+F_{n}x^{n}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%3D1%2Bx%2B%28F_%7B0%7D%2BF_%7B1%7D%29x%5E%7B2%7D%2BL%2B%28F_%7Bn-1%7D+%2BF_%7Bn-2%7D%29x%5E%7Bn%7D&quot; alt=&quot;=1+x+(F_{0}+F_{1})x^{2}+L+(F_{n-1} +F_{n-2})x^{n}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%3D1%2B%28x%2BF_%7B1%7Dx%5E%7B2%7D%2BF_%7B2%7Dx%5E%7B3%7D%2BL%2B%29%2B%28F_%7B0%7Dx%5E%7B2%7D%2BF_%7B1%7Dx%5E3%2BL%29&quot; alt=&quot;=1+(x+F_{1}x^{2}+F_{2}x^{3}+L+)+(F_{0}x^{2}+F_{1}x^3+L)&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%3D1%2B%28x%2Bx%5E%7B2%7D%29G%28x%29&quot; alt=&quot;=1+(x+x^{2})G(x)&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;解得&lt;img src=&quot;//www.zhihu.com/equation?tex=G%28x%29%3D%5Cfrac%7B1%7D%7B1-x-x%5E%7B2%7D%7D+%3D%5Cfrac%7B1%7D%7B%5Csqrt%7B5%7D+%7D+%5Cfrac%7B1%2B%5Csqrt%7B5%7D+%7D%7B2%7D%5Cfrac%7B1%7D%7B1-%5Cfrac%7B1%2B%5Csqrt%7B5%7D+%7D%7B2%7Dx%7D+-%5Cfrac%7B1%7D%7B%5Csqrt%7B5%7D+%7D+%5Cfrac%7B1-%5Csqrt%7B5%7D+%7D%7B2%7D%5Cfrac%7B1%7D%7B1-%5Cfrac%7B1-%5Csqrt%7B5%7D+%7D%7B2%7Dx%7D&quot; alt=&quot;G(x)=\frac{1}{1-x-x^{2}} =\frac{1}{\sqrt{5} } \frac{1+\sqrt{5} }{2}\frac{1}{1-\frac{1+\sqrt{5} }{2}x} -\frac{1}{\sqrt{5} } \frac{1-\sqrt{5} }{2}\frac{1}{1-\frac{1-\sqrt{5} }{2}x}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;br&gt;再由幂级数展开公式&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Cfrac%7B1%7D%7B1-x%7D%3D1%2Bx%2Bx%5E%7B2%7D%2B&quot; alt=&quot;\frac{1}{1-x}=1+x+x^{2}+&quot; eeimg=&quot;1&quot;&gt;……&lt;br&gt;&lt;br&gt;合并同类项并与&lt;img src=&quot;//www.zhihu.com/equation?tex=G%28x%29&quot; alt=&quot;G(x)&quot; eeimg=&quot;1&quot;&gt;的系数比较即可。&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;到这里，求解斐波那契数列通项的方法就说的差不多了。无论是计算机求解还是数学推导，都体现出了非常多的技巧。而斐波那契数列的许多特性，就更加有意思了。&lt;br&gt;&lt;br&gt;&lt;b&gt;三、斐波那契数列的数学性质&lt;/b&gt;&lt;br&gt;&lt;br&gt;1.与黄金比的关系&lt;br&gt;&lt;br&gt;由通项公式，求相邻两项的商的极限，结果是黄金比，所以斐波那契数列又称为黄金比数列。斐波那契数列和黄金比还和一个有趣的数学概念——连分数有关：&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/b5512d2d545c9254d7f170cfc83e3913_b.jpg&quot; data-rawwidth=&quot;355&quot; data-rawheight=&quot;139&quot; class=&quot;content_image&quot; width=&quot;355&quot;&gt;&lt;/figure&gt;2.一些简单的规律&lt;br&gt;&lt;br&gt;（1）任意连续四个斐波那契数，可以构造出一个毕达哥拉斯三元组。如取1,1,2,3.&lt;br&gt;中间两数相乘再乘2 ==》 4&lt;br&gt;外层2数乘积==》3&lt;br&gt;中间两数平方和==》5&lt;br&gt;得到3,4,5.&lt;br&gt;下一组是5,12,13,，有兴趣的读者可以再试着推一推，证明也是容易的。&lt;br&gt;&lt;br&gt;（2）整除性&lt;br&gt;&lt;br&gt;&lt;p&gt;每3个连续的斐波那契数有且只有一个被2整除，&lt;/p&gt;&lt;br&gt;&lt;p&gt;每4个连续的斐波那契数有且只有一个被3整除，&lt;/p&gt;&lt;br&gt;&lt;p&gt;每5个连续的斐波那契数有且只有一个被5整除，&lt;/p&gt;&lt;br&gt;&lt;p&gt;每6个连续的斐波那契数有且只有一个被8整除，&lt;/p&gt;&lt;br&gt;&lt;p&gt;每7个连续的斐波那契数有且只有一个被13整除，&lt;/p&gt;&lt;p&gt;…………&lt;/p&gt;&lt;p&gt;每n个连续的斐波那契数有且只有一个被&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28n%29&quot; alt=&quot;f(n)&quot; eeimg=&quot;1&quot;&gt;整除.&lt;br&gt;&lt;/p&gt;&lt;br&gt;&lt;p&gt;（3）一些恒等式&lt;/p&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/f004b9e50771b001488ada9b8101ffa3_b.jpg&quot; data-rawwidth=&quot;532&quot; data-rawheight=&quot;519&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;532&quot; data-original=&quot;https://pic2.zhimg.com/50/f004b9e50771b001488ada9b8101ffa3_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;&lt;p&gt;3.杨辉三角中的斐波那契数列&lt;/p&gt;&lt;br&gt;&lt;p&gt;如图所示，每条斜线上的数的和就构成斐波那契数列。&lt;/p&gt;&lt;p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/5375154a2dd81f73810be5f04f0ab92f_b.jpg&quot; data-rawwidth=&quot;690&quot; data-rawheight=&quot;381&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;690&quot; data-original=&quot;https://pic4.zhimg.com/50/5375154a2dd81f73810be5f04f0ab92f_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;即有&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28n%29%3DC_%7Bn-1%7D%5E%7B0%7D+%2BC_%7Bn-2%7D%5E%7B1%7D%2BL%2BC_%7Bn-1-m%7D%5E%7Bm%7D&quot; alt=&quot;f(n)=C_{n-1}^{0} +C_{n-2}^{1}+L+C_{n-1-m}^{m}&quot; eeimg=&quot;1&quot;&gt;&lt;/p&gt;&lt;br&gt;&lt;p&gt;4.相关数列：卢卡斯（Lucas）数列&lt;/p&gt;&lt;br&gt;&lt;p&gt;卢卡斯数列的定义除了第0项为2之外，与斐波那契数列完全一致。即&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/7bb4261db78aa59a6df1b75c06ceae49_b.jpg&quot; data-rawwidth=&quot;447&quot; data-rawheight=&quot;93&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;447&quot; data-original=&quot;https://pic1.zhimg.com/50/7bb4261db78aa59a6df1b75c06ceae49_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;p&gt;其通项公式为：&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/29b686835dc793b6e5e4cb75f83ba8f0_b.jpg&quot; data-rawwidth=&quot;323&quot; data-rawheight=&quot;85&quot; class=&quot;content_image&quot; width=&quot;323&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;p&gt;卢卡斯数列和斐波那契数列有这些关系：&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=F_%7B2n%7D%3DF_%7Bn%7DL_%7Bn%7D+&quot; alt=&quot;F_{2n}=F_{n}L_{n} &quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=5F_%7Bn%7D%3DL_%7Bn-1%7D%2BL_%7Bn%2B1%7D&quot; alt=&quot;5F_{n}=L_{n-1}+L_{n+1}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=L_%7Bn%7D%5E%7B2%7D%3D5+F_%7Bn%7D%5E%7B2%7D%2B4%28-1%29%5E%7Bn%7D&quot; alt=&quot;L_{n}^{2}=5 F_{n}^{2}+4(-1)^{n}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%5Clim_%7Bn+%5Crightarrow+%5Cinfty+%7D%7B%5Cfrac%7BL_%7Bn%7D%7D%7BF_%7Bn%7D%7D+%7D+%3D%5Csqrt%7B5%7D+&quot; alt=&quot;\lim_{n \rightarrow \infty }{\frac{L_{n}}{F_{n}} } =\sqrt{5} &quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=L_%7Bn%7D%3DF_%7Bn-1%7D%2BF_%7Bn%2B1%7D&quot; alt=&quot;L_{n}=F_{n-1}+F_{n+1}&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;p&gt;5.组合数学&lt;/p&gt;&lt;br&gt;&lt;p&gt;（1）一些恒等式&lt;/p&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/46aacf48efabb3187a177610d3e9cb30_b.jpg&quot; data-rawwidth=&quot;482&quot; data-rawheight=&quot;481&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;482&quot; data-original=&quot;https://pic3.zhimg.com/50/46aacf48efabb3187a177610d3e9cb30_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;p&gt;（2）同余特性&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=%28F%28m%29%2CF%28n%29%29%3D%28m%2Cn%29&quot; alt=&quot;(F(m),F(n))=(m,n)&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=F%28m%29%7CF%28n%29%5CLeftrightarrow+m%7Cn&quot; alt=&quot;F(m)|F(n)\Leftrightarrow m|n&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;p&gt;当p为大于5的素数时，有：&lt;/p&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=F%28p-%28%5Cfrac%7Bp%7D%7B5%7D%29%29%5Cequiv+0%28modp%29+&quot; alt=&quot;F(p-(\frac{p}{5}))\equiv 0(modp) &quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=F%28p%29%5Cequiv+%28%5Cfrac%7Bp%7D%7B5%7D%29+%28modp%29+&quot; alt=&quot;F(p)\equiv (\frac{p}{5}) (modp) &quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;img src=&quot;//www.zhihu.com/equation?tex=F%28p%2B%28%5Cfrac%7Bp%7D%7B5%7D%29%29%5Cequiv+1%28modp%29+&quot; alt=&quot;F(p+(\frac{p}{5}))\equiv 1(modp) &quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;&lt;p&gt;其中&lt;/p&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/62620900b7c8f7b1698a7ec538c87987_b.jpg&quot; data-rawwidth=&quot;275&quot; data-rawheight=&quot;61&quot; class=&quot;content_image&quot; width=&quot;275&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;p&gt;斐波那契数列还有许许多多的性质，我就不再一一介绍了。跑题了这么久，终于开始要真正回答问题了：斐波那契数列有什么用？&lt;/p&gt;&lt;br&gt;&lt;p&gt;&lt;b&gt;四、斐波那契数列的应用&lt;/b&gt;&lt;/p&gt;&lt;br&gt;&lt;p&gt;1.算法&lt;/p&gt;&lt;p&gt;a.斐波那契堆&lt;/p&gt;&lt;br&gt;&lt;blockquote&gt;&lt;p&gt;斐波那契堆(Fibonacci heap)是计算机科学中最小堆有序树的集合。它和二项式堆有类似的性质，可用于实现合并优先队列。特点是不涉及删除元素的操作有O(1)的平摊时间，用途包括稠密图每次Decrease－key只要O(1)的平摊时间，和二项堆的O(lgn)相比是巨大的改进。&lt;br&gt;&lt;/p&gt;&lt;br&gt;&lt;p&gt;斐波那契堆由一组最小堆构成，这些最小堆是有根的无序树。可以进行插入、查找、合并和删除等操作&lt;/p&gt;&lt;p&gt;1）插入：创建一个仅包含一个节点的新的斐波纳契堆，然后执行堆合并&lt;/p&gt;&lt;p&gt;2）查找：由于用一个指针指向了具有最小值的根节点，因此查找最小的节点是平凡的操作。&lt;/p&gt;&lt;p&gt;3）合并：简单合并两个斐波纳契堆的根表。即把两个斐波纳契堆的所有树的根首尾衔接并置。&lt;/p&gt;&lt;p&gt;4）删除（释放）最小节点&lt;/p&gt;&lt;p&gt;分为三步：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;查找最小的根节点并删除它，其所有的子节点都加入堆的根表，即它的子树都成为堆所包含的树；&lt;/li&gt;&lt;li&gt;需要查找并维护堆的最小根节点，但这耗时较大。为此，同时完成堆的维护：对堆当前包含的树的度数从低到高，迭代执行具有相同度数的树的合并并实现最小树化调整，使得堆包含的树具有不同的度数。这一步使用一个数组，数组下标为根节点的度数，数组的值为指向该根节点指针。如果发现具有相同度数的其他根节点则合并两棵树并维护该数组的状态。&lt;/li&gt;&lt;li&gt;对当前堆的所有根节点查找最小的根节点。&lt;/li&gt;&lt;/ol&gt;5）降低一个点的键值：对一个节点的键值降低后，自键值降低的节点开始自下而上的迭代执行下述操作，直至到根节点或一个未被标记（marked）节点为止：&lt;br&gt;&lt;p&gt;如果当前节点键值小于其父节点的键值，则把该节点及其子树摘下来作为堆的新树的根节点；其原父节点如果是被标记（marked）节点，则也被摘下来作为堆的新树的根节点；如果其原父节点不是被标记（marked）节点且不是根节点，则其原父节点被加标记。&lt;/p&gt;&lt;p&gt;如果堆的新树的根节点被标记（marked），则去除该标记。&lt;/p&gt;&lt;p&gt;6）删除节点：把被删除节点的键值调整为负无穷小，然后执行“降低一个节点的键值”算法，然后再执行“删除最小节点”算法。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;//link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E6%2596%2590%25E6%25B3%25A2%25E9%2582%25A3%25E5%25A5%2591%25E5%25A0%2586&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;斐波那契堆&lt;/a&gt;&lt;br&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;br&gt;b.欧几里得算法的时间复杂度&lt;br&gt;&lt;br&gt;欧几里得算法是求解两个正整数最大公约数的算法，又称辗转相除法。代码如下：&lt;br&gt;&lt;br&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;gcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br&gt;在最坏的情况下，我们可以证明，若a较小，需要计算的次数为n，则&lt;img src=&quot;//www.zhihu.com/equation?tex=a%3EF%28n-1%29&quot; alt=&quot;a&amp;gt;F(n-1)&quot; eeimg=&quot;1&quot;&gt;.虽然说一般分析的时候会当成对数阶，但数论最常用的欧几里得算法竟然与斐波那契数列有关，也确实是很让人吃惊呢。&lt;br&gt;&lt;br&gt;2.物理学：氢原子能级问题&lt;br&gt;&lt;br&gt;&lt;blockquote&gt;&lt;p&gt;假定我们现在有一些氢气原子，一个电子最初所处的位置是最低的能级（Ground lever of energy），属于稳定状态。它能获得一个能量子或二个能量子（Quanta of energy）而使它上升到第一能级或者第二能级。但是在第一级的电子如失掉一个能量子就会下降到最低能级，它如获得一个能量子就会上升到第二级来。&lt;/p&gt;&lt;br&gt;&lt;p&gt;现在研究气体吸收和放出能量的情形，假定最初电子是处在稳定状态即零能级，然后让它吸收能量，这电子可以跳到第1能级或第2能级。然后再让这气体放射能量，这时电子在1级能级的就要下降到0能级，而在第2能级的可能下降到0能级或者第1能级的位置去。&lt;/p&gt;&lt;br&gt;&lt;p&gt;电子所处的状态可能的情形是：1、2、3、5、8、13、21…种。这是斐波那契数列的一部份。&lt;br&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;br&gt;3.自然界：植物的生长&lt;br&gt;&lt;br&gt;科学家发现，一些植物的花瓣、萼片、果实的数目以及排列的方式上，都有一个神奇的规律，它们都非常符合著名的斐波那契数列。例如：蓟，它们的头部几乎呈球状。在下图中，你可以看到两条不同方向的螺旋。我们可以数一下，顺时针旋转的（和左边那条旋转方向相同）螺旋一共有13条，而逆时针旋转的则有21条。此外还有菊花、向日葵、松果、菠萝等都是按这种方式生长的。&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/8725bc7f599bb88e0bf3343e4cd1c466_b.jpg&quot; data-rawwidth=&quot;298&quot; data-rawheight=&quot;293&quot; class=&quot;content_image&quot; width=&quot;298&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/1c0bf51aa055b413249d680d675d5c28_b.jpg&quot; data-rawwidth=&quot;374&quot; data-rawheight=&quot;327&quot; class=&quot;content_image&quot; width=&quot;374&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;还有菠萝、松子等，也都符合这个特点，一般会出现34,55，89和144这几个数字。&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/dc8bdf9d021a9fd66529c3e29ea46f1b_b.jpg&quot; data-rawwidth=&quot;229&quot; data-rawheight=&quot;198&quot; class=&quot;content_image&quot; width=&quot;229&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/505000f930c06779e71e0a6075f2a4b9_b.jpg&quot; data-rawwidth=&quot;193&quot; data-rawheight=&quot;191&quot; class=&quot;content_image&quot; width=&quot;193&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/204623ec5130de68d1de6d4b86dc52eb_b.jpg&quot; data-rawwidth=&quot;199&quot; data-rawheight=&quot;190&quot; class=&quot;content_image&quot; width=&quot;199&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;最后上一张“斐波那契树”的图片：&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/6c4a54fba4c66143abb03c54033a1a52_b.jpg&quot; data-rawwidth=&quot;250&quot; data-rawheight=&quot;247&quot; class=&quot;content_image&quot; width=&quot;250&quot;&gt;&lt;/figure&gt;是的，这玩意就长这样，这种植物是存在的。&lt;br&gt;&lt;br&gt;4.波浪理论与股市&lt;br&gt;&lt;br&gt;这个答主不懂，大家可自行阅读文章&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.sbo8.com/bolanglilun/38440.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;波浪理论斐波那契数列与黄金分割率&lt;/a&gt;。&lt;br&gt;不过波浪的形状确实符合下边要说的斐波那契螺旋：&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/6b173ce40bc99eba839c5b9398d927a5_b.jpg&quot; data-rawwidth=&quot;484&quot; data-rawheight=&quot;443&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;484&quot; data-original=&quot;https://pic3.zhimg.com/50/6b173ce40bc99eba839c5b9398d927a5_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;5.斐波那契螺旋&lt;br&gt;&lt;br&gt;斐波那契螺旋又称黄金螺旋，在自然界中广泛存在。如图是一个边长为斐波那契数列的正方形组成的矩形。&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/0db4b080e6106c44705815b705226d15_b.jpg&quot; data-rawwidth=&quot;223&quot; data-rawheight=&quot;138&quot; class=&quot;content_image&quot; width=&quot;223&quot;&gt;&lt;/figure&gt;&lt;br&gt;（加一句：看着这个图，是不是能发现&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/bbc05fe2891b1bd672da6e397b9cecd7_b.jpg&quot; data-rawwidth=&quot;337&quot; data-rawheight=&quot;39&quot; class=&quot;content_image&quot; width=&quot;337&quot;&gt;&lt;/figure&gt;是显而易见的？）&lt;br&gt;&lt;br&gt;这样连起来就是斐波那契螺旋了&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/2784034169e7f6e0bfdfee5c52dcf791_b.jpg&quot; data-rawwidth=&quot;223&quot; data-rawheight=&quot;138&quot; class=&quot;content_image&quot; width=&quot;223&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;贝壳螺旋轮廓线&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/977bdf99ace9c519b3d9941e9e37a7d7_b.jpg&quot; data-rawwidth=&quot;963&quot; data-rawheight=&quot;365&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;963&quot; data-original=&quot;https://pic2.zhimg.com/50/977bdf99ace9c519b3d9941e9e37a7d7_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/8486d594c63118610a8a3be079bf49c6_b.jpg&quot; data-rawwidth=&quot;963&quot; data-rawheight=&quot;577&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;963&quot; data-original=&quot;https://pic4.zhimg.com/50/8486d594c63118610a8a3be079bf49c6_r.jpg&quot;&gt;&lt;/figure&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/3903ae1febca8eae63f038aacd631564_b.jpg&quot; data-rawwidth=&quot;963&quot; data-rawheight=&quot;723&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;963&quot; data-original=&quot;https://pic2.zhimg.com/50/3903ae1febca8eae63f038aacd631564_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/7312cfbc09ead2a2b570f063bd0c2af5_b.jpg&quot; data-rawwidth=&quot;963&quot; data-rawheight=&quot;723&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;963&quot; data-original=&quot;https://pic3.zhimg.com/50/7312cfbc09ead2a2b570f063bd0c2af5_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic1.zhimg.com/50/0f99eed500074cb29a9b6389c06c815f_b.jpg&quot; data-rawwidth=&quot;963&quot; data-rawheight=&quot;555&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;963&quot; data-original=&quot;https://pic1.zhimg.com/50/0f99eed500074cb29a9b6389c06c815f_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;向日葵的生长&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic3.zhimg.com/50/a40a8e069606b04c8100d7df236d3bb9_b.jpg&quot; data-rawwidth=&quot;963&quot; data-rawheight=&quot;723&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;963&quot; data-original=&quot;https://pic3.zhimg.com/50/a40a8e069606b04c8100d7df236d3bb9_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;神奇的花&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/db5d355d805ba7f96b576ac2a5ed1982_b.jpg&quot; data-rawwidth=&quot;723&quot; data-rawheight=&quot;723&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;723&quot; data-original=&quot;https://pic2.zhimg.com/50/db5d355d805ba7f96b576ac2a5ed1982_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;6.建筑学&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/27d8c5e1cdf8e4555d2a714107a3752a_b.jpg&quot; data-rawwidth=&quot;600&quot; data-rawheight=&quot;400&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;600&quot; data-original=&quot;https://pic4.zhimg.com/50/27d8c5e1cdf8e4555d2a714107a3752a_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic4.zhimg.com/50/8e5b641cadfdfe793c43a71edbbfd582_b.jpg&quot; data-rawwidth=&quot;490&quot; data-rawheight=&quot;367&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;490&quot; data-original=&quot;https://pic4.zhimg.com/50/8e5b641cadfdfe793c43a71edbbfd582_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/0380f2e5e400a2c0db045533312fd90c_b.jpg&quot; data-rawwidth=&quot;580&quot; data-rawheight=&quot;359&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;580&quot; data-original=&quot;https://pic2.zhimg.com/50/0380f2e5e400a2c0db045533312fd90c_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/6dc0cda9399d53ccaee62659bb2163c1_b.jpg&quot; data-rawwidth=&quot;370&quot; data-rawheight=&quot;500&quot; class=&quot;content_image&quot; width=&quot;370&quot;&gt;&lt;/figure&gt;&lt;br&gt;7.据说一个小男孩参考斐波那契数列发明了太阳能电池树：&lt;br&gt;&lt;br&gt;&lt;blockquote&gt;一名13岁的男孩根据斐波那契数列&lt;a href=&quot;//link.zhihu.com/?target=http%3A//inhabitat.com/13-year-old-makes-solar-power-breakthrough-by-harnessing-the-fibonacci-sequence/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;发明了太阳能电池树&lt;/a&gt;，其产生的电力比太阳能光伏电池阵列多20-50%。&lt;a href=&quot;//link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E6%2596%2590%25E6%25B3%25A2%25E9%2582%25A3%25E5%25A5%2591%25E6%2595%25B0%25E5%2588%2597&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;斐波那契数列&lt;/a&gt;类似从0和1开始，之后的数是之前两数的和，如0，1，1，2，3，5，8，13，21...&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.amnh.org/nationalcenter/youngnaturalistawards/2011/aidan.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;Aidan Dwye&lt;/a&gt;在观察树枝分叉时发现它的分布模式类似斐波那契数列，这是大自然演化的一种结果，可能有助于树叶进行光合作用。&lt;br&gt;因此，Dwye猜想为什么不按照斐波那契数列排列太阳能电池？他设计了太阳能电池树，发现它的输出电力提高了20%，每天接受光照的时间延长了2.5小时。&lt;/blockquote&gt;&lt;br&gt;8.斐波那契螺旋形的摇椅&lt;br&gt;&lt;br&gt;&lt;blockquote&gt;妈妈摇椅是设计师Patrick Messier为自己的妻子兼合作伙伴Sophie Fournier设计的，当时他们刚有了第一个宝宝。&lt;br&gt;&lt;p&gt;当Sophie宣布自己怀孕时，她说想要一把摇椅，但发现没有一把摇椅能满足美观舒适的标准，于是Patrick决定自己做一把。&lt;/p&gt;&lt;p&gt;于是就有了这把妈妈摇椅。像是一个飘在空中的丝带，由一片纤维玻璃做成，曲线服从&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.shejipi.com/2748.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;斐波那契数列分布&lt;/a&gt;，经过特殊的高光聚氨酯处理。&lt;/p&gt;&lt;/blockquote&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/7b83b6501e1ca53f1c98af7dec0cf992_b.jpg&quot; data-rawwidth=&quot;600&quot; data-rawheight=&quot;388&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;600&quot; data-original=&quot;https://pic2.zhimg.com/50/7b83b6501e1ca53f1c98af7dec0cf992_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;五、数学上的扩展&lt;/b&gt;&lt;br&gt;&lt;br&gt;（1）广义斐波那契数列&lt;br&gt;定义：&lt;img src=&quot;//www.zhihu.com/equation?tex=a%2Bb%2Cab%5Cin+Z&quot; alt=&quot;a+b,ab\in Z&quot; eeimg=&quot;1&quot;&gt;,数列&lt;img src=&quot;//www.zhihu.com/equation?tex=f%28n%29&quot; alt=&quot;f(n)&quot; eeimg=&quot;1&quot;&gt;满足：&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/aee0c8f3fb2be52c05fa1f8d4b2857d2_b.jpg&quot; data-rawwidth=&quot;326&quot; data-rawheight=&quot;95&quot; class=&quot;content_image&quot; width=&quot;326&quot;&gt;&lt;/figure&gt;其通项为：&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/452e67623ef12c44b08c4a063a6430b8_b.jpg&quot; data-rawwidth=&quot;117&quot; data-rawheight=&quot;57&quot; class=&quot;content_image&quot; width=&quot;117&quot;&gt;&lt;/figure&gt;当&lt;img src=&quot;//www.zhihu.com/equation?tex=a%2Bb%3D1%2Cab%3D-1&quot; alt=&quot;a+b=1,ab=-1&quot; eeimg=&quot;1&quot;&gt;时即为斐波那契数列。&lt;br&gt;&lt;br&gt;（2）反斐波那契数列&lt;br&gt;&lt;br&gt;定义：&lt;img src=&quot;//www.zhihu.com/equation?tex=g%28n%2B2%29%3Dg%28n%29-g%28n%2B1%29&quot; alt=&quot;g(n+2)=g(n)-g(n+1)&quot; eeimg=&quot;1&quot;&gt;&lt;br&gt;反斐波那契数列相邻项比值的极限为&lt;img src=&quot;//www.zhihu.com/equation?tex=-0.618&quot; alt=&quot;-0.618&quot; eeimg=&quot;1&quot;&gt;。&lt;br&gt;&lt;br&gt;（3）巴都万数列(&lt;a href=&quot;//link.zhihu.com/?target=http%3A//oeis.org/A000931&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;A000931 - OEIS&lt;/a&gt;)&lt;br&gt;斐波那契数列可以刻画矩形，而巴都万数列则刻画的是三角形。其定义如下：&lt;br&gt;&lt;figure&gt;&lt;img src=&quot;https://pic2.zhimg.com/50/dc964298d819dfb7790b49ea8caf5f4b_b.jpg&quot; data-rawwidth=&quot;211&quot; data-rawheight=&quot;68&quot; class=&quot;content_image&quot; width=&quot;211&quot;&gt;&lt;/figure&gt;&lt;br&gt;(4)未解之谜：角谷猜想&lt;br&gt;&lt;br&gt;对一个正整数，若为奇数则乘3加1，若为偶数则除以2，通过有限次这样的操作，能否使得该数变成1？&lt;br&gt;这个猜想和斐波那契数列又很大关系，具体的可以看&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.doc88.com/p-6971887946835.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;角谷猜想的斐波那契数列现象&lt;/a&gt;。&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;六、总结&lt;/b&gt;&lt;br&gt;&lt;br&gt;斐波那契数列是各个学科中都出现的小滑头，它许多漂亮的性质让我们着迷。上文我所描述的这些只是它的冰山一角，权当抛砖引玉。大家读完了我的答案，还可以再结合自己的专业去看一些相关的资料，更好的去了解这个有趣的数列。&lt;br&gt;&lt;br&gt;&lt;b&gt;七、参考文献&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;[1]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.hytc.cn/xsjl/szh/lec5.pdf&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://www.&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;hytc.cn/xsjl/szh/lec5.p&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;br&gt;[2]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//blog.sina.com.cn/s/blog_77eb54a40100rpp9.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;斐波那契数列_一米阳光&lt;/a&gt;&lt;br&gt;[3]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.360doc.com/content/14/0131/23/1489589_349102002.shtml&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;斐波那契数列的规律性&lt;/a&gt;&lt;br&gt;[4]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.cnbeta.com/articles/152349.htm&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;13岁男孩根据斐波那契数列发明太阳能电池树_cnBeta 人物_cnBeta.COM&lt;/a&gt;&lt;br&gt;[5]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.shejipi.com/4547.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;服从斐波那契数列分布的妈妈摇椅&lt;/a&gt;&lt;br&gt;[6]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//shiba.hpe.sh.cn/jiaoyanzu/wuli/ShowArticle.aspx%3FarticleId%3D990%26classId%3D5&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;从斐波那契数列到黄金分割&lt;/a&gt;&lt;br&gt;[7]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//max.book118.com/html/2014/0407/7382822.shtm&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;斐波那契《计算之书》的研究.pdf 全文 文档投稿网&lt;/a&gt;&lt;br&gt;[8]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.cnblogs.com/newpanderking/archive/2011/07/26/2117328.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;斐波那契数列&lt;/a&gt;&lt;br&gt;['9]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//zh.wikipedia.org/zh-tw/%25E6%2596%2590%25E6%25B3%25A2%25E9%2582%25A3%25E5%25A5%2591%25E6%2595%25B0%25E5%2588%2597&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;費氏數列&lt;/a&gt;&lt;br&gt;[10]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E5%25B7%25B4%25E9%2583%25BD%25E8%2590%25AC%25E6%2595%25B8%25E5%2588%2597&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;巴都萬數列&lt;/a&gt;&lt;br&gt;[11]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//zh.wikipedia.org/wiki/%25E5%258D%25A2%25E5%258D%25A1%25E6%2596%25AF%25E6%2595%25B0&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;zh.wikipedia.org/wiki/%&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;E5%8D%A2%E5%8D%A1%E6%96%AF%E6%95%B0&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;br&gt;[12]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.doc88.com/p-6971887946835.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;角谷猜想的斐波那契数列现象&lt;/a&gt;&lt;br&gt;[13]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//oeis.org/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;The On-Line Encyclopedia of Integer Sequences® (OEIS®)&lt;/a&gt;&lt;br&gt;[14]&lt;a href=&quot;//link.zhihu.com/?target=http%3A//www.sbo8.com/bolanglilun/38440.html&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;波浪理论斐波那契数列与黄金分割率&lt;/a&gt;</textarea>


<div class="zh-summary summary clearfix">
<img src="https://pic3.zhimg.com/50/22769e1d6d4816eea15e0423271ba059_200x112.jpg" data-rawwidth="531" data-rawheight="298" class="origin_image inline-img zh-lightbox-thumb" data-original="https://pic3.zhimg.com/50/22769e1d6d4816eea15e0423271ba059_r.jpg">
一句话先回答问题：<b>因为斐波那契数列在数学和生活以及自然界中都非常有用。</b> 下面我就尽我所能，讲述一下斐波那契数列。 <b>一、起源和定义</b> 斐波那契数列最早被提出是印度数学家Gopala，他在研究箱子包装物件长度恰好为1和2时的方法数时首先描述了这个数列。也…

<a href="/question/28062458/answer/39763094" class="toggle-expand">显示全部</a>

</div>



<p class="visible-expanded"><a itemprop="url" class="answer-date-link meta-item" data-tooltip="s$t$发布于 2015-02-14" target="_blank" href="/question/28062458/answer/39763094">编辑于 2015-04-27</a></p>

</div>
<div class="zm-item-meta answer-actions clearfix js-contentActions">
<div class="zm-meta-panel">

<a data-follow="q:link" class="follow-link zg-follow meta-item" href="javascript:;" id="sfb-3407605"><i class="z-icon-follow"></i>关注问题</a>

<a href="#" name="addcomment" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>65 条评论</a>


<a href="#" class="meta-item zu-autohide js-thank" data-thanked="false"><i class="z-icon-thank"></i>感谢</a>



<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>

<a href="#" class="meta-item zu-autohide js-collect"><i class="z-icon-collect"></i>收藏</a>





<span class="zg-bull zu-autohide">&bull;</span>

<a href="#" class="meta-item zu-autohide js-noHelp">没有帮助</a>


<span class="zg-bull zu-autohide">&bull;</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>





<meta name="copyrightStatus" content="2">
<meta name="disableCopyAvatar" content="https://pic4.zhimg.com/4109864a6d5a521ea72629db1bc84ea1_s.jpg">

<span class="zg-bull">&bull;</span>


<a href="/copyright/apply?answer=39763094" target="_blank" class="meta-item copyright">申请转载</a>



<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>

<div class="zm-item-meta-extra">
<a href="javascript:;" class="zg-unfollow" data-type="a" id="f-11297239-102128200" name="unfavo">取消收藏</a>
</div>

</div>
</div>





<div class="zm-item" data-type="Answer">
<h2 class="zm-item-title"><a target="_blank" href="/question/25037345">如何用C语言生成(0,1)之间的随机浮点数？</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-answer "
itemscope itemtype="http://schema.org/Answer"
data-aid="7349034"
data-atoken="29912869"
data-collapsed="0"
data-created="1409385235"
data-deleted="0"
data-isowner="0"
data-helpful="True"
data-copyable="1"
data-zop
>
<link itemprop="url" href="/question/25037345/answer/29912869">
<meta itemprop="answer-id" content="7349034">
<meta itemprop="answer-url-token" content="29912869">
<a class="zg-anchor-hidden" name="answer-7349034"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="javascript:;" data-bind-votecount>38</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">38</span>
<span class="label sr-only">赞同</span>
</button>
<button class="down ">
<i class="icon vote-arrow"></i>
<span class="label sr-only">反对</span>
</button>
</div>


<div class="answer-head">

<div class="zm-item-answer-author-info">

<span class="summary-wrapper">
<span class="author-link-line">

<a class="author-link"
data-hovercard="p$t$bei-ji-85"
target="_blank" href="/people/bei-ji-85"
>北极</a><span class="icon icon-badge-best_answerer icon-badge" data-tooltip="s$b$优秀回答者"></span></span><span class="badge-summary"><a href="/people/bei-ji-85#hilightbadge" target="_blank">中央处理器 (CPU)、铁路、编程话题优秀回答者</a></span>



<span title="太糟糕了" class="bio">
太糟…
</span>
</span>
</div>

<div class="zm-item-vote-info" data-votecount="38" data-async-voters="1">



<span class="voters text"><a href="#" class="more text"><span class="js-voteCount">38</span>&nbsp;人赞同</a></span>


</div>
</div>
<div class="zm-item-rich-text expandable js-collapse-body" data-resourceid="2197000" data-action="/answer/content" data-author-name="北极" data-entry-url="/question/25037345/answer/29912869">

<textarea hidden class="content">赞同@vczh的说法，不赞同目前回答里的所有遇到0重试的方法，万一连续N次都重试呢？万一不是用lib C的标准库做随机而碰巧连续多次都重试怎么办？不能认为可能性低就完全忽视这种可能性吧。&lt;br&gt;&lt;br&gt;@vczh在实践中可能实现有点偏差，因为精度控制很麻烦，如果要完全符合精度，我倒是有个十分麻烦但肯定精准的方法，当然仅在x86平台，32位，C语言标准环境下可用：&lt;br&gt;&lt;br&gt;根据浮点数的定义在内存中分别是：&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img data-rawheight=&quot;75&quot; data-rawwidth=&quot;490&quot; src=&quot;https://pic4.zhimg.com/50/396f19a63ca24f45611d161c9400a44d_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;490&quot; data-original=&quot;https://pic4.zhimg.com/50/396f19a63ca24f45611d161c9400a44d_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;符号位+指数位+有效数位&lt;br&gt;&lt;br&gt;那么根据这个规则，以单精度浮点数为例：&lt;br&gt;&lt;br&gt;&lt;figure&gt;&lt;img data-rawheight=&quot;75&quot; data-rawwidth=&quot;590&quot; src=&quot;https://pic4.zhimg.com/50/749cc641eb4d5dafd085e8c23f8826aa_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;590&quot; data-original=&quot;https://pic4.zhimg.com/50/749cc641eb4d5dafd085e8c23f8826aa_r.jpg&quot;&gt;&lt;/figure&gt;&lt;br&gt;单精度浮点数在0-1之间的数字的范围是：&lt;br&gt;&lt;br&gt;符号位永远为0&lt;br&gt;&lt;br&gt;当有效数在1 ~ Max-1（Max=0x7FFFFF）之间的时候：指数取值是0到126&lt;br&gt;&lt;br&gt;当有效数是0的时候：指数取值是1到126&lt;br&gt;&lt;br&gt;当有效数是Max的时候：指数的取值是0到125&lt;br&gt;&lt;br&gt;所以有代码如下：&lt;br&gt;&lt;br&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;stdlib.h&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;union&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FloatRand&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;Frac&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;Exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;Signed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Binary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* for debug only */&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;GetFloatRand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;union&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FloatRand&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Signed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Frac&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x800000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Frac&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7FFFFF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Frac&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7E&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;验证代码&lt;br&gt;&lt;br&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000000000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GetFloatRand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%G&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;failed 0x%08X&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br&gt;同样的double类型的也可以做出类似效果，肯定是随机的，并且不需要重试。&lt;br&gt;&lt;br&gt;补充：评论里有人提到会破坏均匀性，这确实是一个问题，但只要精心调整Exp的出现概率（具体计算就太复杂了）还是可以做到均匀分布的。&lt;br&gt;&lt;br&gt;改良算法是：&lt;br&gt;&lt;br&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;GetFloatRand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;union&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FloatRand&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Signed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Frac&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x800000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Frac&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7FFFFF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7D&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Frac&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BitArea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7E&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br&gt;我再次声明我的观点连续出现0的概率确实非常小，但不能因为非常小就完全忽略，既然逻辑上有能力避免，那么就应该避免，否则就是故意留下一个逻辑上的漏洞。大部分人都对随机函数有信心，但可惜的是，随机函数属于这个代码里的“外部函数”，不属于自己设计的，那么在一个高可靠性的系统里，不应该以“概率”的眼光去看待外部函数，万一它被黑客攻击了一直都产生0呢？&lt;br&gt;&lt;br&gt;说点跟话题无关的内容：当年IPv4设计出来的时候，计算机很少，那时候从概率上来说是不是IP地址永远都用不完？不应该把自己的代码漏洞置于概率之上，也不应该把数学上小概率事件放到计算机系统里。另外Milo Yip说的，概率确实很低，但要是float的话，概率恐怕没那么低吧。</textarea>


<div class="zh-summary summary clearfix">

赞同@vczh的说法，不赞同目前回答里的所有遇到0重试的方法，万一连续N次都重试呢？万一不是用lib C的标准库做随机而碰巧连续多次都重试怎么办？不能认为可能性低就完全忽视这种可能性吧。 @vczh在实践中可能实现有点偏差，因为精度控制很麻烦，如果要完全符…

<a href="/question/25037345/answer/29912869" class="toggle-expand">显示全部</a>

</div>



<p class="visible-expanded"><a itemprop="url" class="answer-date-link meta-item" data-tooltip="s$t$发布于 2014-08-30" target="_blank" href="/question/25037345/answer/29912869">编辑于 2014-08-31</a></p>

</div>
<div class="zm-item-meta answer-actions clearfix js-contentActions">
<div class="zm-meta-panel">

<a data-follow="q:link" class="follow-link zg-follow meta-item" href="javascript:;" id="sfb-2197000"><i class="z-icon-follow"></i>关注问题</a>

<a href="#" name="addcomment" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>32 条评论</a>


<a href="#" class="meta-item zu-autohide js-thank" data-thanked="false"><i class="z-icon-thank"></i>感谢</a>



<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>

<a href="#" class="meta-item zu-autohide js-collect"><i class="z-icon-collect"></i>收藏</a>





<span class="zg-bull zu-autohide">&bull;</span>

<a href="#" class="meta-item zu-autohide js-noHelp">没有帮助</a>


<span class="zg-bull zu-autohide">&bull;</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>





<meta name="copyrightStatus" content="1">
<meta name="disableCopyAvatar" content="">

<span class="zg-bull">&bull;</span>

<a href="/terms#sec-licence-1" target="_blank" class="meta-item copyright">
作者保留权利
</a>


<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>

<div class="zm-item-meta-extra">
<a href="javascript:;" class="zg-unfollow" data-type="a" id="f-7349034-102128200" name="unfavo">取消收藏</a>
</div>

</div>
</div>




<div class="zm-item" data-type="Post">
<h2 class="zm-item-title"><a target='_blank' class="post-link" href="https://zhuanlan.zhihu.com/p/39582599" data-za-element-name="Title">自然语言课程（七）：使用python爬取文本信息</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-feed zm-item-post" data-type="p">
<link itemprop="url" href="https://zhuanlan.zhihu.com/p/39582599">
<meta itemprop="post-id" content="7857874">
<meta itemprop="post-url-token" content="39582599">
<a class="zg-anchor-hidden" name="post-39582599"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="#" data-bind-votecount>0</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">0</span>
<span class="label sr-only">赞</span>
</button>
</div>


<div class="post-head">
<div class="author-info summary-wrapper">


<span class="author-link-line">
<a href="/people/yy123-55-75" data-hovercard="p$t$yy123-55-75"
class="author-link">一鱼君</a></span><span title="游弋于数据挖掘、网文IP、影视化改编之间。公众号：一鱼数据(yiyudata)" class="bio">
游弋于数据挖掘、网文IP、影视化改编之间…
</span>

</div>
<div class="zm-item-vote-info empty" data-votecount="0">




</div>
</div>
<div class="entry-body">
<div class="zm-item-rich-text js-collapse-body" data-resourceid="7857874">
<div class="post-content" data-author-name="一鱼君" data-entry-url="https://zhuanlan.zhihu.com/p/39582599">
<textarea hidden class="content">&lt;p&gt;在前面的几节课我们介绍了各种各样不同的自然语言处理的算法和应用，这对网络小说爱好者和语言学研究者有着很重要的意义。然而，有时候我们分析一本小说不仅仅是看它的内容本身，在这个信息时代，网络上已经有很多现成的资料和观点供我们侧面考量一本小说的优劣。&lt;b&gt;今天这节课我们回到最基础的网络爬虫，来看一看网络爬虫的工具和一些实际的应用。&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;提取网页源代码&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;——Requests 工具包&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;在我们提取网络信息之前，我们必须&lt;b&gt;将网页的源代码进行提取，Requests工具包现在可以说是最好用和最普及的静态网页爬虫工具&lt;/b&gt;（动态网页爬虫在此文不作过多的介绍，如有兴趣请戳链接&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//blog.csdn.net/qq_30242609/article/details/53788228&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;blog.csdn.net/qq_302426&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;09/article/details/53788228&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt; ），它是由大神Kenneth Reitz所搭建的。在Requests的官方介绍里，Requests所遵守的哲学理念是：&lt;/p&gt;&lt;p&gt;1.Beautiful is better than ugly. （美胜过丑）&lt;/p&gt;&lt;p&gt;2.Explicit is better than implicit.（清晰胜过隐匿）&lt;/p&gt;&lt;p&gt;3.Simple is better than complex.（简单胜过复杂）&lt;/p&gt;&lt;p&gt;4.Complex is better than complicated.（复杂胜过繁琐）&lt;/p&gt;&lt;p&gt;5.Readability counts.（可读性很重要）&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Kenneth Reitz本人就是这些理念的信徒，他专注于开发能够方便人类使用的工具和软件，在这方面最突出的贡献就是Requests: HTTP for Humans。&lt;/p&gt;&lt;p&gt;Requests工具包的使用非常简单，最主要使用的函数为requests.get(url),其中参数url就是我们想提取源代码的网页，再通过requests.get(url).text将页面转换为字符串，就可以供我们使用了。&lt;/p&gt;&lt;p&gt;&lt;b&gt;信息提取——Xpath&lt;/b&gt;&lt;/p&gt;&lt;p&gt;我们普通的网页一般都是XML文档格式，当我们想提取里面的内容时，我们需要借助Xpath来分解其中的格式，提取我们想要的内容。&lt;b&gt;在了解Xpath之前我们需要知道四个基本概念：节点、元素、属性、文本 。&lt;/b&gt;我们来看一个例子：&lt;/p&gt;&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&amp;gt;&lt;/p&gt;&lt;p&gt;&amp;lt;bookstore&amp;gt;&lt;/p&gt;&lt;p&gt;&amp;lt;book&amp;gt;&lt;/p&gt;&lt;p&gt;  &amp;lt;title&amp;gt;Harry Potter&amp;lt;/title&amp;gt;&lt;/p&gt;&lt;p&gt;  &amp;lt;author&amp;gt;J K. Rowling&amp;lt;/author&amp;gt;&lt;/p&gt;&lt;p&gt;  &amp;lt;year&amp;gt;2005&amp;lt;/year&amp;gt;&lt;/p&gt;&lt;p&gt;  &amp;lt;price&amp;gt;29.99&amp;lt;/price&amp;gt;&lt;/p&gt;&lt;p&gt;&amp;lt;/book&amp;gt;&lt;/p&gt;&lt;p&gt;&amp;lt;/bookstore&amp;gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;这就是一个网页的源码，其中 &amp;lt;bookstore&amp;gt; 是文档节点， &amp;lt;author&amp;gt;J K. Rowling&amp;lt;/author&amp;gt; 是元素节点， lang=&quot;en&quot; 是属性节点。&lt;/b&gt; J K. Rowling 、2005 和29.99是文本（文本通常就是我们想爬取的内容）。&lt;br&gt;&lt;/p&gt;&lt;p&gt;在python里，我们使用lxml工具包里的etree来实现xpath的语法，当然除了xpath语法之外还有很多其他的方法可以将XML文档格式进行分解，在这篇文章我们只介绍xpath。&lt;/p&gt;&lt;p&gt;&lt;b&gt;实例分享——&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;爬取豆瓣电影的信息&lt;/b&gt;&lt;/p&gt;&lt;p&gt;接下来我们做一个很简单的实例分享，我们想爬取在豆瓣网上的电影《超时空同居》的导演和演员信息。&lt;/p&gt;&lt;p&gt;首先我们找到电影的URL：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-c7210247778f7eacf44a1159add89bc7_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;651&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-c7210247778f7eacf44a1159add89bc7_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;右键点击看网页的源代码 view page source（或者可以进入开发者模式（insepect））：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-c152076c5af6c19a618921f6b7cb9922_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;704&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-c152076c5af6c19a618921f6b7cb9922_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;接下来我们就进入网页源代码了，我们想要搜集的信息就在源代码里，只用输入关键字就可以查看到，比如这里我们输入’雷佳音’就定位到了我们想要寻找的位置：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-4d57147ed4bae3ccd1150bec7151b9b1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;335&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-4d57147ed4bae3ccd1150bec7151b9b1_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;接下来我们就需要分析TML的格式了，例如我们要找到所有的主演：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-a2e71c8f9b6a15a16814373191cdaf23_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;83&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic4.zhimg.com/v2-a2e71c8f9b6a15a16814373191cdaf23_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;大家可以看到有一个普遍的规律：主演的名字所对应的节点名都为a，属性都为rel=&quot;v:starring&quot;，这样我们就可以很轻易的用xpath的语法定位到拥有这个元素的节点，然后将所有的结果找出。&lt;/p&gt;&lt;p&gt;同理，导演的名字所对应的节点名为a，属性都为rel=&quot; v:directedBy&quot;，我们同样可以通过这个定位找到相应的文本：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-122a602beccd532968e4423e9ae4871a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;12&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-122a602beccd532968e4423e9ae4871a_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;具体的代码如下：&lt;/p&gt;&lt;p&gt;‘’&lt;/p&gt;&lt;p&gt;import requests&lt;/p&gt;&lt;p&gt;from lxml import etree&lt;/p&gt;&lt;p&gt;url='&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//movie.douban.com/subject/27133303/%3Ffrom%3Dshowing&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;movie.douban.com/subjec&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;t/27133303/?from=showing&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;'  #输入我们的url&lt;/p&gt;&lt;p&gt;get = requests.get(url).text # get(url) 得到我们的网页, text将源网页转化为字符串&lt;/p&gt;&lt;p&gt;selector = etree.HTML(get) # 将源码转换为xpath可以识别的TML格式&lt;/p&gt;&lt;p&gt;info = {}  #字典用于储存信息&lt;/p&gt;&lt;p&gt;info['电影'] = selector.xpath('//title/text()')[0].strip() # 定位电影名字&lt;/p&gt;&lt;p&gt;info['导演']=selector.xpath('//a[@rel=&quot;v:directedBy&quot;]/text()') # 定位导演名字&lt;/p&gt;&lt;p&gt;info['演员']=selector.xpath('//a[@rel=&quot;v:starring&quot;]/text()') # 定位演员名字&lt;/p&gt;&lt;p&gt;print(info)&lt;/p&gt;&lt;p&gt;‘’&lt;/p&gt;&lt;p&gt;最后我们得到一个字典集的结果：&lt;/p&gt;&lt;p&gt;‘’&lt;/p&gt;&lt;p&gt;{'电影': '超时空同居 (豆瓣)', '导演': ['苏伦'], '演员': ['雷佳音', '佟丽娅', '张衣', '于和伟', '王正佳', '陶虹', '李念', '李光洁', '杨玏', '范明', '徐峥', '杨迪', '方龄', '陈昊']}&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实例分享2——爬取带有json格式豆瓣电影的信息&lt;/b&gt;&lt;/p&gt;&lt;p&gt;首先，&lt;b&gt;json是一种轻量级的数据交换格式，它简洁和清晰的层次结构使得 JSON 成为理想的数据交换语言，易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;在我们爬虫的过程中，我们有时候可以在开发者模式返回的网页里找到完整的json格式的数据，这时候我们就可以运用requests包里的json函数将爬取到的原文本转化格式，从而方便我们提取内容。我们还是拿豆瓣电影举例：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-ed29e688c9703b4a0513b23d5127fed3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;574&quot; data-rawheight=&quot;625&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;574&quot; data-original=&quot;https://pic4.zhimg.com/v2-ed29e688c9703b4a0513b23d5127fed3_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; 这是点击分类后我们看到的电影信息，假如我们想爬取这些电影的信息，我们可以&lt;b&gt;点击右键进入开发者模式（inspector）。&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-18f1750c850d73ebd28ff4f52eb5465f_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;720&quot; data-rawheight=&quot;307&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;720&quot; data-original=&quot;https://pic4.zhimg.com/v2-18f1750c850d73ebd28ff4f52eb5465f_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;在打开开发者模式之后一定要记得刷新一次，否则不会显示之前接收到的页面信息。&lt;/b&gt;然后我们选择右边标签的network，下面再点击XHR选项,我们就会看到一个返回的网页，双击它。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-8327122583445e190e9bdb766755adf6_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1017&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic3.zhimg.com/v2-8327122583445e190e9bdb766755adf6_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;上图就是打开后的json文件，由于我的电脑下载了json插件的缘故，它的格式要更清晰&lt;b&gt;（使用Chrome浏览器的同学可以进入Chrome商店下载Juan Ramón JSON&lt;/b&gt; &lt;b&gt;Beautifier Chrome插件）。&lt;/b&gt;Json文件其实也可以被理解为是一个大的字典，里面有很多层小的字典和列表，我们找到json网页后只需要用requests变成json格式即可方便的提取信息。&lt;/p&gt;&lt;p&gt;代码如下：&lt;/p&gt;&lt;p&gt;‘’&lt;/p&gt;&lt;p&gt;import requests&lt;/p&gt;&lt;p&gt;url='&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//movie.douban.com/j/new_search_subjects%3Fsort%3DT%26range%3D0%2C10%26tags%3D%26start%3D0&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;movie.douban.com/j/new_&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;search_subjects?sort=T&amp;amp;range=0,10&amp;amp;tags=&amp;amp;start=0&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;'&lt;/p&gt;&lt;p&gt;get = requests.get(url).json()   #用json()函数得到网页源码&lt;/p&gt;&lt;p&gt;get = get['data']&lt;/p&gt;&lt;p&gt;info = {}&lt;/p&gt;&lt;p&gt;for i in range(len(get)):&lt;/p&gt;&lt;p&gt;    info[get[i]['title']] = [get[i]['directors'], get[i]['rate'] ]  #提取每部电影的导演和评分&lt;/p&gt;&lt;p&gt;print(info)&lt;/p&gt;&lt;p&gt;‘‘&lt;/p&gt;&lt;p&gt;最后我们得到结果：&lt;/p&gt;&lt;p&gt;‘‘&lt;/p&gt;&lt;p&gt;{'肖申克的救赎': [['弗兰克·德拉邦特'], '9.6'], '这个杀手不太冷': [['吕克·贝松'], '9.4'], '阿甘正传': [['罗伯特·泽米吉斯'], '9.4'], '盗梦空间': [['克里斯托弗·诺兰'], '9.3'], '泰坦尼克号': [['詹姆斯·卡梅隆'], '9.3'], '千与千寻': [['宫崎骏'], '9.3'], '三傻大闹宝莱坞': [['拉吉库马尔·希拉尼'], '9.2'], '霸王别姬': [['陈凯歌'], '9.5'], '海上钢琴师': [['朱塞佩·托纳多雷'], '9.2'], '让子弹飞': [['姜文'], '8.7'], '当幸福来敲门': [['加布里埃莱·穆奇诺'], '8.9'], '怦然心动': [['罗伯·莱纳'], '8.9'], '少年派的奇幻漂流': [['李安'], '9.0'], '阿凡达': [['詹姆斯·卡梅隆'], '8.6'], '大话西游之大圣娶亲': [['刘镇伟'], '9.2'], '剪刀手爱德华': [['蒂姆·波顿'], '8.7'], '天使爱美丽': [['让-皮埃尔·热内'], '8.7'], '飞屋环游记': [['彼特·道格特', '鲍勃·彼德森'], '8.9'], '那些年，我们一起追的女孩': [['九把刀'], '8.1'], '机器人总动员': [['安德鲁·斯坦顿'], '9.3']}&lt;/p&gt;&lt;p&gt;‘‘&lt;/p&gt;&lt;p&gt;可能有同学想问，第一个问题是这些数据都这么明显，我们不复制粘贴就行了，为何还要多此一举呢？&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;拿电影信息举例子，当我们需要提取信息的电影数量在几部或者几十部时，我们手动操作或许快于代码，但是如果我们要提取上千上万部电影信息时，这时候人工成本就会非常的大，耗时也非常的长。相反，我们只需要找到相同的规律，通过代码来循环我们需要提取的信息，这就是为什么爬虫对于数据挖掘和数据分析如此重要的原因。&lt;/p&gt;&lt;p&gt;在我们上述分享的示例中，我们都是挑选的格式比较规范的、信息量不是很大的信息进行提取，但现实生活中我们会遇到各种各样不规范格式的网页，或许不能直接借用一个一对一的元素来提取其中的文本，这时候xpath的语法和python的一些基本语法就会显得尤为重要。&lt;b&gt;想要深入了解xpath的同学可以进入我的公众号-找到同名文章-戳阅读原文进行学习。&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;最后，本次课程就到这里啦，这一次的自然语言课程系列到此就全部结束了。谢谢大家关注。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;by 一鱼君——一个专注网文五百年的数据狂人&lt;/p&gt;&lt;p&gt;欢迎来撩&lt;/p&gt;&lt;p&gt;微信公众号：yiyudata&lt;/p&gt;</textarea>
<div class="zh-summary summary clearfix">
在前面的几节课我们介绍了各种各样不同的自然语言处理的算法和应用，这对网络小说爱好者和语言学研究者有着很重要的意义。然而，有时候我们分析一本小说不仅仅是看它的内容本身，在这个信息时代，网络上已经有很多现成的资料和观点供我们侧面考量一本小说的…

<a href="https://zhuanlan.zhihu.com/p/39582599" class="toggle-expand">显示全部</a>

</div>

</div>
</div>
</div>
<div class="zm-item-meta clearfix js-contentActions">
<div class="zm-meta-panel">




<a href="#" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>添加评论</a>
<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>
<span class="zg-bull zu-autohide">•</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>
<span class="zg-bull">•</span>
<a href=https://zhuanlan.zhihu.com/p/39582599 class="meta-item" target="_blank">去往文章页</a>
<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>
</div>
</div>



<div class="zm-item" data-type="Post">
<h2 class="zm-item-title"><a target='_blank' class="post-link" href="https://zhuanlan.zhihu.com/p/39582424" data-za-element-name="Title">自然语言课程（六）：运用word2vec词向量分析词之间关系</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-feed zm-item-post" data-type="p">
<link itemprop="url" href="https://zhuanlan.zhihu.com/p/39582424">
<meta itemprop="post-id" content="7857837">
<meta itemprop="post-url-token" content="39582424">
<a class="zg-anchor-hidden" name="post-39582424"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="#" data-bind-votecount>0</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">0</span>
<span class="label sr-only">赞</span>
</button>
</div>


<div class="post-head">
<div class="author-info summary-wrapper">


<span class="author-link-line">
<a href="/people/yy123-55-75" data-hovercard="p$t$yy123-55-75"
class="author-link">一鱼君</a></span><span title="游弋于数据挖掘、网文IP、影视化改编之间。公众号：一鱼数据(yiyudata)" class="bio">
游弋于数据挖掘、网文IP、影视化改编之间…
</span>

</div>
<div class="zm-item-vote-info empty" data-votecount="0">




</div>
</div>
<div class="entry-body">
<div class="zm-item-rich-text js-collapse-body" data-resourceid="7857837">
<div class="post-content" data-author-name="一鱼君" data-entry-url="https://zhuanlan.zhihu.com/p/39582424">
<textarea hidden class="content">&lt;p&gt; 在之前的课程中我们介绍了基本的分词理论，例如 &lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzIwNTg5NTI0Mg%3D%3D%26mid%3D2247487183%26idx%3D1%26sn%3Dae62751ed10a3d0ed079b1450b17d81d%26chksm%3D9728adeaa05f24fc48067318690066dfa9c1105024bbe1e4fb48c753b4dd653f5a64cedd8062%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TF-IDF&lt;/a&gt; 和 &lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzIwNTg5NTI0Mg%3D%3D%26mid%3D2247487246%26idx%3D1%26sn%3D80edeb6e2073d622ceb0cd36a5b1c8b8%26chksm%3D9728ac2ba05f253d7f1a74f81fff7f44dc46e4fcf27446ea7223be50ba2a0a097e6fd6dab383%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;TextRank&lt;/a&gt;，今天这节课我们将会介绍一个基于神经网络的NLP模型，名为词向量。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;      为了能让更多人了解词向量这一大杀器，我们会尽可能省略掉一些不必要的数学推导。但如果要理解这个模型的内涵，还是需要了解一些的线性代数和统计学知识，如果你不对矩阵的运算法则等不熟悉，请先自学这部分内容。如果想深入的学习词向量和深度学习的相关知识，可以参考李沐老师和他的团队打造的相关课程进行更系统化的学习。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;词向量基本概念&lt;/b&gt;&lt;/p&gt;&lt;p&gt;      正如前面的课程所一直强调的，自然语言是一套用来表达含义的复杂系统，在这套系统中，词是表义的基本单元。在机器学习中，如何使用数值化特征来表达词语的信息是极为重要的一个名词。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;       前面的课程提到的词频、TF-IDF 值都是词语信息量的数值表达方式，但这种低维的数值表示无法揭露词语的全部内涵，尤其是对词语的语义特征揭露地不够。这时，我们不仅会想到，能否用数值化的向量表示词，换句话中，也就是找到每个词语的特征向量。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;      为了完成这一个目的，我们需要做一些降维映射工作，而把词映射为实数域上向量的技术则被词嵌入（word embedding），得到的向量则称为词向量。&lt;/p&gt;&lt;p&gt;  如今，已经有不少模型可以完成词嵌入的过程，本次课程则以经典的 word2vec 库中的跳字模型(skip-gram)为例，讲解词向量的生成过程。&lt;/p&gt;&lt;p&gt;&lt;b&gt;one-hot 编码&lt;/b&gt;&lt;/p&gt;&lt;p&gt;        词向量最简单粗暴的构建方式是使用 one-hot 编码，实际则是将不同的词语视作不同的类别，如果有N个词语，则每个词可以和从0到N-1的连续整数一一对应。这些与词对应的整数也叫词的索引。 假设一个词的索引为i ，为了得到该词的one-hot向量表示，我们创建一个全0的长为N的向量，并将其第i位设成1。&lt;/p&gt;&lt;p&gt;        然而，大部分涉及到语义抽取的场景下，one-hot 编码都是一个糟糕的选择，如果我们试图用每个词语的 one-hot 编码来计算语义相似度（比如余弦相似度），任意两个词语的相似度则都是0，因为所有词语的词向量都是两两正交的。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;word2vec&lt;/b&gt;&lt;/p&gt;&lt;p&gt;       2013年，Google团队发表了word2vec工具。word2vec工具主要包含两个模型：跳字模型（skip-gram）和连续词袋模型（continuous bag of words，简称CBOW），以及两种近似训练法：负采样（negative sampling）和层序softmax（hierarchical softmax）。值得一提的是，word2vec的词向量可以较好地表达不同词之间的相似和类比关系。&lt;/p&gt;&lt;p&gt;  word2vec自提出后被广泛应用在自然语言处理任务中。它的模型和训练方法也启发了很多后续的词嵌入模型。因此，本次课程将重点介绍word2vec中的跳字模型和训练方法。&lt;/p&gt;&lt;p&gt;&lt;b&gt;跳字模型&lt;/b&gt;&lt;/p&gt;&lt;p&gt;  在跳字模型中，我们用一个词来预测它在文本序列周围(上下文)的词。举个例子，假设有一段文本，分词结果是“他”、“是”、“厨师”、“的”和“外甥”，那么跳字模型所关心的是，给定中心词 “厨师” ，其邻近的上下文环境出现“他”、“是”、“的”和“外甥”等背景词的条件概率。背景词的选取依赖于与中心词距离窗口的设置，本例中这个窗口的大小为2。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;       通过上述原理的描述，我们不难发现跳字模型，或者说整个word2vec 库的思想是通过词语在语料中所处的上下文环境来判别词语的语义信息，进而通过一些算法提取其词向量。这个想法其实很有马克思主义哲学的意味，正如马克思所说，“人的本质是一切社会关系的总和”，词语的含义则很大程度上取决于其所处的上下文环境。两个上下文环境相似的词语，其含义应该也是相似的。（注：其实更多的是替代关系，未必是近义词，这是一个需要关注的点）&lt;/p&gt;&lt;p&gt;  下面我们用数学公式来描述一下跳字模型。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;      假设词典索引集V的大小为|V|，且V={0，1，…，|V|—1}。给定一个长度为T的文本序列中，第t步的词为 w（t）。当上下文窗口大小为m时，跳字模型需要最大化给定任一中心词生成所有背景词的概率：&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-9a8ceb3226717cb4855ff19251b853f5_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;477&quot; data-rawheight=&quot;50&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;477&quot; data-original=&quot;https://pic2.zhimg.com/v2-9a8ceb3226717cb4855ff19251b853f5_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;       其实这个公式就统计学中的极大似然估计的似然函数，也就是说既然我们语境在语料里看到了中心词和背景词的出项顺序，那么我们就要使得这种文本序列的出现概率最大。上式的最大似然估计取自然对数后与最小化以下损失函数等价：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-0b739f58ac07fcd0b01fad19712a1404_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;585&quot; data-rawheight=&quot;50&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;585&quot; data-original=&quot;https://pic1.zhimg.com/v2-0b739f58ac07fcd0b01fad19712a1404_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;       我们可以用v和u分别表示中心词和背景词的词向量。换言之，对于词典中索引为i的词，它在作为中心词和背景词时的向量表示分别是vi和ui。而词典中所有词的这两种向量正是跳字模型所要学习的模型参数。为了将模型参数引入损失函数，我们需要把上式的条件概率变成词向量的函数。为了简化计算，假设给定中心词后生成各个背景词的概率是相互独立的。设中心词wc在词典中索引为c，背景词wo在词典中索引为o，损失函数中的给定中心词生成背景词的条件概率可以通过 softmax 函数定义为&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-7936543990378d82b4e4ab8e821199e9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;365&quot; data-rawheight=&quot;68&quot; class=&quot;content_image&quot; width=&quot;365&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;       当序列长度T较大时，我们通常在每次迭代时随机采样一个较短的子序列来计算有关该子序列的损失。然后，根据该损失计算词向量的梯度并迭代词向量。具体算法可以参考李沐老师的教程“梯度下降和随机梯度下降——从零开始”(点击文章底部阅读原文即可查看)一节。训练模型时，每一次迭代实际上是用这些梯度来迭代子序列中出现过的中心词和背景词的向量。训练结束后，对于词典中的任一索引为的词，我们均得到该词作为中心词和背景词的两组词向量vi和ui。在自然语言处理应用中，我们会使用跳字模型的中心词向量。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;      然而，在实际引用中，为了得到相对准确的语义信息，我们往往使用比较大语料进行训练，但这使得跳字模型的绚练计算量过大。 为了降低其计算复杂度，负采样 (negative-sampling) 和 层序 softmax (hirechical softmax)是常用的两种近似训练法。出于篇幅的考虑，本文对此不做详细描述。&lt;/p&gt;&lt;p&gt;&lt;b&gt;实例分享&lt;/b&gt;&lt;/p&gt;&lt;p&gt;由于词向量的流行，python中的诸多库其实都有封装好的 word2vec，本文以gensim 库为例，依旧以红楼梦为语料，给大家进行分享。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c0c4de1c3b1d8f5a9cb65aa06e6209c8_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1338&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic1.zhimg.com/v2-c0c4de1c3b1d8f5a9cb65aa06e6209c8_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;       总的来说，相比 TF-IDF 和 TextRank，词向量能更好的表示词语的语义，但这部份信息也是基于词语所在的上下文计算得到的，输入不同的训练语料，可能同一个词会训练出截然不同的词向量。这就需要我们根据应用场景来筛选，处理相应的输入。在我们分享的实例中，大家可以调整参数来看一看输出的结果有何不同，也可以选择自己喜欢的文本进行分词后用word2vec模型训练，有任何的问题也欢迎加入一鱼数据自然语言处理课程讨论群进行提问（入群方式见我的公众号）。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;by 一鱼君——一个专注网文五百年的数据狂人&lt;/p&gt;&lt;p&gt;欢迎来撩&lt;/p&gt;&lt;p&gt;微信公众号：yiyudata&lt;/p&gt;</textarea>
<div class="zh-summary summary clearfix">
在之前的课程中我们介绍了基本的分词理论，例如 <a href="http://mp.weixin.qq.com/s?__biz=MzIwNTg5NTI0Mg==&amp;mid=2247487183&amp;idx=1&amp;sn=ae62751ed10a3d0ed079b1450b17d81d&amp;chksm=9728adeaa05f24fc48067318690066dfa9c1105024bbe1e4fb48c753b4dd653f5a64cedd8062&amp;scene=21#wechat_redirect">TF-IDF</a> 和 <a href="http://mp.weixin.qq.com/s?__biz=MzIwNTg5NTI0Mg==&amp;mid=2247487246&amp;idx=1&amp;sn=80edeb6e2073d622ceb0cd36a5b1c8b8&amp;chksm=9728ac2ba05f253d7f1a74f81fff7f44dc46e4fcf27446ea7223be50ba2a0a097e6fd6dab383&amp;scene=21#wechat_redirect">TextRank</a>，今天这节课我们将会介绍一个基于神经网络的NLP模型，名为词向量。 为了能让更多人了解词向量这一大杀器，我们会尽可能省略掉一些不必要的数学推导。但如果要理解这个模型的内涵，还是需…

<a href="https://zhuanlan.zhihu.com/p/39582424" class="toggle-expand">显示全部</a>

</div>

</div>
</div>
</div>
<div class="zm-item-meta clearfix js-contentActions">
<div class="zm-meta-panel">




<a href="#" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>添加评论</a>
<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>
<span class="zg-bull zu-autohide">•</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>
<span class="zg-bull">•</span>
<a href=https://zhuanlan.zhihu.com/p/39582424 class="meta-item" target="_blank">去往文章页</a>
<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>
</div>
</div>



<div class="zm-item" data-type="Post">
<h2 class="zm-item-title"><a target='_blank' class="post-link" href="https://zhuanlan.zhihu.com/p/39581713" data-za-element-name="Title">自然语言课程（五）：使用gephi绘制人物关系图及案例分析</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-feed zm-item-post" data-type="p">
<link itemprop="url" href="https://zhuanlan.zhihu.com/p/39581713">
<meta itemprop="post-id" content="7857671">
<meta itemprop="post-url-token" content="39581713">
<a class="zg-anchor-hidden" name="post-39581713"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="#" data-bind-votecount>4</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">4</span>
<span class="label sr-only">赞</span>
</button>
</div>


<div class="post-head">
<div class="author-info summary-wrapper">


<span class="author-link-line">
<a href="/people/yy123-55-75" data-hovercard="p$t$yy123-55-75"
class="author-link">一鱼君</a></span><span title="游弋于数据挖掘、网文IP、影视化改编之间。公众号：一鱼数据(yiyudata)" class="bio">
游弋于数据挖掘、网文IP、影视化改编之间…
</span>

</div>
<div class="zm-item-vote-info" data-votecount="4">



<span class="voters text"><a href="#" class="more text"><span class="js-voteCount">4</span>&nbsp;人赞</a></span>


</div>
</div>
<div class="entry-body">
<div class="zm-item-rich-text js-collapse-body" data-resourceid="7857671">
<div class="post-content" data-author-name="一鱼君" data-entry-url="https://zhuanlan.zhihu.com/p/39581713">
<textarea hidden class="content">&lt;p&gt;在前面的课程中我们已经分享了自然语言处理中最常用的一些分析方法，目前这些方法都分析的对象信息传播中的内容，而实际上，信息传播的方式也包含着重要的信息。比如研究一条爆红的微博，就可以从传播路径入手，找到核心的转发人，在研究转发人和评论人的微博内容，可以更有效地提取关键信息。&lt;b&gt;本节课我们就介绍如何以可视化的方法探索信息的传递，出于便利性和绘图美感的考虑，我们采用 Gephi 作为可视化工具。&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;Gephi简介&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Gephi 是&lt;b&gt;一款网络分析领域的数据可视化处理软件&lt;/b&gt;，开发者对它寄予的希望是：成为 “数据可视化领域的Photoshop” ，不同于前几节课的各种NLP的算法，Gephi是一款有图形化界面的可视化工具，所以这节课更多的是来学习一个Gephi的基本操作。除了绘图，gephi也可以执行一些基于图论的模型，更多进阶的内容可以参考官网 Official Tutorials 进行学习。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;操作介绍&lt;/b&gt;&lt;/p&gt;&lt;p&gt; 本节课小编使用红楼梦的部分章节为案例，统计其中主要人物的出场关系并绘制网络图给大家进行实例分享。小编将文章中涉及的资料放在了云盘提供下载，大家&lt;b&gt;在微信后台回复“第五课”即可获取下载链接&lt;/b&gt;。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;下载与数据导入&lt;/b&gt;&lt;/p&gt;&lt;p&gt;我们可以从Gephi官网免费下载着一款开源软件。之后，我们来学习第一步也是很关键的一部：&lt;b&gt;如何导入数据&lt;/b&gt;。&lt;/p&gt;&lt;p&gt;Gephi 中输入的输入可以分为点信息和边信息两大部分。其中点代表了个体，边代表了个体与个体之间的关系，此外每个点和边又会有标签、权重等额外数据，代表了个体的类别之，关系强度等信息。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;这次我们依旧使用红楼梦的部分章节为案例，统计其中主要人物的出场关系并绘制网络图，人物关系统计代码如下：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-b675c13b855edaed78cb52e2f454c22a_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;662&quot; data-rawheight=&quot;366&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;662&quot; data-original=&quot;https://pic3.zhimg.com/v2-b675c13b855edaed78cb52e2f454c22a_r.jpg&quot;&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-5cedb8df9e5fe0462ec146dc5071a753_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;662&quot; data-rawheight=&quot;527&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;662&quot; data-original=&quot;https://pic4.zhimg.com/v2-5cedb8df9e5fe0462ec146dc5071a753_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c41fb2c1db443594132bd40b9a7736f4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;659&quot; data-rawheight=&quot;179&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;659&quot; data-original=&quot;https://pic1.zhimg.com/v2-c41fb2c1db443594132bd40b9a7736f4_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;最后得到的是两个csv文件：nodes.csv和edges.csv，其中edges.csv代表了线与权重，nodes.csv代表了个体。这里&lt;b&gt;需要注意的是我们生成edges.csv文件里的列名一定要是首字母大写的Source(起始点)，Target(终点)Weight(权重)，不然导入 Gephi 无法自动识别。&lt;/b&gt;&lt;/p&gt;&lt;p&gt;之后我们就打开 Gephi 点击文件，导入电子表格，就可以直接把我们生成的两个结果文件导入了。(&lt;b&gt;友情提醒：接的要在导入的最后一部选择“Append to exisiting work space”不然会新开很多工作区)&lt;/b&gt;。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;之后你就会看到一坨黑乎乎的东西：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-c60408e5cf00d60a775fecfb7f94d384_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;354&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic1.zhimg.com/v2-c60408e5cf00d60a775fecfb7f94d384_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;这么丑的图怎么出来见公婆呢，我们要做的&lt;b&gt;第一步就是把节点和边的颜色以及大小进行美化。&lt;/b&gt;下图显示了对应的调整按钮，具体方式就由各位自行把玩了。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-09fefe8c8400bc49c5aac4c82e855639_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;370&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic2.zhimg.com/v2-09fefe8c8400bc49c5aac4c82e855639_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;改好了节点，我们可以依样画葫芦地&lt;b&gt;修改边的视觉属性&lt;/b&gt;，之后就需要&lt;b&gt;对节点的排列做调整了。&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-97424f5a12ea1506a50d345a7e720760_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;363&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic1.zhimg.com/v2-97424f5a12ea1506a50d345a7e720760_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;具体采用什么布局算法和参数组合，就要根据具体情况逐一尝试了。我个人偏爱Fruchterman Reingold 。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;看到这里如果你还是觉得这个图太丑，那我只能说同学你还是太年轻了。目前为止我们都是在编辑试图进行操作，这个图是为了方便我们改动而不是为了最终展示。如果想要更美观的图形，请用力点击界面左上角的预览按钮。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-d2f6ce48e8d07247b37b5ac9e75cf6c1_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;640&quot; data-rawheight=&quot;381&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;640&quot; data-original=&quot;https://pic2.zhimg.com/v2-d2f6ce48e8d07247b37b5ac9e75cf6c1_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;到这里最基本的操作就已经介绍结束了，我们可以看到经过一系列的操作后，我们的网状图基本成型，通过大小和形状较为直观的反应出了我们数据之间的关系。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Gephi 是一个很强大的可视化软件，它能做的不仅仅只有画图，还可以通过内置的数学统计算法来算出更有分析意义的结果，感兴趣的同学们可以去官网浏览更详细的介绍。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;by 一鱼君——一个专注网文五百年的数据狂人&lt;/p&gt;&lt;p&gt;欢迎来撩&lt;/p&gt;&lt;p&gt;微信公众号：yiyudata&lt;/p&gt;</textarea>
<div class="zh-summary summary clearfix">
在前面的课程中我们已经分享了自然语言处理中最常用的一些分析方法，目前这些方法都分析的对象信息传播中的内容，而实际上，信息传播的方式也包含着重要的信息。比如研究一条爆红的微博，就可以从传播路径入手，找到核心的转发人，在研究转发人和评论人的微…

<a href="https://zhuanlan.zhihu.com/p/39581713" class="toggle-expand">显示全部</a>

</div>

</div>
</div>
</div>
<div class="zm-item-meta clearfix js-contentActions">
<div class="zm-meta-panel">




<a href="#" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>添加评论</a>
<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>
<span class="zg-bull zu-autohide">•</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>
<span class="zg-bull">•</span>
<a href=https://zhuanlan.zhihu.com/p/39581713 class="meta-item" target="_blank">去往文章页</a>
<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>
</div>
</div>



<div class="zm-item" data-type="Post">
<h2 class="zm-item-title"><a target='_blank' class="post-link" href="https://zhuanlan.zhihu.com/p/39581614" data-za-element-name="Title">自然语言课程（四）：TEXT Rank的分词原理及案例分析</a></h2>
<div class="zm-item-fav">
<div tabindex="-1" class="zm-item-feed zm-item-post" data-type="p">
<link itemprop="url" href="https://zhuanlan.zhihu.com/p/39581614">
<meta itemprop="post-id" content="7857649">
<meta itemprop="post-url-token" content="39581614">
<a class="zg-anchor-hidden" name="post-39581614"></a>

<div class="zm-item-vote">
<a class="zm-item-vote-count js-expand js-vote-count" href="#" data-bind-votecount>2</a>
</div>

<div class="zm-votebar">
<button class="up ">
<i class="icon vote-arrow"></i>
<span class="count">2</span>
<span class="label sr-only">赞</span>
</button>
</div>


<div class="post-head">
<div class="author-info summary-wrapper">


<span class="author-link-line">
<a href="/people/yy123-55-75" data-hovercard="p$t$yy123-55-75"
class="author-link">一鱼君</a></span><span title="游弋于数据挖掘、网文IP、影视化改编之间。公众号：一鱼数据(yiyudata)" class="bio">
游弋于数据挖掘、网文IP、影视化改编之间…
</span>

</div>
<div class="zm-item-vote-info" data-votecount="2">



<span class="voters text"><a href="#" class="more text"><span class="js-voteCount">2</span>&nbsp;人赞</a></span>


</div>
</div>
<div class="entry-body">
<div class="zm-item-rich-text js-collapse-body" data-resourceid="7857649">
<div class="post-content" data-author-name="一鱼君" data-entry-url="https://zhuanlan.zhihu.com/p/39581614">
<textarea hidden class="content">&lt;p&gt;在上一篇文章“&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s%3F__biz%3DMzIwNTg5NTI0Mg%3D%3D%26mid%3D2247487183%26idx%3D1%26sn%3Dae62751ed10a3d0ed079b1450b17d81d%26chksm%3D9728adeaa05f24fc48067318690066dfa9c1105024bbe1e4fb48c753b4dd653f5a64cedd8062%26scene%3D21%23wechat_redirect&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;自然语言处理课程（三）：TF-IDF的分词原理及案例分析&lt;/a&gt;”中，我们对TF-ITF(term frequency–inverse document frequency)进行了简单的讨论以及实例分享，今天我们再来看一看另一种名为TextRank的关键词提取法。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;  在阅读这篇文章前，你应该知道两个基础概念：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;·图形数据结构&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;       图的构成有点、线和权重，一个图是由点和点与点之间连接的线而组成的，权重（可选）是每条线的值，更多详情请戳：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E5%259B%25BE%25E5%25BD%25A2%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%2584/5315008&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;baike.baidu.com/item/%E&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;5%9B%BE%E5%BD%A2%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/5315008&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt; ·递归算法&lt;/p&gt;&lt;p&gt;       递归算法的本质是把一个大问题分解成数个相同的小问题。举个很简单的例子，10个1加在一起等于10，人类可以一眼看出，但计算机必须要进行计算，所以我们其中一种办法就是拆分成九次1+1，这就是递归比较通俗易懂的本质，更多详情请戳：&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E9%2580%2592%25E5%25BD%2592%25E7%25AE%2597%25E6%25B3%2595/4323575%3Ffr%3Daladdin&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;baike.baidu.com/item/%E&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;9%80%92%E5%BD%92%E7%AE%97%E6%B3%95/4323575?fr=aladdin&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt; TextRank 算法是一种用于文本的基于图的排序算法，其基本思想来源于谷歌的 PageRank 算法。&lt;/b&gt;该算法先把文本分割成若干子单元 (如单词、句子) 并建立图模型，再利用投票机制对文本中的重要成分进行排序，仅利用单篇文档本身的信息即可实现关键词提取、摘要生成等功能。和 LDA、HMM 等模型不同，TextRank 算法不需要事先对多篇文档进行学习训练, 这个简洁的特性使其得到了广泛的应用。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;   最早提出 TextRank 方法的是北得克萨斯州大学的 Rada Mihalcea 和 Paul Tarau，在名为 TextRank: Bringing Order into Texts 的论文里，他们不仅仅论述了怎么利用 TextRank 去高效准确的提取关键词和关键句子，并且实证了 TextRank 相比于其他一些更古老的方法有更高的准确性。感兴趣的同学可以戳论文的链接进行阅读。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//www.aclweb.org/anthology/W04-3252%25E3%2580%2582&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;http://www.aclweb.org/anthology/W04-3252。&lt;/a&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;PageRank基本概念&lt;/b&gt;&lt;/p&gt;&lt;p&gt;      在了解 TextRank 之前，我们先来了解下 PageRank。PageRank 最开始用来计算搜索结果的重要性，我们可以将整个万维网可以看作一张有向图，网页构成了图中的节点。如果网页A存在到网页B的链接，那么就有一条从节点A指向节点B的有向边。&lt;/p&gt;&lt;p&gt;     不知道什么是有向图的同学请戳文章顶端链接了解一下。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;     之后，我们的任务就是从图中挖掘每个节点的权重作为其重要性的度量。一种比较自然的方式是，一个节点如果由很多个其他节点指向它，那么这个节点应该就很重要，就像公司里的技术大牛常常被萌新请教问题一样。如果我们考虑的再深入一点，如果一个技术人员经常被一些技术大牛请教问题，而他自己不需要请教别人就能独立解决大部分问题，那他显然就是战斗机级别的员工。同样，如果有多个高权重的节点指向某一节点，且这个节点指向外部的连接数很少，那么这个被连接的点显然非常重要。参照这个逻辑，我们可以使用下面的公式计算每个节点(网页)的权重(重要性)：&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-9f8ecf982ef63b9cac2f1f8be2bc6845_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;550&quot; data-rawheight=&quot;81&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;550&quot; data-original=&quot;https://pic2.zhimg.com/v2-9f8ecf982ef63b9cac2f1f8be2bc6845_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;其中：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;S(Vi)是网页ai中的重要性。&lt;/li&gt;&lt;li&gt;d是阻尼系数，可以近似看作一个平滑参数，一般设置为0.85。（论文中有讲解）&lt;/li&gt;&lt;li&gt;In(Vi)是存在指向网页i的链接的网页集合。&lt;/li&gt;&lt;li&gt;Out(Vj)是网页j 外链的网页的集合。&lt;/li&gt;&lt;li&gt;|Out(Vj)|是集合中元素的个数，也就是网页j 中存在外部网页的链接数量。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;上式等号左边为一次迭代计算得出的节点  的权重，右边为上一轮迭代中得出的节点的权重值。由于每个节点的权重计算需要由与这个节点有连接的节点的权重计算得出，为了避免陷入鸡生蛋蛋生鸡的死循环，PageRank 算法会将每个节点的初始权重设为1，然后次迭代以得到收敛的结果。这样我们就计算出了每个网页的重要性。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;     回到 TextRank 算法，其基本思想与 PageRank 如出一辙，唯一的区别是节点由网页变成了分词后的词语，边的含义也由网页上的链接变成了文本中在固定长度的窗口内两个词语是否共同出现。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;TextRank提取关键字&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;关键词抽取的任务就是从一段给定的文本中自动抽取出若干有意义的词语或词组。&lt;/b&gt;而要完成这一任务，我们再完成分词、过滤掉无意义的停用词后，就可以通过利用 TextRank 挖掘词汇之间关系，计算词语权重，将权重大的词作为关键词。其主要步骤如下：&lt;/p&gt;&lt;p&gt;1. 把给定的文本T按照句号等标点气氛为句子，T=[S1，S2…，Sm],其中Si代表句子。&lt;/p&gt;&lt;p&gt;2. 对于每个句子，进行分词和词性标注处理，并过滤掉停用词，只保留指定词性的单词，如名词、动词、形容词等作为候选关键词。&lt;/p&gt;&lt;p&gt;3. 将上一步得到的候选词构建候选关键词图，G=(V，E),其中V为节点集。然后基于词语的共现关系（co-occurrence）构造节点间的连接(边)。即仅当两个候选词在长度为的窗口中共同出现，这两个词语节点才有边。其中窗口长度定义为词语个数。&lt;/p&gt;&lt;p&gt;4. 根据 TextRank 的权重计算公式，迭代计算各节点的权重，直至收敛。&lt;/p&gt;&lt;p&gt;5. 对节点权重进行倒序排序，从而得到最重要的T个单词，作为候选关键词。&lt;/p&gt;&lt;p&gt;6. 将上一步得到的候选词在原始文本中进行标记，若能形成相邻词组，则组合成词组关键词。&lt;/p&gt;&lt;p&gt;       至此，我们已经可以通过 TextRank 提取出关键词和关键的短语。比如一本小说中有&quot;魔王降临“这一关键词，一般的分词引擎会分为起分为”魔王“和”降临“两个词，但使用 TextRank 得到关键词后，我们或许基于关键词的邻接关系可以得到”魔王降临“这个短语，以用于我们接下来更深入的文本分析。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;TextRank 和 TF-ITF 异同&lt;/b&gt;&lt;/p&gt;&lt;p&gt;     TextRank 和 TF-IDF 都被广泛应用于文本特征，并且大多数情况下它们都比纯粹的词频统计挖掘出了更多信息。&lt;/p&gt;&lt;p&gt;  但正如前文所说到，TextRank 更多的是反应文本内词语的关系，利用投票机制对文本中的重要成分进行排序,仅利用单篇文档本身的信息即可实现关键词提取。它可以很简洁快速的达到我们想要的效果。但在处理短文本等场景下效果就会打折扣。&lt;/p&gt;&lt;p&gt;  相比之下，TF-IDF 方法可能会需要更多的时间来搜集文本以计算 IDF 值，但不可否认的是借助其它的文本可以减弱单文本带来的偏差(bias)，所以 TextRank 和 TF-IDF 在很多的自然语言处理工具包（例如Jieba）中都被同时收录。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;实例分享&lt;/b&gt;&lt;/p&gt;&lt;p&gt;     本节课小编使用 jieba 库中封装号的 TextRank 代码给大家进行实例分享。jieba 库的 TextRank 部分源码可以参考对应的 Github 链接。小编将文章中涉及的资料放在了云盘提供下载，大家&lt;b&gt;在微信后台回复“第四课”即可获取下载链接&lt;/b&gt;。&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-457c6c6ac58a41a304c8d4557dbf9175_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;388&quot; class=&quot;origin_image zh-lightbox-thumb&quot; width=&quot;1080&quot; data-original=&quot;https://pic2.zhimg.com/v2-457c6c6ac58a41a304c8d4557dbf9175_r.jpg&quot;&gt;&lt;/figure&gt;&lt;p&gt;      这部份源码涉及到了 jieba 库内很多函数和类的联动，刚开始看可能由一定难度，但相信如果能够耐心看完会很有收获，有问题的同学欢迎随时在我们的讨论群里提问（入群方式请见我的公众号）。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;by 一鱼君——一个专注网文五百年的数据狂人&lt;/p&gt;&lt;p&gt;欢迎来撩&lt;/p&gt;&lt;p&gt;微信公众号：yiyudata&lt;/p&gt;</textarea>
<div class="zh-summary summary clearfix">
在上一篇文章“<a href="http://mp.weixin.qq.com/s?__biz=MzIwNTg5NTI0Mg==&amp;mid=2247487183&amp;idx=1&amp;sn=ae62751ed10a3d0ed079b1450b17d81d&amp;chksm=9728adeaa05f24fc48067318690066dfa9c1105024bbe1e4fb48c753b4dd653f5a64cedd8062&amp;scene=21#wechat_redirect">自然语言处理课程（三）：TF-IDF的分词原理及案例分析</a>”中，我们对TF-ITF(term frequency–inverse document frequency)进行了简单的讨论以及实例分享，今天我们再来看一看另一种名为TextRank的关键词提取法。 在阅读这篇文章前，你应该知道…

<a href="https://zhuanlan.zhihu.com/p/39581614" class="toggle-expand">显示全部</a>

</div>

</div>
</div>
</div>
<div class="zm-item-meta clearfix js-contentActions">
<div class="zm-meta-panel">




<a href="#" class="meta-item toggle-comment js-toggleCommentBox">
<i class="z-icon-comment"></i>添加评论</a>
<a href="#" class="meta-item zu-autohide js-share"><i class="z-icon-share"></i>分享</a>
<span class="zg-bull zu-autohide">•</span>
<a href="#" class="meta-item zu-autohide js-report">举报</a>
<span class="zg-bull">•</span>
<a href=https://zhuanlan.zhihu.com/p/39581614 class="meta-item" target="_blank">去往文章页</a>
<button class="meta-item item-collapse js-collapse">
<i class="z-icon-fold"></i>收起
</button>
</div>
</div>
</div>
</div>
</div>


</div>

<div class="border-pager">
<div class="zm-invite-pager">

<span class="zg-gray-normal">上一页</span>








<span class="zg-gray-normal">1</span>



<span><a href="?page=2">2</a></span>






<span><a href="?page=2">下一页</a></span>

</div>
</div>


</div>
</div>


<div class="zu-main-sidebar" data-za-module="RightSideBar">


<div class="zm-side-section">
<div class="zm-side-section-inner">
<h3>关于创建者</h3>
<a class="zm-list-avatar-link" href="/people/xiao-gui-55-68">
<img class="zm-list-avatar-medium"
src="https://pic2.zhimg.com/v2-8526bf36fd355e67836415fdd6458bfc_m.jpg"/>
</a>
<div class="zm-list-content-medium" id="zh-single-answer-author-info">
<span class="zg-right">

</span>
<h2 class="zm-list-content-title">

<a href="/people/xiao-gui-55-68" class="author-link">小鬼</a>
</h2>
<div class="summary-wrapper summary-wrapper--short">

<span class="zg-gray-normal bio"></span>
</div>
</div>
</div>
</div>


<div class="zm-side-section">
<div class="zm-side-section-inner">
<h3>收藏夹状态</h3>
<div class="zg-gray-normal">

最近活动于 <span class="time">2019-03-25</span>

</div>

<div class="zg-gray-normal"><a href="/collection/273369749/followers" data-za-c="collection", data-za-a="visit_collection_followers" data-za-l="collection_followers_count">0</a> 人关注了该收藏夹</div>

</div>
</div>
<div class="zm-side-section">
<div class="zm-side-section-inner">
<a href="#" id="zh-fav-list-side-bar-report" name="report-favlist" class="zg-link-gray-normal">举报收藏夹</a>
</div>
</div>

<div class="zm-side-section explore-side-section">
<div class="zm-side-section-inner">
<div class="section-title">
<a href="javascript:;" id="js-hot-fav-switch" class="zg-link-gray zg-right" data-za-c="collection" data-za-a="click_trending_collections_change" data-za-l="explore_sidebar_trending_collections_collection_name">换一换</a>
<h3>热门收藏</h3>
</div>
<ul class="list hot-favlists">
<li>
<div class="content">
<a href="/collection/153752942" target="_blank">致我的孩子：你不好好学习就去这种学校</a>
<div class="meta">
<span>7295 人关注</span>
<span class="zg-bull">&bull;</span>
<span>143 条内容</span>
</div>
</div>
</li>

<li>
<div class="content">
<a href="/collection/36808863" target="_blank">我的收藏</a>
<div class="meta">
<span>286 人关注</span>
<span class="zg-bull">&bull;</span>
<span>81 条内容</span>
</div>
</div>
</li>

<li>
<div class="content">
<a href="/collection/175577689" target="_blank">神奇知乎</a>
<div class="meta">
<span>217 人关注</span>
<span class="zg-bull">&bull;</span>
<span>57 条内容</span>
</div>
</div>
</li>

<li>
<div class="content">
<a href="/collection/29036428" target="_blank">程序员的工作</a>
<div class="meta">
<span>4686 人关注</span>
<span class="zg-bull">&bull;</span>
<span>209 条内容</span>
</div>
</div>
</li>

<li>
<div class="content">
<a href="/collection/66170818" target="_blank">关于吃的那些事</a>
<div class="meta">
<span>571 人关注</span>
<span class="zg-bull">&bull;</span>
<span>74 条内容</span>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="shameimaru-placeholder" data-loc="explore_down" data-params='{}'></div>


</div>


</div>


<div id="zh-footer" class="zh-footer">
<div class="content zg-wrap clearfix">
<ul>

<li><a href="https://liukanshan.zhihu.com" target="_blank">刘看山</a></li>

<li><a href="/question/19581624" target="_blank">知乎指南</a></li>
<li><a href="javascript:;" id="js-feedback-button">建议反馈</a></li>

<li><a href="/app" target="_blank">移动应用</a></li>
<li><a href="/careers">加入知乎</a></li>
<li><a href="/terms" target="_blank">知乎协议</a></li>
<li><a href="/jubao" target="_blank">举报投诉</a></li>
<li><a href="/term/privacy" target="_blank">隐私政策</a></li>
<li><a href="/contact">联系我们</a></li>

</ul>

<span class="copy">&copy; 2019 知乎</span>

</div>
</div>

<script type="text/json" class="json-inline" data-name="guiders2">{"exclusive-popover":{},"section":{"home-topstory":{"content":"\u8fd9\u91cc\u662f\u6839\u636e\u4f60\u5173\u6ce8\u7684\u8bdd\u9898\u5b9a\u5236\u7684\u5185\u5bb9\u7cbe\u9009\uff0c\u5173\u6ce8\u5176\u4ed6\u4eba\u4e5f\u53ef\u4ee5\u8ba9\u5185\u5bb9\u66f4\u4e30\u5bcc","dismissText":"\u77e5\u9053\u4e86","title":"\u6700\u65b0\u52a8\u6001"}},"editor":[]}</script>





<script type="text/template" class="bind-phone-confirmation-dialog-template">
<div class="clearfix bind-phone-confirmation-dialog" data-za-module="BindPhoneForm">
<p>
<span class="bind-phone-tip">应国家法规对于帐号实名的要求，进行下一步操作前，需要先完成手机绑定。</span>
<a href="https://zhuanlan.zhihu.com/p/27257715" target="_blank">了解更多</a>
</p>
<div class="text-right">
<a href="#" class="not-to-bind-phone">暂不绑定</a>&nbsp;&nbsp;
<button class="zg-btn-blue go-to-bind-phone">去绑定手机</button>
</div>
</div>
</script>



<script type="text/template" class="bind-phone-dialog-template">
<div class="code-activate-view clearfix" data-za-module="BindPhoneForm">
<div class="tip">绑定手机后，你就可以使用知乎的提问、回答、评论和编辑等功能。</div>
<form class="send-code clearfix">
<div class="input-wrapper">
<label class="info" for="phone_no-to-send">手机：</label>
<input type="text" id="phone_no-to-send" name="new_phone_no" class="text" required>
</div>
<button class="submit zg-btn-blue">获取验证码</button>
</form>
<form class="activate clearfix">
<div class="input-wrapper">
<label class="info" for="phone_no-to-bind">手机：</label>
<input type="text" id="phone_no-to-bind" name="new_phone_no" class="text" required>
</div>
<div class="input-wrapper verification-code">
<label class="info" for="digits">验证码：</label>
<input type="text" id="digits" name="digits" class="text" placeholder="6 位数验证码" maxlength="6" required>
<button type="button" class="resend-code">重发验证码</button>
</div>
<button class="submit zg-btn-blue">确认</button>
</form>
<div class="form-help-extra z-text-muted">
<p>没有收到验证码？</p>
<p>你也可以私信 <a target="_blank" href="http://www.zhihu.com/people/zhihuadmin">@知乎小管家</a> 或者发邮件至 <a href="mailto:i@zhihu.com">i@zhihu.com</a> 联系知乎管理员</p>
</div>
</div>
</script>



<script type="text/template" class="bind-email-notification-dialog-template">
<div class="clearfix bind-email-notification-dialog" data-za-module="BindMailForm">
<p>
由于你此前绑定的邮箱未经验证，未来请使用手机号登录知乎。
</p>
<div class="text-right">
<a class="zg-btn-blue js-reload" href="#">知道了</a>
</div>
</div>
</script>
<script type="text/json" class="json-inline" data-name="current_user">["\u5c0f\u9b3c","xiao-gui-55-68","https:\/\/pic2.zhimg.com\/v2-8526bf36fd355e67836415fdd6458bfc_s.jpg","a72065231b3cf90a51b5609192584760","",0,0,true,"yuerxmm@163.com","http:\/\/mail.163.com",0,true,false,false,"987106631573946368",false,false,false,true,null,null,true]</script>
<script type="text/json" class="json-inline" data-name="front_web_config">{"realname_win_config":{"timestamp":1501344000,"tip":"\u5e94\u56fd\u5bb6\u6cd5\u89c4\u5bf9\u4e8e\u5e10\u53f7\u5b9e\u540d\u7684\u8981\u6c42\uff0c\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u524d\uff0c\u9700\u8981\u5148\u5b8c\u6210\u624b\u673a\u7ed1\u5b9a\u3002","continue":0,"continue_time":3600,"skip_ut_verification":0}}</script>
<script type="text/json" class="json-inline" data-name="user_status">[null,null,false]</script>
<script type="text/json" class="json-inline" data-name="env">["zhihu.com","comet.zhihu.com",false,null,false,false]</script>
<script type="text/json" class="json-inline" data-name="permissions">[]</script>


<script type="text/json" class="json-inline" data-name="ga_vars">{"user_created":1528124560000,"now":1559442419000,"abtest_mask":"---------1--------------------","user_attr":[1,0,0,"-",1],"user_hash":"a72065231b3cf90a51b5609192584760"}</script>

<script type="text/json" class="json-inline" data-name="ra-urls">{"Copyright":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/Copyright.773358e5.js","PayUIApp":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/PayUIApp.36707672.js","CouponApp":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/CouponApp.1f64e458.js","PaymentApp":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/PaymentApp.a5a8951a.js","Community":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/Community.5a5b078a.js","Report":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/Report.b0136566.js","OrgOpHelp":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/OrgOpHelp.9e284cd9.js","common":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/common.8eaa69f7.js","BalanceApp":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/BalanceApp.1e4cdac8.js","AnswerWarrant":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/AnswerWarrant.a94bf518.js","CommentApp":"https:\/\/static.zhihu.com\/static\/revved\/-\/apps\/CommentApp.275ffa2a.js"}</script>

<script type="text/json" class="json-inline" data-name="current_list">[102128200,true,273369749,0]</script>


<script src="https://static.zhihu.com/static/revved/-/js/vendor.cb14a042.js"></script>
<script src="https://static.zhihu.com/static/revved/-/js/closure/base.b178f75b.js"></script>

<script src="https://static.zhihu.com/static/revved/-/js/closure/common.c89d4c53.js"></script>


<script src="https://static.zhihu.com/static/revved/-/js/closure/richtexteditor.09c9a6cd.js" async></script>
<script src="https://static.zhihu.com/static/revved/-/js/closure/page-main.236178a6.js"></script>
<meta name="entry" content="ZH.entryL" data-module-id="page-main">

<script type="text/zscript" znonce="8b4d218eacf94be88126e7ba35cc2e78"></script>

<input type="hidden" name="_xsrf" value="696d4644414d4d6c78504149764b6f633132484b45484676376e456b3347586d"/>
</body>
</html>